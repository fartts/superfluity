parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function zw(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Fb=this;function rm(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),o.push.apply(o,n)}return o}function sm(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?rm(Object(o),!0).forEach(function(r){Aw(e,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):rm(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function Aw(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}var cg;var Bw=function(t,e){return(Bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function tb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Bw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Dd=function(){return Dd=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dd.apply(this,arguments)};function Cw(t,e,r,o){return new(r||(r=Promise))(function(n,a){function $(t){try{x(o.next(t))}catch(e){a(e)}}function i(t){try{x(o.throw(t))}catch(e){a(e)}}function x(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then($,i)}x((o=o.apply(t,e||[])).next())})}function Dw(t,e){var r,o,n,a,$={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;$;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return $.label++,{value:a[1],done:!1};case 5:$.label++,o=a[1],a=[0];continue;case 7:a=$.ops.pop(),$.trys.pop();continue;default:if(!(n=(n=$.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){$=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){$.label=a[1];break}if(6===a[0]&&$.label<n[1]){$.label=n[1],n=a;break}if(n&&$.label<n[2]){$.label=n[2],$.ops.push(a);break}n[2]&&$.ops.pop(),$.trys.pop();continue;}a=e.call(t,$)}catch(i){a=[6,i],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var a=Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r]};function Nb(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kb(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,a=r.call(t),$=[];try{for(;(void 0===e||e-->0)&&!(o=a.next()).done;)$.push(o.value)}catch(i){n={error:i}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return $}function od(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t}function tm(t){return this instanceof tm?(this.v=t,this):new tm(t)}var b=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var vk={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},bb=function(e,r){if(!e)throw dg(r)},dg=function(e){return new Error("Firebase Database ("+vk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},um=function(e){for(var r=[],t=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?r[t++]=i:i<2048?(r[t++]=i>>6|192,r[t++]=63&i|128):55296==(64512&i)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++o)),r[t++]=i>>18|240,r[t++]=i>>12&63|128,r[t++]=i>>6&63|128,r[t++]=63&i|128):(r[t++]=i>>12|224,r[t++]=i>>6&63|128,r[t++]=63&i|128)}return r},Ew=function(e){for(var r=[],t=0,o=0;t<e.length;){var i=e[t++];if(i<128)r[o++]=String.fromCharCode(i);else if(i>191&&i<224){var n=e[t++];r[o++]=String.fromCharCode((31&i)<<6|63&n)}else if(i>239&&i<365){var $=((7&i)<<18|(63&(n=e[t++]))<<12|(63&(a=e[t++]))<<6|63&e[t++])-65536;r[o++]=String.fromCharCode(55296+($>>10)),r[o++]=String.fromCharCode(56320+(1023&$))}else{n=e[t++];var a=e[t++];r[o++]=String.fromCharCode((15&i)<<12|(63&n)<<6|63&a)}}return r.join("")},wk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,r){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var t=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[],i=0;i<e.length;i+=3){var n=e[i],$=i+1<e.length,a=$?e[i+1]:0,s=i+2<e.length,x=s?e[i+2]:0,p=n>>2,c=(3&n)<<4|a>>4,m=(15&a)<<2|x>>6,h=63&x;s||(h=64,$||(m=64)),o.push(t[p],t[c],t[m],t[h])}return o.join("")},encodeString:function(e,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(e):this.encodeByteArray(um(e),r)},decodeString:function(e,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(e):Ew(this.decodeStringToByteArray(e,r))},decodeStringToByteArray:function(e,r){this.init_();for(var t=r?this.charToByteMapWebSafe_:this.charToByteMap_,o=[],i=0;i<e.length;){var n=t[e.charAt(i++)],$=i<e.length?t[e.charAt(i)]:0,a=++i<e.length?t[e.charAt(i)]:64,s=++i<e.length?t[e.charAt(i)]:64;if(++i,null==n||null==$||null==a||null==s)throw Error();var x=n<<2|$>>4;if(o.push(x),64!==a){var p=$<<4&240|a>>2;if(o.push(p),64!==s){var c=a<<6&192|s;o.push(c)}}}return o},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Fw=function(e){var r=um(e);return wk.encodeByteArray(r,!0)},vm=function(e){try{return wk.decodeString(e,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};function wm(e){return Dg(void 0,e)}function Dg(e,r){if(!(r instanceof Object))return r;switch(r.constructor){case Date:return new Date(r.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return r;}for(var t in r)r.hasOwnProperty(t)&&Gw(t)&&(e[t]=Dg(e[t],r[t]));return e}function Gw(e){return"__proto__"!==e}var Gb=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(r,t){e.resolve=r,e.reject=t})}return e.prototype.wrapCallback=function(e){var r=this;return function(t,o){t?r.reject(t):r.resolve(o),"function"==typeof e&&(r.promise.catch(function(){}),1===e.length?e(t):e(t,o))}},e}();function Hw(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xm(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hw())}function Iw(){try{return"[object process]"===Object.prototype.toString.call(Fb.process)}catch(e){return!1}}function Jw(){return"object"==typeof self&&self.self===self}function Kw(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $b(){return!0===vk.NODE_CLIENT||!0===vk.NODE_ADMIN}var Lw="FirebaseError",Mw=function(e){function r(t,o,i){var n=e.call(this,o)||this;return n.code=t,n.customData=i,n.name=Lw,Object.setPrototypeOf(n,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,xk.prototype.create),n}return tb(r,e),r}(Error),xk=function(){function e(e,r,t){this.service=e,this.serviceName=r,this.errors=t}return e.prototype.create=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var o=r[0]||{},i=this.service+"/"+e,n=this.errors[e],$=n?Nw(n,o):"Error",a=this.serviceName+": "+$+" ("+i+").";return new Mw(i,a,o)},e}();function Nw(e,r){return e.replace(Ow,function(e,t){var o=r[t];return null!=o?String(o):"<"+t+"?>"})}var Ow=/\{\$([^}]+)}/g;function Eg(e){return JSON.parse(e)}function yb(e){return JSON.stringify(e)}var ym=function(e){var r={},t={},o={},i="";try{var n=e.split(".");r=Eg(vm(n[0])||""),t=Eg(vm(n[1])||""),i=n[2],o=t.d||{},delete t.d}catch($){}return{header:r,claims:t,data:o,signature:i}},Pw=function(e){var r=ym(e).claims;return!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},Qw=function(e){var r=ym(e).claims;return"object"==typeof r&&!0===r.admin};function Hb(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Ed(e,r){return Object.prototype.hasOwnProperty.call(e,r)?e[r]:void 0}function yk(e){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function nj(e,r,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=r.call(t,e[i],i,e));return o}function Rw(e){for(var r=[],t=function(e,t){Array.isArray(t)?t.forEach(function(t){r.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):r.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},o=0,i=Object.entries(e);o<i.length;o++){var n=i[o];t(n[0],n[1])}return r.length?"&"+r.join("&"):""}var Sw=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,r){r||(r=0);var t=this.W_;if("string"==typeof e)for(var o=0;o<16;o++)t[o]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(o=0;o<16;o++)t[o]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(o=16;o<80;o++){var i=t[o-3]^t[o-8]^t[o-14]^t[o-16];t[o]=4294967295&(i<<1|i>>>31)}var n,$,a=this.chain_[0],s=this.chain_[1],x=this.chain_[2],p=this.chain_[3],c=this.chain_[4];for(o=0;o<80;o++){o<40?o<20?(n=p^s&(x^p),$=1518500249):(n=s^x^p,$=1859775393):o<60?(n=s&x|p&(s|x),$=2400959708):(n=s^x^p,$=3395469782);i=(a<<5|a>>>27)+n+c+$+t[o]&4294967295;c=p,p=x,x=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+x&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(e,r){if(null!=e){void 0===r&&(r=e.length);for(var t=r-this.blockSize,o=0,i=this.buf_,n=this.inbuf_;o<r;){if(0===n)for(;o<=t;)this.compress_(e,o),o+=this.blockSize;if("string"==typeof e){for(;o<r;)if(i[n]=e.charCodeAt(o),++o,++n===this.blockSize){this.compress_(i),n=0;break}}else for(;o<r;)if(i[n]=e[o],++o,++n===this.blockSize){this.compress_(i),n=0;break}}this.inbuf_=n,this.total_+=r}},e.prototype.digest=function(){var e=[],r=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&r,r/=256;this.compress_(this.buf_);var o=0;for(t=0;t<5;t++)for(var i=24;i>=0;i-=8)e[o]=this.chain_[t]>>i&255,++o;return e},e}();function Tw(e,r){var t=new Uw(e,r);return t.subscribe.bind(t)}var Uw=function(){function e(e,r){var t=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(function(){e(t)}).catch(function(e){t.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(r){r.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(r){r.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,r,t){var o,i=this;if(void 0===e&&void 0===r&&void 0===t)throw new Error("Missing Observer.");void 0===(o=Vw(e,["next","error","complete"])?e:{next:e,error:r,complete:t}).next&&(o.next=zk),void 0===o.error&&(o.error=zk),void 0===o.complete&&(o.complete=zk);var n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch(e){}}),this.observers.push(o),n},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,e)},e.prototype.sendOne=function(e,r){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[e])try{r(t.observers[e])}catch(o){"undefined"!=typeof console&&console.error&&console.error(o)}})},e.prototype.close=function(e){var r=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},e}();function Vw(e,r){if("object"!=typeof e||null===e)return!1;for(var t=0,o=r;t<o.length;t++){var i=o[t];if(i in e&&"function"==typeof e[i])return!0}return!1}function zk(){}var cb=function(e,r,t,o){var i;if(o<r?i="at least "+r:o>t&&(i=0===t?"none":"no more than "+t),i)throw new Error(e+" failed: Was called with "+o+(1===o?" argument.":" arguments.")+" Expects "+i+".")};function Ib(e,r){return e+" failed: "+r+" argument "}function Ab(e,r,t,o){if((!o||t)&&"function"!=typeof t)throw new Error(Ib(e,r)+"must be a valid function.")}function zm(e,r,t,o){if((!o||t)&&("object"!=typeof t||null===t))throw new Error(Ib(e,r)+"must be a valid context object.")}var Ww=function(e){for(var r=[],t=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(i>=55296&&i<=56319){var n=i-55296;bb(++o<e.length,"Surrogate pair missing trail surrogate."),i=65536+(n<<10)+(e.charCodeAt(o)-56320)}i<128?r[t++]=i:i<2048?(r[t++]=i>>6|192,r[t++]=63&i|128):i<65536?(r[t++]=i>>12|224,r[t++]=i>>6&63|128,r[t++]=63&i|128):(r[t++]=i>>18|240,r[t++]=i>>12&63|128,r[t++]=i>>6&63|128,r[t++]=63&i|128)}return r},oj=function(e){for(var r=0,t=0;t<e.length;t++){var o=e.charCodeAt(t);o<128?r++:o<2048?r+=2:o>=55296&&o<=56319?(r+=4,t++):r+=3}return r};function Lb(e){return e&&e._delegate?e._delegate:e}var Fg=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),pd="[DEFAULT]",Am=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=pd);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Gb;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Dd({identifier:pd,optional:!1},t),n=e.identifier,i=e.optional,r=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(Yw(t))try{this.getOrInitializeService({instanceIdentifier:pd})}catch(c){}try{for(var i=Nb(this.instancesDeferred.entries()),r=i.next();!r.done;r=i.next()){var o=Kb(r.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var p=this.getOrInitializeService({instanceIdentifier:u});a.resolve(p)}catch(c){}}}catch(h){e={error:h}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=pd),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Cw(this,void 0,void 0,function(){var t;return Dw(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(od(od([],Kb(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Kb(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2];}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=pd),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,r=void 0===i?pd:i,o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(r);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var p=Nb(this.instancesDeferred.entries()),c=p.next();!c.done;c=p.next()){var h=Kb(c.value,2),$=h[0],d=h[1];a===this.normalizeInstanceIdentifier($)&&d.resolve(u)}}catch(l){e={error:l}}finally{try{c&&!c.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}return u},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,i=void 0===n?{}:n,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xw(e),options:i}),this.instances.set(e,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(o){}return r||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:pd:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function Xw(t){return t===pd?void 0:t}function Yw(t){return"EAGER"===t.instantiationMode}var Bm=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Am(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();var Zw,Gg;function Vb(){for(var e=0,r=0,o=arguments.length;r<o;r++)e+=arguments[r].length;var t=Array(e),$=0;for(r=0;r<o;r++)for(var p=arguments[r],l=0,n=p.length;l<n;l++,$++)t[$]=p[l];return t}var pb,Ak=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pb||(Zw=pb={},Zw));var Cm={debug:pb.DEBUG,verbose:pb.VERBOSE,info:pb.INFO,warn:pb.WARN,error:pb.ERROR,silent:pb.SILENT},$w=pb.INFO,_w=((Gg={})[pb.DEBUG]="log",Gg[pb.VERBOSE]="log",Gg[pb.INFO]="info",Gg[pb.WARN]="warn",Gg[pb.ERROR]="error",Gg),ax=function(e,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];if(!(r<e.logLevel)){var $=new Date().toISOString(),p=_w[r];if(!p)throw new Error("Attempted to log a message with an invalid logType (value: "+r+")");console[p].apply(console,Vb(["["+$+"]  "+e.name+":"],o))}},Dm=function(){function e(e){this.name=e,this._logLevel=$w,this._logHandler=ax,this._userLogHandler=null,Ak.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in pb))throw new TypeError("Invalid value \""+e+"\" assigned to `logLevel`");this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?Cm[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Vb([this,pb.DEBUG],e)),this._logHandler.apply(this,Vb([this,pb.DEBUG],e))},e.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Vb([this,pb.VERBOSE],e)),this._logHandler.apply(this,Vb([this,pb.VERBOSE],e))},e.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Vb([this,pb.INFO],e)),this._logHandler.apply(this,Vb([this,pb.INFO],e))},e.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Vb([this,pb.WARN],e)),this._logHandler.apply(this,Vb([this,pb.WARN],e))},e.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Vb([this,pb.ERROR],e)),this._logHandler.apply(this,Vb([this,pb.ERROR],e))},e}();function bx(e){Ak.forEach(function(r){r.setLogLevel(e)})}function cx(e,r){for(var o=function(o){var t=null;r&&r.level&&(t=Cm[r.level]),o.userLogHandler=null===e?null:function(r,o){for(var $=[],p=2;p<arguments.length;p++)$[p-2]=arguments[p];var l=$.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(r){return null}}).filter(function(e){return e}).join(" ");o>=(null!=t?t:r.logLevel)&&e({level:pb[o].toLowerCase(),message:l,args:$,type:r.name})}},t=0,$=Ak;t<$.length;t++){o($[t])}}var Em,dx=((cg={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",cg["bad-app-name"]="Illegal App name: '{$appName}",cg["duplicate-app"]="Firebase App named '{$appName}' already exists",cg["app-deleted"]="Firebase App named '{$appName}' already deleted",cg["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",cg["invalid-log-argument"]="First argument to `onLog` must be null or a function.",cg),eg=new xk("app","Firebase",dx),Fm="@firebase/app",ex="0.6.20",pj="[DEFAULT]",fx=((Em={})[Fm]="fire-core",Em["fire-js"]="fire-js",Em),fg=new Dm("@firebase/app"),qj=function(){function e(e,r,a){var n=this;this.firebase_=a,this.isDeleted_=!1,this.name_=r.name,this.automaticDataCollectionEnabled_=r.automaticDataCollectionEnabled||!1,this.options_=wm(e),this.container=new Bm(r.name),this._addComponent(new Fg("app",function(){return n},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return n._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(r){e.checkDestroyed_(),r()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,r){return void 0===r&&(r=pj),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:r})},e.prototype._removeServiceInstance=function(e,r){void 0===r&&(r=pj),this.container.getProvider(e).clearInstance(r)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(r){fg.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,r)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw eg.create("app-deleted",{appName:this.name_})},e}();qj.prototype.name&&qj.prototype.options||qj.prototype.delete||console.log("dc");var gx="8.4.0";function hx(e){var r={},a=new Map,n={__esModule:!0,initializeApp:function(a,t){void 0===t&&(t={});if("object"!=typeof t||null===t){var $=t;t={name:$}}var i=t;void 0===i.name&&(i.name=pj);var o=i.name;if("string"!=typeof o||!o)throw eg.create("bad-app-name",{appName:String(o)});if(Hb(r,o))throw eg.create("duplicate-app",{appName:o});var s=new e(a,i,n);return r[o]=s,s},app:t,registerVersion:function(e,r,a){var n,t=null!==(n=fx[e])&&void 0!==n?n:e;a&&(t+="-"+a);var i=t.match(/\s|\//),o=r.match(/\s|\//);if(i||o){var s=["Unable to register library \""+t+"\" with version \""+r+"\":"];return i&&s.push("library name \""+t+"\" contains illegal characters (whitespace or \"/\")"),i&&o&&s.push("and"),o&&s.push("version name \""+r+"\" contains illegal characters (whitespace or \"/\")"),void fg.warn(s.join(" "))}$(new Fg(t+"-version",function(){return{library:t,version:r}},"VERSION"))},setLogLevel:bx,onLog:function(e,r){if(null!==e&&"function"!=typeof e)throw eg.create("invalid-log-argument");cx(e,r)},apps:null,SDK_VERSION:gx,INTERNAL:{registerComponent:$,removeApp:function(e){delete r[e]},components:a,useAsService:function(e,r){if("serverAuth"===r)return null;return r}}};function t(e){if(e=e||pj,!Hb(r,e))throw eg.create("no-app",{appName:e});return r[e]}function $($){var i=$.name;if(a.has(i))return fg.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===$.type?n[i]:null;if(a.set(i,$),"PUBLIC"===$.type){var o=function(e){if(void 0===e&&(e=t()),"function"!=typeof e[i])throw eg.create("invalid-app-argument",{appName:i});return e[i]()};void 0!==$.serviceProps&&Dg(o,$.serviceProps),n[i]=o,e.prototype[i]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._getService.bind(this,i).apply(this,$.multipleInstances?e:[])}}for(var s=0,p=Object.keys(r);s<p.length;s++){var c=p[s];r[c]._addComponent($)}return"PUBLIC"===$.type?n[i]:null}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(r).map(function(e){return r[e]})}}),t.App=e,n}function Gm(){var e=hx(qj);return e.INTERNAL=Dd(Dd({},e.INTERNAL),{createFirebaseNamespace:Gm,extendNamespace:function(r){Dg(e,r)},createSubscribe:Tw,ErrorFactory:xk,deepExtend:Dg}),e}var Bk=Gm(),ix=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(jx(e)){var r=e.getImmediate();return r.library+"/"+r.version}return null}).filter(function(e){return e}).join(" ")},e}();function jx(e){var r=e.getComponent();return"VERSION"===(null==r?void 0:r.type)}function kx(e,r){e.INTERNAL.registerComponent(new Fg("platform-logger",function(e){return new ix(e)},"PRIVATE")),e.registerVersion(Fm,ex,r),e.registerVersion("fire-js","")}if(Jw()&&void 0!==self.firebase){fg.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Hm=self.firebase.SDK_VERSION;Hm&&Hm.indexOf("LITE")>=0&&fg.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var lx=Bk.initializeApp;Bk.initializeApp=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Iw()&&fg.warn("\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the \"main\" field in package.json.\n      \n      If you are using Webpack, you can specify \"main\" as the first item in\n      \"resolve.mainFields\":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify \"main\"\n      as the first item in \"mainFields\", e.g. ['main', 'module'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      "),lx.apply(void 0,e)};var db=Bk;kx(db);var mx="firebase",nx="8.4.1";db.registerVersion(mx,nx,"app");var gg,hg,Fd,wb,Hg,Gd,Ck,Im,ox=false;function Dk(){throw new Error("setTimeout has not been defined")}function Ek(){throw new Error("clearTimeout has not been defined")}function Jm($){if(gg===setTimeout)return setTimeout($,0);if((gg===Dk||!gg)&&setTimeout)return gg=setTimeout,setTimeout($,0);try{return gg($,0)}catch(e){try{return gg.call(null,$,0)}catch(e){return gg.call(this,$,0)}}}function px($){if(hg===clearTimeout)return clearTimeout($);if((hg===Ek||!hg)&&clearTimeout)return hg=clearTimeout,clearTimeout($);try{return hg($)}catch(e){try{return hg.call(null,$)}catch(e){return hg.call(this,$)}}}function qx(){Ck&&Hg&&(Ck=!1,Hg.length?Gd=Hg.concat(Gd):Im=-1,Gd.length&&Km())}function Km(){if(!Ck){var $=Jm(qx);Ck=!0;for(var e=Gd.length;e;){for(Hg=Gd,Gd=[];++Im<e;)Hg&&Hg[Im].run();Im=-1,e=Gd.length}Hg=null,Ck=!1,px($)}}function Lm($,e){this.fun=$,this.array=e}function hd(){}function Hd(){if(ox)return;ox=true;Fd={};wb=Fd={};!function(){try{gg="function"==typeof setTimeout?setTimeout:Dk}catch($){gg=Dk}try{hg="function"==typeof clearTimeout?clearTimeout:Ek}catch($){hg=Ek}}();Gd=[];Ck=!1;Im=-1;wb.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Gd.push(new Lm($,e)),1!==Gd.length||Ck||Jm(Km)},Lm.prototype.run=function(){this.fun.apply(null,this.array)},wb.title="browser",wb.env={},wb.argv=[],wb.version="",wb.versions={},wb.on=hd,wb.addListener=hd,wb.once=hd,wb.off=hd,wb.removeListener=hd,wb.removeAllListeners=hd,wb.emit=hd,wb.prependListener=hd,wb.prependOnceListener=hd,wb.listeners=function($){return[]},wb.binding=function($){throw new Error("process.binding is not supported")},wb.cwd=function(){return"/"},wb.chdir=function($){throw new Error("process.chdir is not supported")},wb.umask=function(){return 0}}var rj=require("process");var rx="@firebase/database",sx="0.9.10",tx=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yb(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Eg(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),ux=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Hb(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),Mm=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tx(t)}}catch(r){}return new ux},Id=Mm("localStorage"),Fk=Mm("sessionStorage"),ig=new Dm("@firebase/database"),Nm=function(){var e=1;return function(){return e++}}(),Om=function(e){var t=Ww(e),r=new Sw;r.update(t);var n=r.digest();return wk.encodeByteArray(n)},Ig=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",n=0;n<e.length;n++){var a=e[n];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=Ig.apply(null,a):r+="object"==typeof a?yb(a):a,r+=" "}return r},sj=null,vx=!0,Pm=function(e,t){bb(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ig.logLevel=pb.VERBOSE,sj=ig.log.bind(ig),t&&Fk.set("logging_enabled",!0)):"function"==typeof e?sj=e:(sj=null,Fk.remove("logging_enabled"))},Cb=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===vx&&(vx=!1,null===sj&&!0===Fk.get("logging_enabled")&&Pm(!0)),sj){var r=Ig.apply(null,e);sj(r)}},Jg=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];Cb.apply(void 0,od([e],Kb(t)))}},Gk=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="FIREBASE INTERNAL ERROR: "+Ig.apply(void 0,od([],Kb(e)));ig.error(r)},id=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="FIREBASE FATAL ERROR: "+Ig.apply(void 0,od([],Kb(e)));throw ig.error(r),new Error(r)},Db=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="FIREBASE WARNING: "+Ig.apply(void 0,od([],Kb(e)));ig.warn(r)},wx=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Db("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tj=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},xx=function(e){if($b()||"complete"===document.readyState)e();else{var t=!1,r=function(){document.body?t||(t=!0,e()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}},jd="[MIN_NAME]",_b="[MAX_NAME]",Jd=function(e,t){if(e===t)return 0;if(e===jd||t===_b)return-1;if(t===jd||e===_b)return 1;var r=uj(e),n=uj(t);return null!==r?null!==n?r-n==0?e.length-t.length:r-n:-1:null!==n?1:e<t?-1:1},yx=function(e,t){return e===t?0:e<t?-1:1},Kg=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+yb(t))},Hk=function(e){if("object"!=typeof e||null===e)return yb(e);var t=[];for(var r in e)t.push(r);t.sort();for(var n="{",a=0;a<t.length;a++)0!==a&&(n+=","),n+=yb(t[a]),n+=":",n+=Hk(e[t[a]]);return n+="}"},Qm=function(e,t){var r=e.length;if(r<=t)return[e];for(var n=[],a=0;a<r;a+=t)a+t>r?n.push(e.substring(a,r)):n.push(e.substring(a,a+t));return n};function zb(e,t){for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}var Rm=function(e){bb(!tj(e),"Invalid JSON number");var t,r,n,a,o;0===e?(r=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=(a=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,n=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(r=0,n=Math.round(e/Math.pow(2,-1074))));var i=[];for(o=52;o;o-=1)i.push(n%2?1:0),n=Math.floor(n/2);for(o=11;o;o-=1)i.push(r%2?1:0),r=Math.floor(r/2);i.push(t?1:0),i.reverse();var $=i.join(""),s="";for(o=0;o<64;o+=8){var l=parseInt($.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),s+=l}return s.toLowerCase()},zx=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},Ax=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI};function Bx(e,t){var r="Unknown Error";"too_big"===e?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?r="Client doesn't have permission to access the desired data.":"unavailable"===e&&(r="The service is unavailable");var n=new Error(e+" at "+t._path.toString()+": "+r);return n.code=e.toUpperCase(),n}var Cx=new RegExp("^-?(0*)\\d{1,10}$"),Sm=-2147483648,Ik=2147483647,uj=function(e){if(Cx.test(e)){var t=Number(e);if(t>=Sm&&t<=Ik)return t}return null},jg=function(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";throw Db("Exception was thrown by user callback.",e),t},Math.floor(0))}},Dx=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lg=function(e,t){var r=setTimeout(e,t);return"object"==typeof r&&r.unref&&r.unref(),r},Ex=function(){function e(e,t,r){var n=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.get().then(function(e){return n.auth_=e})}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(Cb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){var e="Provided authentication credentials for the app named \""+this.appName_+"\" are invalid. This usually indicates your app was not initialized correctly. ";"credential"in this.firebaseOptions_?e+="Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":"serviceAccount"in this.firebaseOptions_?e+="Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.":e+="Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.",Db(e)},e}(),Tm=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),Um="5",Vm="f",Wm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xm="websocket",Ym="long_polling",Jk=function(){function e(e,t,r,n,a,o,i){void 0===a&&(a=!1),void 0===o&&(o=""),void 0===i&&(i=!1),this.secure=t,this.namespace=r,this.webSocketOnly=n,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=i,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Id.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Id.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function Fx(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Zm(e,t,r){var n;if(bb("string"==typeof t,"typeof type must == string"),bb("object"==typeof r,"typeof params must == object"),t===Xm)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ym)throw new Error("Unknown connection type: "+t);n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}Fx(e)&&(r.ns=e.namespace);var a=[];return zb(r,function(e,t){a.push(e+"="+t)}),n+a.join("&")}var Gx=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Hb(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return wm(this.counters_)},e}(),Kk={},Lk={};function Mk(e){var t=e.toString();return Kk[t]||(Kk[t]=new Gx),Kk[t]}function Hx(e,t){var r=e.toString();return Lk[r]||(Lk[r]=t()),Lk[r]}var Ix=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var r=this;this.pendingResponses[e]=t;for(var n=function(){var e=a.pendingResponses[a.currentResponseNum];delete a.pendingResponses[a.currentResponseNum];for(var t=function(t){e[t]&&jg(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(a.currentResponseNum===a.closeAfterResponse)return a.onClose&&(a.onClose(),a.onClose=null),"break";a.currentResponseNum++},a=this;this.pendingResponses[this.currentResponseNum];){if("break"===n())break}},e}(),$m="start",Jx="close",Kx="pLPCommand",Lx="pRTLPCB",Mx="seg",Nx="ts",Ox="d",_m=1870,ap=30,Px=_m-ap,Qx=25e3,Rx=3e4,Nk=function(){function e(e,t,r,n,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.transportSessionId=n,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jg(e),this.stats_=Mk(t),this.urlFn=function(e){return Zm(t,Ym,e)}}return e.prototype.open=function(e,t){var r=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ix(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(Rx)),xx(function(){if(!r.isClosed_){r.scriptTagHolder=new Sx(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Kb(e,5),a=n[0],o=n[1],i=n[2];n[3],n[4];if(r.incrementIncomingBytes_(e),r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,a===$m)r.id=o,r.password=i;else{if(a!==Jx)throw new Error("Unrecognized command received: "+a);o?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(o,function(){r.onClosed_()})):r.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Kb(e,2),a=n[0],o=n[1];r.incrementIncomingBytes_(e),r.myPacketOrderer.handleResponse(a,o)},function(){r.onClosed_()},r.urlFn);var e={};e[$m]="t",r.scriptTagHolder.uniqueCallbackIdentifier&&r.scriptTagHolder.uniqueCallbackIdentifier,r.transportSessionId&&r.transportSessionId,r.lastSessionId&&r.lastSessionId,r.applicationId&&r.applicationId,"undefined"!=typeof location&&location.hostname&&Wm.test(location.hostname)&&Vm;var t=r.urlFn(e);r.log_("Connecting via long-poll to "+t),r.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!$b()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!zx()&&!Ax())},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=yb(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var r=Fw(t),n=Qm(r,Px),a=0;a<n.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[a]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!$b()){this.myDisconnFrame=document.createElement("iframe");var r={};this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=yb(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Sx=function(){function e(t,r,n,a){if(this.onDisconnect=n,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,$b())this.commandCB=t,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=Nm(),window[Kx+this.uniqueCallbackIdentifier]=t,window[Lx+this.uniqueCallbackIdentifier]=r,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o="<script>document.domain=\""+document.domain+"\";</script>";var i="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch($){Cb("frame writing exception"),$.stack&&Cb($.stack),Cb($)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cb("No IE domain setting required")}catch(r){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};for(var t=this.urlFn(e),r="",n=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+ap+r.length<=_m))break;var a=this.pendingSegs.shift();r=r+"&"+Mx+n+"="+a.seg+"&"+Nx+n+"="+a.ts+"&"+Ox+n+"="+a.d,n++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var r=this;this.outstandingRequests.add(t);var n=function(){r.outstandingRequests.delete(t),r.newRequest_()},a=setTimeout(n,Math.floor(Qx));this.addTag(e,function(){clearTimeout(a),n()})},e.prototype.addTag=function(e,t){var r=this;$b()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!r.sendNewPolls)return;var n=r.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){var e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=function(){Cb("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(n)}catch(a){}},Math.floor(1))},e}(),bp="";function cp(e){bp=e}var Tx=16384,Ux=45e3,Ok=null;"undefined"!=typeof MozWebSocket?Ok=MozWebSocket:"undefined"!=typeof WebSocket&&(Ok=WebSocket);var Kd=function(){function e(t,r,n,a,o){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jg(this.connId),this.stats_=Mk(r),this.connURL=e.connectionURL_(r,a,o),this.nodeAdmin=r.nodeAdmin}return e.connectionURL_=function(e,t,r){var n={};return!$b()&&"undefined"!=typeof location&&location.hostname&&Wm.test(location.hostname)&&Vm,t&&t,r&&r,Zm(e,Xm,n)},e.prototype.open=function(e,t){var r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Id.set("previous_websocket_failure",!0);try{if($b()){var n=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+Um+"/"+bp+"/"+rj.platform+"/"+n,"X-Firebase-GMPID":this.applicationId||""}},o=rj.env,i=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;i&&(a.proxy={origin:i}),this.mySock=new Ok(this.connURL,[],a)}else{a={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Ok(this.connURL,[],a)}}catch(s){this.log_("Error instantiating WebSocket.");var $=s.message||s.data;return $&&this.log_($),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Ok&&!e.forceDisallow_},e.previouslyFailed=function(){return Id.isInMemoryStorage||!0===Id.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){Id.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var r=Eg(t);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(bb(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var r=this.extractFrameCount_(t);null!==r&&this.appendFrame_(r)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=yb(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var r=Qm(t,Tx);r.length>1&&this.sendString_(String(r.length));for(var n=0;n<r.length;n++)this.sendString_(r[n])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(Ux))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Vx=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Nk,Kd]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var r,n,a=Kd&&Kd.isAvailable(),o=a&&!Kd.previouslyFailed();if(t.webSocketOnly&&(a||Db("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Kd];else{var i=this.transports_=[];try{for(var $=Nb(e.ALL_TRANSPORTS),s=$.next();!s.done;s=$.next()){var l=s.value;l&&l.isAvailable()&&i.push(l)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=$.return)&&n.call($)}finally{if(r)throw r.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Wx=6e4,Xx=5e3,Yx=10240,Zx=102400,Pk="t",dp="d",$x="s",ep="r",_x="e",fp="o",gp="a",hp="n",ip="p",ay="h",jp=function(){function e(e,t,r,n,a,o,i,$){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.onMessage_=n,this.onReady_=a,this.onDisconnect_=o,this.onKill_=i,this.lastSessionId=$,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jg("c:"+this.id+":"),this.transportManager_=new Vx(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(r,n)},Math.floor(0));var a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Lg(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>Zx?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>Yx?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(a)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(r){e===t.conn_?t.onConnectionLost_(r):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(r){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(r):e===t.secondaryConn_?t.onSecondaryMessageReceived_(r):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(Pk in e){var t=e[Pk];t===gp?this.upgradeIfSecondaryHealthy_():t===ep?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===fp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=Kg("t",e),r=Kg("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ip,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=Kg("t",e),r=Kg("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=Kg(Pk,e);if(dp in e){var r=e[dp];if(t===ay)this.onHandshake_(r);else if(t===hp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===$x?this.onConnectionShutdown_(r):t===ep?this.onReset_(r):t===_x?Gk("Server Error: "+r):t===fp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gk("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,r=e.v,n=e.h;this.sessionId=e.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Um!==r&&Db("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),Lg(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(Wx))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var r=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lg(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(Xx))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ip,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Id.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),kp=function(){function e(){}return e.prototype.put=function(e,t,r,n){},e.prototype.merge=function(e,t,r,n){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,r){},e.prototype.onDisconnectMerge=function(e,t,r){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),lp=function(){function e(e){this.allowedEvents_=e,this.listeners_={},bb(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Array.isArray(this.listeners_[e]))for(var n=od([],Kb(this.listeners_[e])),a=0;a<n.length;a++)n[a].callback.apply(n[a].context,t)},e.prototype.on=function(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});var n=this.getInitialEvent(e);n&&t.apply(r,n)},e.prototype.off=function(e,t,r){this.validateEventType_(e);for(var n=this.listeners_[e]||[],a=0;a<n.length;a++)if(n[a].callback===t&&(!r||r===n[a].context))return void n.splice(a,1)},e.prototype.validateEventType_=function(e){bb(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),mp=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||xm()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return tb(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return bb("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(lp),np=32,op=768,mb=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var r=0,n=0;n<this.pieces_.length;n++)this.pieces_[n].length>0&&(this.pieces_[r]=this.pieces_[n],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function lb(){return new mb("")}function fb(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function qd(e){return e.pieces_.length-e.pieceNum_}function ob(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mb(e.pieces_,t)}function Qk(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function by(e){for(var t="",r=e.pieceNum_;r<e.pieces_.length;r++)""!==e.pieces_[r]&&(t+="/"+encodeURIComponent(String(e.pieces_[r])));return t||"/"}function Mg(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function pp(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],r=e.pieceNum_;r<e.pieces_.length-1;r++)t.push(e.pieces_[r]);return new mb(t,0)}function sb(e,t){for(var r=[],n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);if(t instanceof mb)for(n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);else{var a=t.split("/");for(n=0;n<a.length;n++)a[n].length>0&&r.push(a[n])}return new mb(r,0)}function gb(e){return e.pieceNum_>=e.pieces_.length}function Eb(e,t){var r=fb(e),n=fb(t);if(null===r)return t;if(r===n)return Eb(ob(e),ob(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function cy(e,t){for(var r=Mg(e,0),n=Mg(t,0),a=0;a<r.length&&a<n.length;a++){var o=Jd(r[a],n[a]);if(0!==o)return o}return r.length===n.length?0:r.length<n.length?-1:1}function Rk(e,t){if(qd(e)!==qd(t))return!1;for(var r=e.pieceNum_,n=t.pieceNum_;r<=e.pieces_.length;r++,n++)if(e.pieces_[r]!==t.pieces_[n])return!1;return!0}function Ob(e,t){var r=e.pieceNum_,n=t.pieceNum_;if(qd(e)>qd(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}var dy=function(){return function(e,t){this.errorPrefix_=t,this.parts_=Mg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=oj(this.parts_[r]);qp(this)}}();function ey(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=oj(t),qp(e)}function fy(e){var t=e.parts_.pop();e.byteLength_-=oj(t),e.parts_.length>0&&(e.byteLength_-=1)}function qp(e){if(e.byteLength_>op)throw new Error(e.errorPrefix_+"has a key path longer than "+op+" bytes ("+e.byteLength_+").");if(e.parts_.length>np)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+np+") or object contains a cycle "+Ld(e))}function Ld(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Sk,rp,gy=function(e){function t(){var t,r,n=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",t="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,r&&document.addEventListener(r,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}return tb(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return bb("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(lp),Ng=1e3,hy=3e5,iy=3e3,sp=3e4,jy=1.3,ky=3e4,ly="server_kill",my=3,Md=function(e){function t(r,n,a,o,i,$,s){var l=e.call(this)||this;if(l.repoInfo_=r,l.applicationId_=n,l.onDataUpdate_=a,l.onConnectStatus_=o,l.onServerInfoUpdate_=i,l.authTokenProvider_=$,l.authOverride_=s,l.id=t.nextPersistentConnectionId_++,l.log_=Jg("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ng,l.maxReconnectDelay_=hy,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,s&&!$b())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),gy.getInstance().on("visible",l.onVisible_,l),-1===r.host.indexOf("fblocal")&&mp.getInstance().on("online",l.onOnline_,l),l}return tb(t,e),t.prototype.sendRequest=function(e,t,r){var n=++this.requestNumber_,a={r:n,a:e,b:t};this.log_(yb(a)),bb(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[n]=r)},t.prototype.get=function(e){var t=this,r=new Gb,n={p:e._path.toString(),q:e._queryObject},a={action:"g",request:n,onComplete:function(e){var a=e.d;"ok"===e.s?(t.onDataUpdate_(n.p,a,!1,null),r.resolve(a)):r.reject(a)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var e=t.outstandingGets_[o];void 0!==e&&a===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},iy),this.connected_&&this.sendGet_(o),r.promise},t.prototype.listen=function(e,t,r,n){var a=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),bb(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),bb(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");var i={onComplete:n,hashFn:t,query:e,tag:r};this.listens.get(o).set(a,i),this.connected_&&this.sendListen_(i)},t.prototype.sendGet_=function(e){var t=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(n){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})},t.prototype.sendListen_=function(e){var r=this,n=e.query,a=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+a+" for "+o);var i={p:a};e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,function(i){var $=i.d,s=i.s;t.warnOnListenWarnings_($,n),(r.listens.get(a)&&r.listens.get(a).get(o))===e&&(r.log_("listen response",i),"ok"!==s&&r.removeListen_(a,o),e.onComplete&&e.onComplete(s,$))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&Hb(e,"w")){var r=Ed(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){var n="\".indexOn\": \""+t._queryParams.getIndex().toString()+"\"",a=t._path.toString();Db("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+n+" at "+a+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||Qw(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sp)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,r=Pw(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(r,n,function(r){var n=r.s,a=r.d||"error";e.authToken_===t&&("ok"===n?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(n,a))})}},t.prototype.unlisten=function(e,t){var r=e._path.toString(),n=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+n),bb(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,n)&&this.connected_&&this.sendUnlisten_(r,n,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,r,n){this.log_("Unlisten on "+e+" for "+t);var a={p:e};n&&(a.q=r,a.t=n),this.sendRequest("n",a)},t.prototype.onDisconnectPut=function(e,t,r){this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})},t.prototype.onDisconnectMerge=function(e,t,r){this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,r,n){var a={p:t,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,function(e){n&&setTimeout(function(){n(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,r,n){this.putInternal("p",e,t,r,n)},t.prototype.merge=function(e,t,r,n){this.putInternal("m",e,t,r,n)},t.prototype.putInternal=function(e,t,r,n,a){var o={p:t,d:r};void 0!==a&&(o.h=a),this.outstandingPuts_.push({action:e,request:o,onComplete:n}),this.outstandingPutCount_++;var i=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(i):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,function(n){t.log_(r+" response",n),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),a&&a(n.s,n.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,function(e){if("ok"!==e.s){var r=e.d;t.log_("reportStats","Error sending stats: "+r)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+yb(e));var t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Gk("Unrecognized action received from server: "+yb(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;bb(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ng,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ng,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){new Date().getTime()-this.lastConnectionEstablishedTime_>ky&&(this.reconnectDelay_=Ng),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();var e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jy)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var r=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,i=this,$=this.lastSessionId,s=!1,l=null,u=function(){l?l.close():(s=!0,a())};this.realtime_={close:u,sendRequest:function(e){bb(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then(function(e){s?Cb("getToken() completed but was canceled"):(Cb("getToken() completed. Creating connection."),i.authToken_=e&&e.accessToken,l=new jp(o,i.repoInfo_,i.applicationId_,r,n,a,function(e){Db(e+" ("+i.repoInfo_.toString()+")"),i.interrupt(ly)},$))}).then(null,function(t){i.log_("Failed to get token: "+t),s||(e.repoInfo_.nodeAdmin&&Db(t),u())})}},t.prototype.interrupt=function(e){Cb("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){Cb("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yk(this.interruptReasons_)&&(this.reconnectDelay_=Ng,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var r;r=t?t.map(function(e){return Hk(e)}).join("$"):"default";var n=this.removeListen_(e,r);n&&n.onComplete&&n.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var r,n=new mb(e).toString();if(this.listens.has(n)){var a=this.listens.get(n);r=a.get(t),a.delete(t),0===a.size&&this.listens.delete(n)}else r=void 0;return r},t.prototype.onAuthRevoked_=function(e,t){Cb("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=my&&(this.reconnectDelay_=sp,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,r,n;this.tryAuth();try{for(var a=Nb(this.listens.values()),o=a.next();!o.done;o=a.next()){var i=o.value;try{for(var $=(r=void 0,Nb(i.values())),s=$.next();!s.done;s=$.next()){var l=s.value;this.sendListen_(l)}}catch(v){r={error:v}}finally{try{s&&!s.done&&(n=$.return)&&n.call($)}finally{if(r)throw r.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}for(var u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){var c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)},t.prototype.sendConnectStats_=function(){var e={},t="js";$b()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+bp.replace(/\./g,"-")]=1,xm()?e["framework.cordova"]=1:Kw()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=mp.getInstance().currentlyOnline();return yk(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(kp),hb=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,r){return new e(t,r)},e}(),vj=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var r=new hb(jd,e),n=new hb(jd,t);return 0!==this.compare(r,n)},e.prototype.minPost=function(){return hb.MIN},e}(),tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Sk},set:function(e){Sk=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return Jd(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw dg("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return hb.MIN},t.prototype.maxPost=function(){return new hb(_b,Sk)},t.prototype.makePost=function(e,t){return bb("string"==typeof e,"KeyIndex indexValue must always be a string."),new hb(e,Sk)},t.prototype.toString=function(){return".key"},t}(vj),ad=new tp,wj=function(){function e(e,t,r,n,a){void 0===a&&(a=null),this.isReverse_=n,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,n&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Wb=function(){function e(t,r,n,a,o){this.key=t,this.value=r,this.color=null!=n?n:e.RED,this.left=null!=a?a:kd.EMPTY_NODE,this.right=null!=o?o:kd.EMPTY_NODE}return e.prototype.copy=function(t,r,n,a,o){return new e(null!=t?t:this.key,null!=r?r:this.value,null!=n?n:this.color,null!=a?a:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,r){var n=this,a=r(e,n.key);return(n=a<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===a?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return kd.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var r,n;if(t(e,(r=this).key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===t(e,r.key)){if(r.right.isEmpty())return kd.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),ny=function(){function e(){}return e.prototype.copy=function(e,t,r,n,a){return this},e.prototype.insert=function(e,t,r){return new Wb(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),kd=function(){function e(t,r){void 0===r&&(r=e.EMPTY_NODE),this.comparator_=t,this.root_=r}return e.prototype.insert=function(t,r){return new e(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,Wb.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Wb.BLACK,null,null))},e.prototype.get=function(e){for(var t,r=this.root_;!r.isEmpty();){if(0===(t=this.comparator_(e,r.key)))return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,r=this.root_,n=null;!r.isEmpty();){if(0===(t=this.comparator_(e,r.key))){if(r.left.isEmpty())return n?n.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(n=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new wj(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new wj(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new wj(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new wj(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new ny,e}();function oy(e,t){return Jd(e.name,t.name)}function Tk(e,t){return Jd(e,t)}function py(e){rp=e}var qy,ry,sy,up=function(e){return"number"==typeof e?"number:"+Rm(e):"string:"+e},vp=function(e){if(e.isLeafNode()){var t=e.val();bb("string"==typeof t||"number"==typeof t||"object"==typeof t&&Hb(t,".sv"),"Priority must be a string or number.")}else bb(e===rp||e.isEmpty(),"priority of unexpected type.");bb(e===rp||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kg=function(){function e(t,r){void 0===r&&(r=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=r,this.lazyHash_=null,bb(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),vp(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return qy},set:function(e){qy=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return gb(t)?this:".priority"===fb(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,r){var n=fb(t);return null===n?r:r.isEmpty()&&".priority"!==n?this:(bb(".priority"!==n||1===qd(t),".priority must be the last token in a path"),this.updateImmediateChild(n,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ob(t),r)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+up(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Rm(this.value_):this.value_,this.lazyHash_=Om(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(bb(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var r=typeof t.value_,n=typeof this.value_,a=e.VALUE_TYPE_ORDER.indexOf(r),o=e.VALUE_TYPE_ORDER.indexOf(n);return bb(a>=0,"Unknown leaf type: "+r),bb(o>=0,"Unknown leaf type: "+n),a===o?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-a},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();function ty(e){ry=e}function uy(e){sy=e}var vy,xj,wy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),t.prototype.compare=function(e,t){var r=e.node.getPriority(),n=t.node.getPriority(),a=r.compareTo(n);return 0===a?Jd(e.name,t.name):a},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return hb.MIN},t.prototype.maxPost=function(){return new hb(_b,new kg("[PRIORITY-POST]",sy))},t.prototype.makePost=function(e,t){var r=ry(e);return new hb(t,new kg("[PRIORITY-POST]",r))},t.prototype.toString=function(){return".priority"},t}(vj),qb=new wy,xy=Math.log(2),yy=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/xy,10)),this.current_=this.count-1;var r,n=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=e+1&n}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),yj=function(e,t,r,n){e.sort(t);var a=function(t,n){var o,i,$=n-t;if(0===$)return null;if(1===$)return o=e[t],i=r?r(o):o,new Wb(i,o.node,Wb.BLACK,null,null);var s=parseInt($/2,10)+t,l=a(t,s),u=a(s+1,n);return o=e[s],i=r?r(o):o,new Wb(i,o.node,Wb.BLACK,l,u)},o=function(t){for(var n=null,o=null,i=e.length,$=function(t,n){var o=i-t,$=i;i-=t;var l=a(o+1,$),u=e[o],c=r?r(u):u;s(new Wb(c,u.node,n,null,l))},s=function(e){n?(n.left=e,n=e):(o=e,n=e)},l=0;l<t.count;++l){var u=t.nextBitIsOne(),c=Math.pow(2,t.count-(l+1));u?$(c,Wb.BLACK):($(c,Wb.BLACK),$(c,Wb.RED))}return o}(new yy(e.length));return new kd(n||t,o)},lg={},zj=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return bb(lg&&qb,"ChildrenNode.ts has not been loaded"),vy=vy||new e({".priority":lg},{".priority":qb})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=Ed(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof kd?t:null},e.prototype.hasIndex=function(e){return Hb(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,r){bb(t!==ad,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,a=[],o=!1,i=r.getIterator(hb.Wrap),$=i.getNext();$;)o=o||t.isDefinedOn($.node),a.push($),$=i.getNext();n=o?yj(a,t.getCompare()):lg;var s=t.toString(),l=Dd({},this.indexSet_);l[s]=t;var u=Dd({},this.indexes_);return u[s]=n,new e(u,l)},e.prototype.addToIndexes=function(t,r){var n=this;return new e(nj(this.indexes_,function(e,a){var o=Ed(n.indexSet_,a);if(bb(o,"Missing index implementation for "+a),e===lg){if(o.isDefinedOn(t.node)){for(var i=[],$=r.getIterator(hb.Wrap),s=$.getNext();s;)s.name!==t.name&&i.push(s),s=$.getNext();return i.push(t),yj(i,o.getCompare())}return lg}var l=r.get(t.name),u=e;return l&&(u=u.remove(new hb(t.name,l))),u.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,r){return new e(nj(this.indexes_,function(e){if(e===lg)return e;var n=r.get(t.name);return n?e.remove(new hb(t.name,n)):e}),this.indexSet_)},e}(),eb=function(){function e(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&vp(this.priorityNode_),this.children_.isEmpty()&&bb(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return xj||(xj=new e(new kd(Tk),null,zj.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||xj},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?xj:t},e.prototype.getChild=function(e){var t=fb(e);return null===t?this:this.getImmediateChild(t).getChild(ob(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,r){if(bb(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);var n=new hb(t,r),a=void 0,o=void 0;r.isEmpty()?(a=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(n,this.children_)):(a=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(n,this.children_));var i=a.isEmpty()?xj:this.priorityNode_;return new e(a,i,o)},e.prototype.updateChild=function(e,t){var r=fb(e);if(null===r)return t;bb(".priority"!==fb(e)||1===qd(e),".priority must be the last token in a path");var n=this.getImmediateChild(r).updateChild(ob(e),t);return this.updateImmediateChild(r,n)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var r={},n=0,a=0,o=!0;if(this.forEachChild(qb,function(i,$){r[i]=$.val(t),n++,o&&e.INTEGER_REGEXP_.test(i)?a=Math.max(a,Number(i)):o=!1}),!t&&o&&a<2*n){var i=[];for(var $ in r)i[$]=r[$];return i}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+up(this.getPriority().val())+":"),this.forEachChild(qb,function(t,r){var n=r.hash();""!==n&&(e+=":"+t+":"+n)}),this.lazyHash_=""===e?"":Om(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,r){var n=this.resolveIndex_(r);if(n){var a=n.getPredecessorKey(new hb(e,t));return a?a.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.minKey();return r&&r.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new hb(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.maxKey();return r&&r.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new hb(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,function(e){return e});for(var n=this.children_.getIteratorFrom(e.name,hb.Wrap),a=n.peek();null!=a&&t.compare(a,e)<0;)n.getNext(),a=n.peek();return n},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,function(e){return e});for(var n=this.children_.getReverseIteratorFrom(e.name,hb.Wrap),a=n.peek();null!=a&&t.compare(a,e)>0;)n.getNext(),a=n.peek();return n},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Og?-1:0},e.prototype.withIndex=function(t){if(t===ad||this.indexMap_.hasIndex(t))return this;var r=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,r)},e.prototype.isIndexed=function(e){return e===ad||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var r=this.getIterator(qb),n=t.getIterator(qb),a=r.getNext(),o=n.getNext();a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=n.getNext()}return null===a&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===ad?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),zy=function(e){function t(){return e.call(this,new kd(Tk),eb.EMPTY_NODE,zj.Default)||this}return tb(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return eb.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(eb),Og=new zy;Object.defineProperties(hb,{MIN:{value:new hb(jd,eb.EMPTY_NODE)},MAX:{value:new hb(_b,Og)}}),tp.__EMPTY_NODE=eb.EMPTY_NODE,kg.__childrenNodeConstructor=eb,py(Og),uy(Og);var Ay=!0;function ub(e,t){if(void 0===t&&(t=null),null===e)return eb.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),bb(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new kg(e,ub(t));if(e instanceof Array||!Ay){var r=eb.EMPTY_NODE;return zb(e,function(t,n){if(Hb(e,t)&&"."!==t.substring(0,1)){var a=ub(n);!a.isLeafNode()&&a.isEmpty()||(r=r.updateImmediateChild(t,a))}}),r.updatePriority(ub(t))}var n=[],a=!1;if(zb(e,function(e,t){if("."!==e.substring(0,1)){var r=ub(t);r.isEmpty()||(a=a||!r.getPriority().isEmpty(),n.push(new hb(e,r)))}}),0===n.length)return eb.EMPTY_NODE;var o=yj(n,oy,function(e){return e.name},Tk);if(a){var i=yj(n,qb.getCompare());return new eb(o,ub(t),new zj({".priority":i},{".priority":qb}))}return new eb(o,ub(t),zj.Default)}ty(ub);var Uk=function(e){function t(t){var r=e.call(this)||this;return r.indexPath_=t,bb(!gb(t)&&".priority"!==fb(t),"Can't create PathIndex with empty path or .priority key"),r}return tb(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var r=this.extractChild(e.node),n=this.extractChild(t.node),a=r.compareTo(n);return 0===a?Jd(e.name,t.name):a},t.prototype.makePost=function(e,t){var r=ub(e),n=eb.EMPTY_NODE.updateChild(this.indexPath_,r);return new hb(t,n)},t.prototype.maxPost=function(){var e=eb.EMPTY_NODE.updateChild(this.indexPath_,Og);return new hb(_b,e)},t.prototype.toString=function(){return Mg(this.indexPath_,0).join("/")},t}(vj),By=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),t.prototype.compare=function(e,t){var r=e.node.compareTo(t.node);return 0===r?Jd(e.name,t.name):r},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return hb.MIN},t.prototype.maxPost=function(){return hb.MAX},t.prototype.makePost=function(e,t){var r=ub(e);return new hb(t,r)},t.prototype.toString=function(){return".value"},t}(vj),Vk=new By,mg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wk="-",wp="z",xp=786,Cy=function(){var e=0,t=[];return function(r){var n,a=r===e;e=r;var o=new Array(8);for(n=7;n>=0;n--)o[n]=mg.charAt(r%64),r=Math.floor(r/64);bb(0===r,"Cannot push at time == 0");var i=o.join("");if(a){for(n=11;n>=0&&63===t[n];n--)t[n]=0;t[n]++}else for(n=0;n<12;n++)t[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)i+=mg.charAt(t[n]);return bb(20===i.length,"nextPushId: Length should be 20."),i}}(),yp=function(e){if(e===""+Ik)return Wk;var t=uj(e);if(null!=t)return""+(t+1);for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e.charAt(n);if(r.length<xp)return r.push(Wk),r.join("");for(var a=r.length-1;a>=0&&r[a]===wp;)a--;if(-1===a)return _b;var o=r[a],i=mg.charAt(mg.indexOf(o)+1);return r[a]=i,r.slice(0,a+1).join("")},zp=function(e){if(e===""+Sm)return jd;var t=uj(e);if(null!=t)return""+(t-1);for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e.charAt(n);return r[r.length-1]===Wk?1===r.length?""+Ik:(delete r[r.length-1],r.join("")):(r[r.length-1]=mg.charAt(mg.indexOf(r[r.length-1])-1),r.join("")+wp.repeat(xp-r.length))};function Ap(e){return{type:"value",snapshotNode:e}}function ng(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Pg(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Qg(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}function Dy(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Xk=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,r,n,a,o){bb(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var i=e.getImmediateChild(t);return i.getChild(n).equals(r.getChild(n))&&i.isEmpty()===r.isEmpty()?e:(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Pg(t,i)):bb(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):i.isEmpty()?o.trackChildChange(ng(t,r)):o.trackChildChange(Qg(t,r,i))),e.isLeafNode()&&r.isEmpty()?e:e.updateImmediateChild(t,r).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(qb,function(e,n){t.hasChild(e)||r.trackChildChange(Pg(e,n))}),t.isLeafNode()||t.forEachChild(qb,function(t,n){if(e.hasChild(t)){var a=e.getImmediateChild(t);a.equals(n)||r.trackChildChange(Qg(t,n,a))}else r.trackChildChange(ng(t,n))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?eb.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Bp=function(){function e(t){this.indexedFilter_=new Xk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,r,n,a,o){return this.matches(new hb(t,r))||(r=eb.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,n,a,o)},e.prototype.updateFullNode=function(e,t,r){t.isLeafNode()&&(t=eb.EMPTY_NODE);var n=t.withIndex(this.index_);n=n.updatePriority(eb.EMPTY_NODE);var a=this;return t.forEachChild(qb,function(e,t){a.matches(new hb(e,t))||(n=n.updateImmediateChild(e,eb.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,n,r)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Ey=function(){function e(e){this.rangedFilter_=new Bp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,r,n,a,o){return this.rangedFilter_.matches(new hb(t,r))||(r=eb.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,n,a,o):this.fullLimitUpdateChild_(e,t,r,a,o)},e.prototype.updateFullNode=function(e,t,r){var n;if(t.isLeafNode()||t.isEmpty())n=eb.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){n=eb.EMPTY_NODE.withIndex(this.index_);var a=void 0;a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;a.hasNext()&&o<this.limit_;){var i=a.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),i)<=0:this.index_.compare(i,this.rangedFilter_.getEndPost())<=0))break;n=n.updateImmediateChild(i.name,i.node),o++}}else{n=(n=t.withIndex(this.index_)).updatePriority(eb.EMPTY_NODE);var $=void 0,s=void 0,l=void 0;a=void 0;if(this.reverse_){a=n.getReverseIterator(this.index_),$=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var u=this.index_.getCompare();l=function(e,t){return u(t,e)}}else a=n.getIterator(this.index_),$=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var c=!1;a.hasNext();){i=a.getNext();!c&&l($,i)<=0&&(c=!0),c&&o<this.limit_&&l(i,s)<=0?o++:n=n.updateImmediateChild(i.name,eb.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,n,r)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,r,n,a){var o;if(this.reverse_){var i=this.index_.getCompare();o=function(e,t){return i(t,e)}}else o=this.index_.getCompare();var $=e;bb($.numChildren()===this.limit_,"");var s=new hb(t,r),l=this.reverse_?$.getFirstChild(this.index_):$.getLastChild(this.index_),u=this.rangedFilter_.matches(s);if($.hasChild(t)){for(var c=$.getImmediateChild(t),v=n.getChildAfterChild(this.index_,l,this.reverse_);null!=v&&(v.name===t||$.hasChild(v.name));)v=n.getChildAfterChild(this.index_,v,this.reverse_);var p=null==v?1:o(v,s);if(u&&!r.isEmpty()&&p>=0)return null!=a&&a.trackChildChange(Qg(t,r,c)),$.updateImmediateChild(t,r);null!=a&&a.trackChildChange(Pg(t,c));var h=$.updateImmediateChild(t,eb.EMPTY_NODE);return null!=v&&this.rangedFilter_.matches(v)?(null!=a&&a.trackChildChange(ng(v.name,v.node)),h.updateImmediateChild(v.name,v.node)):h}return r.isEmpty()?e:u&&o(l,s)>=0?(null!=a&&(a.trackChildChange(Pg(l.name,l.node)),a.trackChildChange(ng(t,r))),$.updateImmediateChild(t,r).updateImmediateChild(l.name,eb.EMPTY_NODE)):e},e}(),Cp=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qb}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return bb(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return bb(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jd},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return bb(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return bb(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_b},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return bb(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===qb},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function Fy(e){return e.loadsAllData()?new Xk(e.getIndex()):e.hasLimit()?new Ey(e):new Bp(e)}function Gy(e,t){var r=e.copy();return r.limitSet_=!0,r.limit_=t,r.viewFrom_="l",r}function Hy(e,t){var r=e.copy();return r.limitSet_=!0,r.limit_=t,r.viewFrom_="r",r}function Yk(e,t,r){var n=e.copy();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=r?(n.startNameSet_=!0,n.indexStartName_=r):(n.startNameSet_=!1,n.indexStartName_=""),n}function Iy(e,t,r){var n;if(e.index_===ad)"string"==typeof t&&(t=yp(t)),n=Yk(e,t,r);else{n=Yk(e,t,null==r?_b:yp(r))}return n.startAfterSet_=!0,n}function Zk(e,t,r){var n=e.copy();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==r?(n.endNameSet_=!0,n.indexEndName_=r):(n.endNameSet_=!1,n.indexEndName_=""),n}function Jy(e,t,r){var n;return e.index_===ad?("string"==typeof t&&(t=zp(t)),n=Zk(e,t,r)):n=Zk(e,t,null==r?jd:zp(r)),n.endBeforeSet_=!0,n}function Aj(e,t){var r=e.copy();return r.index_=t,r}function Dp(e){var t,r={};return e.isDefault()?r:(e.index_===qb?t="$priority":e.index_===Vk?t="$value":e.index_===ad?t="$key":(bb(e.index_ instanceof Uk,"Unrecognized index type!"),t=e.index_.toString()),r.orderBy=yb(t),e.startSet_&&(r.startAt=yb(e.indexStartValue_),e.startNameSet_&&(r.startAt+=","+yb(e.indexStartName_))),e.endSet_&&(r.endAt=yb(e.indexEndValue_),e.endNameSet_&&(r.endAt+=","+yb(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?r.limitToFirst=e.limit_:r.limitToLast=e.limit_),r)}function Ep(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var r=e.viewFrom_;""===r&&(r=e.isViewFromLeft()?"l":"r"),t.vf=r}return e.index_!==qb&&(t.i=e.index_.toString()),t}var Ky=function(e){function t(t,r,n){var a=e.call(this)||this;return a.repoInfo_=t,a.onDataUpdate_=r,a.authTokenProvider_=n,a.log_=Jg("p:rest:"),a.listens_={},a}return tb(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(bb(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,r,n,a){var o=this,i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);var $=t.getListenId_(e,n),s={};this.listens_[$]=s;var l=Dp(e._queryParams);this.restRequest_(i+".json",l,function(e,t){var r=t;(404===e&&(r=null,e=null),null===e&&o.onDataUpdate_(i,r,!1,n),Ed(o.listens_,$)===s)&&a(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,r){var n=t.getListenId_(e,r);delete this.listens_[n]},t.prototype.get=function(e){var t=this,r=Dp(e._queryParams),n=e._path.toString(),a=new Gb;return this.restRequest_(n+".json",r,function(e,r){var o=r;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(n,o,!1,null),a.resolve(o)):a.reject(new Error(o))}),a.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,r){var n=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var o=a&&a.accessToken;o&&(t.auth=o);var i=(n.repoInfo_.secure?"https://":"http://")+n.repoInfo_.host+e+"?ns="+n.repoInfo_.namespace+Rw(t);n.log_("Sending REST request for "+i);var $=new XMLHttpRequest;$.onreadystatechange=function(){if(r&&4===$.readyState){n.log_("REST Response for "+i+" received. status:",$.status,"response:",$.responseText);var e=null;if($.status>=200&&$.status<300){try{e=Eg($.responseText)}catch(t){Db("Failed to parse JSON response for "+i+": "+$.responseText)}r(null,e)}else 401!==$.status&&404!==$.status&&Db("Got unsuccessful REST response for "+i+" Status: "+$.status),r($.status);r=null}},$.open("GET",i,!0),$.send()})},t}(kp),Ly=function(){function e(){this.rootNode_=eb.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function Bj(){return{value:null,children:new Map}}function og(e,t,r){if(gb(t))e.value=r,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,r);else{var n=fb(t);e.children.has(n)||e.children.set(n,Bj()),og(e.children.get(n),t=ob(t),r)}}function $k(e,t){if(gb(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(qb,function(t,r){og(e,new mb(t),r)}),$k(e,t)}if(e.children.size>0){var n=fb(t);if(t=ob(t),e.children.has(n))$k(e.children.get(n),t)&&e.children.delete(n);return 0===e.children.size}return!0}function _k(e,t,r){null!==e.value?r(t,e.value):My(e,function(e,n){_k(n,new mb(t.toString()+"/"+e),r)})}function My(e,t){e.children.forEach(function(e,r){t(r,e)})}var bd,Fp=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Dd({},e);return this.last_&&zb(this.last_,function(e,r){t[e]=t[e]-r}),this.last_=e,t},e}(),Gp=1e4,Ny=3e4,Oy=3e5,Py=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Fp(e);var r=Gp+(Ny-Gp)*Math.random();Lg(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),r={},n=!1;zb(t,function(t,a){a>0&&Hb(e.statsToReport_,t)&&(r[t]=a,n=!0)}),n&&this.server_.reportStats(r),Lg(this.reportStats_.bind(this),Math.floor(2*Math.random()*Oy))},e}();function Qy(e,t){e.statsToReport_[t]=!0}function al(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function cl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bd||(bd={}));var Hp,Ry=function(){function e(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bd.ACK_USER_WRITE,this.source=al()}return e.prototype.operationForChild=function(t){if(gb(this.path)){if(null!=this.affectedTree.value)return bb(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var r=this.affectedTree.subtree(new mb(t));return new e(lb(),r,this.revert)}return bb(fb(this.path)===t,"operationForChild called for unrelated child."),new e(ob(this.path),this.affectedTree,this.revert)},e}(),Ip=function(){function e(e,t){this.source=e,this.path=t,this.type=bd.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return gb(this.path)?new e(this.source,lb()):new e(this.source,ob(this.path))},e}(),Cj=function(){function e(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bd.OVERWRITE}return e.prototype.operationForChild=function(t){return gb(this.path)?new e(this.source,lb(),this.snap.getImmediateChild(t)):new e(this.source,ob(this.path),this.snap)},e}(),dl=function(){function e(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bd.MERGE}return e.prototype.operationForChild=function(t){if(gb(this.path)){var r=this.children.subtree(new mb(t));return r.isEmpty()?null:r.value?new Cj(this.source,lb(),r.value):new e(this.source,lb(),r)}return bb(fb(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ob(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),rd=function(){function e(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(gb(e))return this.isFullyInitialized()&&!this.filtered_;var t=fb(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Sy=function(){return function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}();function Ty(e,t,r,n){var a=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Dy(t.childName,t.snapshotNode))}),Rg(e,a,"child_removed",t,n,r),Rg(e,a,"child_added",t,n,r),Rg(e,a,"child_moved",o,n,r),Rg(e,a,"child_changed",t,n,r),Rg(e,a,"value",t,n,r),a}function Rg(e,t,r,n,a,o){var i=n.filter(function(e){return e.type===r});i.sort(function(t,r){return Vy(e,t,r)}),i.forEach(function(r){var n=Uy(e,r,o);a.forEach(function(a){a.respondsTo(r.type)&&t.push(a.createEvent(n,e.query_))})})}function Uy(e,t,r){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_),t)}function Vy(e,t,r){if(null==t.childName||null==r.childName)throw dg("Should only compare child_ events.");var n=new hb(t.childName,t.snapshotNode),a=new hb(r.childName,r.snapshotNode);return e.index_.compare(n,a)}function Dj(e,t){return{eventCache:e,serverCache:t}}function Sg(e,t,r,n){return Dj(new rd(t,r,n),e.serverCache)}function Jp(e,t,r,n){return Dj(e.eventCache,new rd(t,r,n))}function Ej(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Nd(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Wy=function(){return Hp||(Hp=new kd(yx)),Hp},Mb=function(){function e(e,t){void 0===t&&(t=Wy()),this.value=e,this.children=t}return e.fromObject=function(t){var r=new e(null);return zb(t,function(e,t){r=r.set(new mb(e),t)}),r},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:lb(),value:this.value};if(gb(e))return null;var r=fb(e),n=this.children.get(r);if(null!==n){var a=n.findRootMostMatchingPathAndValue(ob(e),t);return null!=a?{path:sb(new mb(r),a.path),value:a.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(gb(t))return this;var r=fb(t),n=this.children.get(r);return null!==n?n.subtree(ob(t)):new e(null)},e.prototype.set=function(t,r){if(gb(t))return new e(r,this.children);var n=fb(t),a=(this.children.get(n)||new e(null)).set(ob(t),r),o=this.children.insert(n,a);return new e(this.value,o)},e.prototype.remove=function(t){if(gb(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var r=fb(t),n=this.children.get(r);if(n){var a=n.remove(ob(t)),o=void 0;return o=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(gb(e))return this.value;var t=fb(e),r=this.children.get(t);return r?r.get(ob(e)):null},e.prototype.setTree=function(t,r){if(gb(t))return r;var n=fb(t),a=(this.children.get(n)||new e(null)).setTree(ob(t),r),o=void 0;return o=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(lb(),e)},e.prototype.fold_=function(e,t){var r={};return this.children.inorderTraversal(function(n,a){r[n]=a.fold_(sb(e,n),t)}),t(e,this.value,r)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,lb(),t)},e.prototype.findOnPath_=function(e,t,r){var n=!!this.value&&r(t,this.value);if(n)return n;if(gb(e))return null;var a=fb(e),o=this.children.get(a);return o?o.findOnPath_(ob(e),sb(t,a),r):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,lb(),t)},e.prototype.foreachOnPath_=function(t,r,n){if(gb(t))return this;this.value&&n(r,this.value);var a=fb(t),o=this.children.get(a);return o?o.foreachOnPath_(ob(t),sb(r,a),n):new e(null)},e.prototype.foreach=function(e){this.foreach_(lb(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(r,n){n.foreach_(sb(e,r),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,r){r.value&&e(t,r.value)})},e}(),sd=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new Mb(null))},e}();function Tg(e,t,r){if(gb(t))return new sd(new Mb(r));var n=e.writeTree_.findRootMostValueAndPath(t);if(null!=n){var a=n.path,o=n.value,i=Eb(a,t);return o=o.updateChild(i,r),new sd(e.writeTree_.set(a,o))}var $=new Mb(r),s=e.writeTree_.setTree(t,$);return new sd(s)}function fl(e,t,r){var n=e;return zb(r,function(e,r){n=Tg(n,sb(t,e),r)}),n}function Kp(e,t){if(gb(t))return sd.empty();var r=e.writeTree_.setTree(t,new Mb(null));return new sd(r)}function gl(e,t){return null!=Od(e,t)}function Od(e,t){var r=e.writeTree_.findRootMostValueAndPath(t);return null!=r?e.writeTree_.get(r.path).getChild(Eb(r.path,t)):null}function Lp(e){var t=[],r=e.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(qb,function(e,r){t.push(new hb(e,r))}):e.writeTree_.children.inorderTraversal(function(e,r){null!=r.value&&t.push(new hb(e,r.value))}),t}function td(e,t){if(gb(t))return e;var r=Od(e,t);return new sd(null!=r?new Mb(r):e.writeTree_.subtree(t))}function hl(e){return e.writeTree_.isEmpty()}function pg(e,t){return Mp(lb(),e.writeTree_,t)}function Mp(e,t,r){if(null!=t.value)return r.updateChild(e,t.value);var n=null;return t.children.inorderTraversal(function(t,a){".priority"===t?(bb(null!==a.value,"Priority writes must always be leaf nodes"),n=a.value):r=Mp(sb(e,t),a,r)}),r.getChild(e).isEmpty()||null===n||(r=r.updateChild(sb(e,".priority"),n)),r}function Fj(e,t){return Rp(t,e)}function Xy(e,t,r,n,a){bb(n>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),e.allWrites.push({path:t,snap:r,writeId:n,visible:a}),a&&(e.visibleWrites=Tg(e.visibleWrites,t,r)),e.lastWriteId=n}function Yy(e,t,r,n){bb(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:r,writeId:n,visible:!0}),e.visibleWrites=fl(e.visibleWrites,t,r),e.lastWriteId=n}function Zy(e,t){for(var r=0;r<e.allWrites.length;r++){var n=e.allWrites[r];if(n.writeId===t)return n}return null}function $y(e,t){var r=e.allWrites.findIndex(function(e){return e.writeId===t});bb(r>=0,"removeWrite called with nonexistent writeId.");var n=e.allWrites[r];e.allWrites.splice(r,1);for(var a=n.visible,o=!1,i=e.allWrites.length-1;a&&i>=0;){var $=e.allWrites[i];$.visible&&(i>=r&&_y($,n.path)?a=!1:Ob(n.path,$.path)&&(o=!0)),i--}if(a){if(o)return az(e),!0;n.snap?e.visibleWrites=Kp(e.visibleWrites,n.path):zb(n.children,function(t){e.visibleWrites=Kp(e.visibleWrites,sb(n.path,t))});return!0}return!1}function _y(e,t){if(e.snap)return Ob(e.path,t);for(var r in e.children)if(e.children.hasOwnProperty(r)&&Ob(sb(e.path,r),t))return!0;return!1}function az(e){e.visibleWrites=Np(e.allWrites,bz,lb()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function bz(e){return e.visible}function Np(e,t,r){for(var n=sd.empty(),a=0;a<e.length;++a){var o=e[a];if(t(o)){var i=o.path,$=void 0;if(o.snap)Ob(r,i)?n=Tg(n,$=Eb(r,i),o.snap):Ob(i,r)&&($=Eb(i,r),n=Tg(n,lb(),o.snap.getChild($)));else{if(!o.children)throw dg("WriteRecord should have .snap or .children");if(Ob(r,i))n=fl(n,$=Eb(r,i),o.children);else if(Ob(i,r))if(gb($=Eb(i,r)))n=fl(n,lb(),o.children);else{var s=Ed(o.children,fb($));if(s){var l=s.getChild(ob($));n=Tg(n,lb(),l)}}}}}return n}function Op(e,t,r,n,a){if(n||a){var o=td(e.visibleWrites,t);if(!a&&hl(o))return r;if(a||null!=r||gl(o,lb())){return pg(Np(e.allWrites,function(e){return(e.visible||a)&&(!n||!~n.indexOf(e.writeId))&&(Ob(e.path,t)||Ob(t,e.path))},t),r||eb.EMPTY_NODE)}return null}var i=Od(e.visibleWrites,t);if(null!=i)return i;var $=td(e.visibleWrites,t);return hl($)?r:null!=r||gl($,lb())?pg($,r||eb.EMPTY_NODE):null}function cz(e,t,r){var n=eb.EMPTY_NODE,a=Od(e.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(qb,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(r){var o=td(e.visibleWrites,t);return r.forEachChild(qb,function(e,t){var r=pg(td(o,new mb(e)),t);n=n.updateImmediateChild(e,r)}),Lp(o).forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return Lp(td(e.visibleWrites,t)).forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}function dz(e,t,r,n,a){bb(n||a,"Either existingEventSnap or existingServerSnap must exist");var o=sb(t,r);if(gl(e.visibleWrites,o))return null;var i=td(e.visibleWrites,o);return hl(i)?a.getChild(r):pg(i,a.getChild(r))}function ez(e,t,r,n){var a=sb(t,r),o=Od(e.visibleWrites,a);return null!=o?o:n.isCompleteForChild(r)?pg(td(e.visibleWrites,a),n.getNode().getImmediateChild(r)):null}function fz(e,t){return Od(e.visibleWrites,t)}function gz(e,t,r,n,a,o,i){var $,s=td(e.visibleWrites,t),l=Od(s,lb());if(null!=l)$=l;else{if(null==r)return[];$=pg(s,r)}if(($=$.withIndex(i)).isEmpty()||$.isLeafNode())return[];for(var u=[],c=i.getCompare(),v=o?$.getReverseIteratorFrom(n,i):$.getIteratorFrom(n,i),p=v.getNext();p&&u.length<a;)0!==c(p,n)&&u.push(p),p=v.getNext();return u}function hz(){return{visibleWrites:sd.empty(),allWrites:[],lastWriteId:-1}}function Gj(e,t,r,n){return Op(e.writeTree,e.treePath,t,r,n)}function il(e,t){return cz(e.writeTree,e.treePath,t)}function Pp(e,t,r,n){return dz(e.writeTree,e.treePath,t,r,n)}function Hj(e,t){return fz(e.writeTree,sb(e.treePath,t))}function iz(e,t,r,n,a,o){return gz(e.writeTree,e.treePath,t,r,n,a,o)}function jl(e,t,r){return ez(e.writeTree,e.treePath,t,r)}function Qp(e,t){return Rp(sb(e.treePath,t),e.writeTree)}function Rp(e,t){return{treePath:e,writeTree:t}}var jz=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,r=e.childName;bb("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),bb(".priority"!==r,"Only non-priority child changes can be tracked.");var n=this.changeMap.get(r);if(n){var a=n.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Qg(r,e.snapshotNode,n.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Pg(r,n.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ng(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw dg("Illegal combination of changes: "+e+" occurred after "+n);this.changeMap.set(r,Qg(r,e.snapshotNode,n.oldSnap))}}else this.changeMap.set(r,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),kz=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,r){return null},e}(),Sp=new kz,kl=function(){function e(e,t,r){void 0===r&&(r=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var r=null!=this.optCompleteServerCache_?new rd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jl(this.writes_,e,r)},e.prototype.getChildAfterChild=function(e,t,r){var n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nd(this.viewCache_),a=iz(this.writes_,n,t,1,r,e);return 0===a.length?null:a[0]},e}();function lz(e){return{filter:e}}function mz(e,t){bb(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),bb(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function nz(e,t,r,n,a){var o,i,$=new jz;if(r.type===bd.OVERWRITE){var s=r;s.source.fromUser?o=ll(e,t,s.path,s.snap,n,a,$):(bb(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.serverCache.isFiltered()&&!gb(s.path),o=Ij(e,t,s.path,s.snap,n,a,i,$))}else if(r.type===bd.MERGE){var l=r;l.source.fromUser?o=pz(e,t,l.path,l.children,n,a,$):(bb(l.source.fromServer,"Unknown source."),i=l.source.tagged||t.serverCache.isFiltered(),o=ml(e,t,l.path,l.children,n,a,i,$))}else if(r.type===bd.ACK_USER_WRITE){var u=r;o=u.revert?sz(e,t,u.path,n,a,$):qz(e,t,u.path,u.affectedTree,n,a,$)}else{if(r.type!==bd.LISTEN_COMPLETE)throw dg("Unknown operation type: "+r.type);o=rz(e,t,r.path,n,$)}var c=$.getChanges();return oz(t,o,c),{viewCache:o,changes:c}}function oz(e,t,r){var n=t.eventCache;if(n.isFullyInitialized()){var a=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Ej(e);(r.length>0||!e.eventCache.isFullyInitialized()||a&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&r.push(Ap(Ej(t)))}}function Tp(e,t,r,n,a,o){var i=t.eventCache;if(null!=Hj(n,r))return t;var $=void 0,s=void 0;if(gb(r)){if(bb(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Nd(t),u=il(n,l instanceof eb?l:eb.EMPTY_NODE);$=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{var c=Gj(n,Nd(t));$=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}}else{var v=fb(r);if(".priority"===v){bb(1===qd(r),"Can't have a priority with additional path components");var p=i.getNode(),h=Pp(n,r,p,s=t.serverCache.getNode());$=null!=h?e.filter.updatePriority(p,h):i.getNode()}else{var d=ob(r),E=void 0;if(i.isCompleteForChild(v)){s=t.serverCache.getNode();var M=Pp(n,r,i.getNode(),s);E=null!=M?i.getNode().getImmediateChild(v).updateChild(d,M):i.getNode().getImmediateChild(v)}else E=jl(n,v,t.serverCache);$=null!=E?e.filter.updateChild(i.getNode(),v,E,d,a,o):i.getNode()}}return Sg(t,$,i.isFullyInitialized()||gb(r),e.filter.filtersNodes())}function Ij(e,t,r,n,a,o,i,$){var s,l=t.serverCache,u=i?e.filter:e.filter.getIndexedFilter();if(gb(r))s=u.updateFullNode(l.getNode(),n,null);else if(u.filtersNodes()&&!l.isFiltered()){var c=l.getNode().updateChild(r,n);s=u.updateFullNode(l.getNode(),c,null)}else{var v=fb(r);if(!l.isCompleteForPath(r)&&qd(r)>1)return t;var p=ob(r),h=l.getNode().getImmediateChild(v).updateChild(p,n);s=".priority"===v?u.updatePriority(l.getNode(),h):u.updateChild(l.getNode(),v,h,p,Sp,null)}var d=Jp(t,s,l.isFullyInitialized()||gb(r),u.filtersNodes());return Tp(e,d,r,a,new kl(a,d,o),$)}function ll(e,t,r,n,a,o,i){var $,s,l=t.eventCache,u=new kl(a,t,o);if(gb(r))s=e.filter.updateFullNode(t.eventCache.getNode(),n,i),$=Sg(t,s,!0,e.filter.filtersNodes());else{var c=fb(r);if(".priority"===c)s=e.filter.updatePriority(t.eventCache.getNode(),n),$=Sg(t,s,l.isFullyInitialized(),l.isFiltered());else{var v=ob(r),p=l.getNode().getImmediateChild(c),h=void 0;if(gb(v))h=n;else{var d=u.getCompleteChild(c);h=null!=d?".priority"===Qk(v)&&d.getChild(pp(v)).isEmpty()?d:d.updateChild(v,n):eb.EMPTY_NODE}if(p.equals(h))$=t;else $=Sg(t,e.filter.updateChild(l.getNode(),c,h,v,u,i),l.isFullyInitialized(),e.filter.filtersNodes())}}return $}function Up(e,t){return e.eventCache.isCompleteForChild(t)}function pz(e,t,r,n,a,o,i){var $=t;return n.foreach(function(n,s){var l=sb(r,n);Up(t,fb(l))&&($=ll(e,$,l,s,a,o,i))}),n.foreach(function(n,s){var l=sb(r,n);Up(t,fb(l))||($=ll(e,$,l,s,a,o,i))}),$}function Vp(e,t,r){return r.foreach(function(e,r){t=t.updateChild(e,r)}),t}function ml(e,t,r,n,a,o,i,$){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,l=t;s=gb(r)?n:new Mb(null).setTree(r,n);var u=t.serverCache.getNode();return s.children.inorderTraversal(function(r,n){if(u.hasChild(r)){var s=t.serverCache.getNode().getImmediateChild(r),c=Vp(e,s,n);l=Ij(e,l,new mb(r),c,a,o,i,$)}}),s.children.inorderTraversal(function(r,n){var s=!t.serverCache.isCompleteForChild(r)&&void 0===n.value;if(!u.hasChild(r)&&!s){var c=t.serverCache.getNode().getImmediateChild(r),v=Vp(e,c,n);l=Ij(e,l,new mb(r),v,a,o,i,$)}}),l}function qz(e,t,r,n,a,o,i){if(null!=Hj(a,r))return t;var $=t.serverCache.isFiltered(),s=t.serverCache;if(null!=n.value){if(gb(r)&&s.isFullyInitialized()||s.isCompleteForPath(r))return Ij(e,t,r,s.getNode().getChild(r),a,o,$,i);if(gb(r)){var l=new Mb(null);return s.getNode().forEachChild(ad,function(e,t){l=l.set(new mb(e),t)}),ml(e,t,r,l,a,o,$,i)}return t}var u=new Mb(null);return n.foreach(function(e,t){var n=sb(r,e);s.isCompleteForPath(n)&&(u=u.set(e,s.getNode().getChild(n)))}),ml(e,t,r,u,a,o,$,i)}function rz(e,t,r,n,a){var o=t.serverCache;return Tp(e,Jp(t,o.getNode(),o.isFullyInitialized()||gb(r),o.isFiltered()),r,n,Sp,a)}function sz(e,t,r,n,a,o){var i;if(null!=Hj(n,r))return t;var $=new kl(n,t,a),s=t.eventCache.getNode(),l=void 0;if(gb(r)||".priority"===fb(r)){var u=void 0;if(t.serverCache.isFullyInitialized())u=Gj(n,Nd(t));else{var c=t.serverCache.getNode();bb(c instanceof eb,"serverChildren would be complete if leaf node"),u=il(n,c)}u=u,l=e.filter.updateFullNode(s,u,o)}else{var v=fb(r),p=jl(n,v,t.serverCache);null==p&&t.serverCache.isCompleteForChild(v)&&(p=s.getImmediateChild(v)),(l=null!=p?e.filter.updateChild(s,v,p,ob(r),$,o):t.eventCache.getNode().hasChild(v)?e.filter.updateChild(s,v,eb.EMPTY_NODE,ob(r),$,o):s).isEmpty()&&t.serverCache.isFullyInitialized()&&(i=Gj(n,Nd(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,i,o))}return i=t.serverCache.isFullyInitialized()||null!=Hj(n,lb()),Sg(t,l,i,e.filter.filtersNodes())}var nl,tz=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var r=this.query_._queryParams,n=new Xk(r.getIndex()),a=Fy(r);this.processor_=lz(a);var o=t.serverCache,i=t.eventCache,$=n.updateFullNode(eb.EMPTY_NODE,o.getNode(),null),s=a.updateFullNode(eb.EMPTY_NODE,i.getNode(),null),l=new rd($,o.isFullyInitialized(),n.filtersNodes()),u=new rd(s,i.isFullyInitialized(),a.filtersNodes());this.viewCache_=Dj(u,l),this.eventGenerator_=new Sy(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function uz(e){return e.viewCache_.serverCache.getNode()}function vz(e){return Ej(e.viewCache_)}function wz(e,t){var r=Nd(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!gb(t)&&!r.getImmediateChild(fb(t)).isEmpty())?r.getChild(t):null}function Wp(e){return 0===e.eventRegistrations_.length}function xz(e,t){e.eventRegistrations_.push(t)}function Xp(e,t,r){var n=[];if(r){bb(null==t,"A cancel should cancel all event registrations.");var a=e.query._path;e.eventRegistrations_.forEach(function(e){var t=e.createCancelEvent(r,a);t&&n.push(t)})}if(t){for(var o=[],i=0;i<e.eventRegistrations_.length;++i){var $=e.eventRegistrations_[i];if($.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(i+1));break}}else o.push($)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return n}function Yp(e,t,r,n){t.type===bd.MERGE&&null!==t.source.queryId&&(bb(Nd(e.viewCache_),"We should always have a full cache before handling merges"),bb(Ej(e.viewCache_),"Missing event cache, even though we have a server cache"));var a=e.viewCache_,o=nz(e.processor_,a,t,r,n);return mz(e.processor_,o.viewCache),bb(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Zp(e,o.changes,o.viewCache.eventCache.getNode(),null)}function yz(e,t){var r=e.viewCache_.eventCache,n=[];r.getNode().isLeafNode()||r.getNode().forEachChild(qb,function(e,t){n.push(ng(e,t))});return r.isFullyInitialized()&&n.push(Ap(r.getNode())),Zp(e,n,r.getNode(),t)}function Zp(e,t,r,n){var a=n?[n]:e.eventRegistrations_;return Ty(e.eventGenerator_,t,r,a)}var ol,$p=function(){return function(){this.views=new Map}}();function zz(e){bb(!nl,"__referenceConstructor has already been defined"),nl=e}function Az(){return bb(nl,"Reference.ts has not been loaded"),nl}function Bz(e){return 0===e.views.size}function pl(e,t,r,n){var a,o,i=t.source.queryId;if(null!==i){var $=e.views.get(i);return bb(null!=$,"SyncTree gave us an op for an invalid query."),Yp($,t,r,n)}var s=[];try{for(var l=Nb(e.views.values()),u=l.next();!u.done;u=l.next()){$=u.value;s=s.concat(Yp($,t,r,n))}}catch(c){a={error:c}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}return s}function _p(e,t,r,n,a){var o=t._queryIdentifier,i=e.views.get(o);if(!i){var $=Gj(r,a?n:null),s=!1;$?s=!0:n instanceof eb?($=il(r,n),s=!1):($=eb.EMPTY_NODE,s=!1);var l=Dj(new rd($,s,!1),new rd(n,a,!1));return new tz(t,l)}return i}function Cz(e,t,r,n,a,o){var i=_p(e,t,n,a,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,i),xz(i,r),yz(i,r)}function Dz(e,t,r,n){var a,o,i=t._queryIdentifier,$=[],s=[],l=vd(e);if("default"===i)try{for(var u=Nb(e.views.entries()),c=u.next();!c.done;c=u.next()){var v=Kb(c.value,2),p=v[0],h=v[1];s=s.concat(Xp(h,r,n)),Wp(h)&&(e.views.delete(p),h.query._queryParams.loadsAllData()||$.push(h.query))}}catch(d){a={error:d}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(a)throw a.error}}else(h=e.views.get(i))&&(s=s.concat(Xp(h,r,n)),Wp(h)&&(e.views.delete(i),h.query._queryParams.loadsAllData()||$.push(h.query)));return l&&!vd(e)&&$.push(new(Az())(t._repo,t._path)),{removed:$,events:s}}function aq(e){var t,r,n=[];try{for(var a=Nb(e.views.values()),o=a.next();!o.done;o=a.next()){var i=o.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch($){t={error:$}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function ud(e,t){var r,n,a=null;try{for(var o=Nb(e.views.values()),i=o.next();!i.done;i=o.next()){var $=i.value;a=a||wz($,t)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function bq(e,t){if(t._queryParams.loadsAllData())return Jj(e);var r=t._queryIdentifier;return e.views.get(r)}function cq(e,t){return null!=bq(e,t)}function vd(e){return null!=Jj(e)}function Jj(e){var t,r;try{for(var n=Nb(e.views.values()),a=n.next();!a.done;a=n.next()){var o=a.value;if(o.query._queryParams.loadsAllData())return o}}catch(i){t={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return null}function Ez(e){bb(!ol,"__referenceConstructor has already been defined"),ol=e}function Fz(){return bb(ol,"Reference.ts has not been loaded"),ol}var Gz=1,dq=function(){return function(e){this.listenProvider_=e,this.syncPointTree_=new Mb(null),this.pendingWriteTree_=hz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function ql(e,t,r,n,a){return Xy(e.pendingWriteTree_,t,r,n,a),a?qg(e,new Cj(al(),t,r)):[]}function Hz(e,t,r,n){Yy(e.pendingWriteTree_,t,r,n);var a=Mb.fromObject(r);return qg(e,new dl(al(),t,a))}function wd(e,t,r){void 0===r&&(r=!1);var n=Zy(e.pendingWriteTree_,t);if($y(e.pendingWriteTree_,t)){var a=new Mb(null);return null!=n.snap?a=a.set(lb(),!0):zb(n.children,function(e){a=a.set(new mb(e),!0)}),qg(e,new Ry(n.path,a,r))}return[]}function Ug(e,t,r){return qg(e,new Cj(bl(),t,r))}function Iz(e,t,r){var n=Mb.fromObject(r);return qg(e,new dl(bl(),t,n))}function Jz(e,t){return qg(e,new Ip(bl(),t))}function Kz(e,t,r){var n=sl(e,r);if(n){var a=ul(n),o=a.path,i=a.queryId,$=Eb(o,t);return vl(e,o,new Ip(cl(i),$))}return[]}function rl(e,t,r,n){var a=t._path,o=e.syncPointTree_.get(a),i=[];if(o&&("default"===t._queryIdentifier||cq(o,t))){var $=Dz(o,t,r,n);Bz(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var s=$.removed;i=$.events;var l=-1!==s.findIndex(function(e){return e._queryParams.loadsAllData()}),u=e.syncPointTree_.findOnPath(a,function(e,t){return vd(t)});if(l&&!u){var c=e.syncPointTree_.subtree(a);if(!c.isEmpty())for(var v=Oz(c),p=0;p<v.length;++p){var h=v[p],d=h.query,E=hq(e,h);e.listenProvider_.startListening(Vg(d),Lj(e,d),E.hashFn,E.onComplete)}}if(!u&&s.length>0&&!n)if(l){e.listenProvider_.stopListening(Vg(t),null)}else s.forEach(function(t){var r=e.queryToTagMap.get(Mj(t));e.listenProvider_.stopListening(Vg(t),r)});Pz(e,s)}return i}function Lz(e,t,r,n){var a=sl(e,n);if(null!=a){var o=ul(a),i=o.path,$=o.queryId,s=Eb(i,t);return vl(e,i,new Cj(cl($),s,r))}return[]}function Mz(e,t,r,n){var a=sl(e,n);if(a){var o=ul(a),i=o.path,$=o.queryId,s=Eb(i,t),l=Mb.fromObject(r);return vl(e,i,new dl(cl($),s,l))}return[]}function eq(e,t,r){var n=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(n,function(e,t){var r=Eb(e,n);a=a||ud(t,r),o=o||vd(t)});var i,$=e.syncPointTree_.get(n);($?(o=o||vd($),a=a||ud($,lb())):($=new $p,e.syncPointTree_=e.syncPointTree_.set(n,$)),null!=a)?i=!0:(i=!1,a=eb.EMPTY_NODE,e.syncPointTree_.subtree(n).foreachChild(function(e,t){var r=ud(t,lb());r&&(a=a.updateImmediateChild(e,r))}));var s=cq($,t);if(!s&&!t._queryParams.loadsAllData()){var l=Mj(t);bb(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var u=Qz();e.queryToTagMap.set(l,u),e.tagToQueryMap.set(u,l)}var c=Cz($,t,r,Fj(e.pendingWriteTree_,n),a,i);if(!s&&!o){var v=bq($,t);c=c.concat(Rz(e,t,v))}return c}function Kj(e,t,r){var n=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,function(e,r){var n=ud(r,Eb(e,t));if(n)return n});return Op(n,t,a,r,!0)}function Nz(e,t){var r=t._path,n=null;e.syncPointTree_.foreachOnPath(r,function(e,t){var a=Eb(e,r);n=n||ud(t,a)});var a=e.syncPointTree_.get(r);a?n=n||ud(a,lb()):(a=new $p,e.syncPointTree_=e.syncPointTree_.set(r,a));var o=null!=n,i=o?new rd(n,!0,!1):null;return vz(_p(a,t,Fj(e.pendingWriteTree_,t._path),o?i.getNode():eb.EMPTY_NODE,o))}function qg(e,t){return fq(t,e.syncPointTree_,null,Fj(e.pendingWriteTree_,lb()))}function fq(e,t,r,n){if(gb(e.path))return gq(e,t,r,n);var a=t.get(lb());null==r&&null!=a&&(r=ud(a,lb()));var o=[],i=fb(e.path),$=e.operationForChild(i),s=t.children.get(i);if(s&&$){var l=r?r.getImmediateChild(i):null,u=Qp(n,i);o=o.concat(fq($,s,l,u))}return a&&(o=o.concat(pl(a,e,n,r))),o}function gq(e,t,r,n){var a=t.get(lb());null==r&&null!=a&&(r=ud(a,lb()));var o=[];return t.children.inorderTraversal(function(t,a){var i=r?r.getImmediateChild(t):null,$=Qp(n,t),s=e.operationForChild(t);s&&(o=o.concat(gq(s,a,i,$)))}),a&&(o=o.concat(pl(a,e,n,r))),o}function hq(e,t){var r=t.query,n=Lj(e,r);return{hashFn:function(){return(uz(t)||eb.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return n?Kz(e,r._path,n):Jz(e,r._path);var a=Bx(t,r);return rl(e,r,null,a)}}}function Lj(e,t){var r=Mj(t);return e.queryToTagMap.get(r)}function Mj(e){return e._path.toString()+"$"+e._queryIdentifier}function sl(e,t){return e.tagToQueryMap.get(t)}function ul(e){var t=e.indexOf("$");return bb(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mb(e.substr(0,t))}}function vl(e,t,r){var n=e.syncPointTree_.get(t);return bb(n,"Missing sync point for query tag that we're tracking"),pl(n,r,Fj(e.pendingWriteTree_,t),null)}function Oz(e){return e.fold(function(e,t,r){if(t&&vd(t))return[Jj(t)];var n=[];return t&&(n=aq(t)),zb(r,function(e,t){n=n.concat(t)}),n})}function Vg(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Fz())(e._repo,e._path):e}function Pz(e,t){for(var r=0;r<t.length;++r){var n=t[r];if(!n._queryParams.loadsAllData()){var a=Mj(n),o=e.queryToTagMap.get(a);e.queryToTagMap.delete(a),e.tagToQueryMap.delete(o)}}}function Qz(){return Gz++}function Rz(e,t,r){var n=t._path,a=Lj(e,t),o=hq(e,r),i=e.listenProvider_.startListening(Vg(t),a,o.hashFn,o.onComplete),$=e.syncPointTree_.subtree(n);if(a)bb(!vd($.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=$.fold(function(e,t,r){if(!gb(e)&&t&&vd(t))return[Jj(t).query];var n=[];return t&&(n=n.concat(aq(t).map(function(e){return e.query}))),zb(r,function(e,t){n=n.concat(t)}),n}),l=0;l<s.length;++l){var u=s[l];e.listenProvider_.stopListening(Vg(u),Lj(e,u))}return i}var Sz=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Tz=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var r=sb(this.path_,t);return new e(this.syncTree_,r)},e.prototype.node=function(){return Kj(this.syncTree_,this.path_)},e}(),Uz=function(e){return(e=e||{}).timestamp=e.timestamp||new Date().getTime(),e},iq=function(e,t,r){return e&&"object"==typeof e?(bb(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Vz(e[".sv"],t,r):"object"==typeof e[".sv"]?Wz(e[".sv"],t):void bb(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Vz=function(e,t,r){switch(e){case"timestamp":return r.timestamp;default:bb(!1,"Unexpected server value: "+e);}},Wz=function(e,t,r){e.hasOwnProperty("increment")||bb(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var n=e.increment;"number"!=typeof n&&bb(!1,"Unexpected increment value: "+n);var a=t.node();if(bb(null!=a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return n;var o=a.getValue();return"number"!=typeof o?n:o+n},jq=function(e,t,r,n){return xl(t,new Tz(r,e),n)},wl=function(e,t,r){return xl(e,new Sz(t),r)};function xl(e,t,r){var n,a=e.getPriority().val(),o=iq(a,t.getImmediateChild(".priority"),r);if(e.isLeafNode()){var i=e,$=iq(i.getValue(),t,r);return $!==i.getValue()||o!==i.getPriority().val()?new kg($,ub(o)):e}var s=e;return n=s,o!==s.getPriority().val()&&(n=n.updatePriority(new kg(o))),s.forEachChild(qb,function(e,a){var o=xl(a,t.getImmediateChild(e),r);o!==a&&(n=n.updateImmediateChild(e,o))}),n}var yl=function(){return function(e,t,r){void 0===e&&(e=""),void 0===t&&(t=null),void 0===r&&(r={children:{},childCount:0}),this.name=e,this.parent=t,this.node=r}}();function Nj(e,t){for(var r=t instanceof mb?t:new mb(t),n=e,a=fb(r);null!==a;){var o=Ed(n.node.children,a)||{children:{},childCount:0};n=new yl(a,n,o),a=fb(r=ob(r))}return n}function Pd(e){return e.node.value}function zl(e,t){e.node.value=t,Al(e)}function kq(e){return e.node.childCount>0}function Xz(e){return void 0===Pd(e)&&!kq(e)}function Oj(e,t){zb(e.node.children,function(r,n){t(new yl(r,e,n))})}function lq(e,t,r,n){r&&!n&&t(e),Oj(e,function(e){lq(e,t,!0,n)}),r&&n&&t(e)}function Yz(e,t,r){for(var n=r?e:e.parent;null!==n;){if(t(n))return!0;n=n.parent}return!1}function Wg(e){return new mb(null===e.parent?e.name:Wg(e.parent)+"/"+e.name)}function Al(e){null!==e.parent&&Zz(e.parent,e.name,e)}function Zz(e,t,r){var n=Xz(r),a=Hb(e.node.children,t);n&&a?(delete e.node.children[t],e.node.childCount--,Al(e)):n||a||(e.node.children[t]=r.node,e.node.childCount++,Al(e))}var $z=/[\[\].#$\/\u0000-\u001F\u007F]/,_z=/[\[\].#$\u0000-\u001F\u007F]/,Bl=10485760,Pj=function(e){return"string"==typeof e&&0!==e.length&&!$z.test(e)},mq=function(e){return"string"==typeof e&&0!==e.length&&!_z.test(e)},aA=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mq(e)},Xg=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!tj(e)||e&&"object"==typeof e&&Hb(e,".sv")},cd=function(e,t,r,n){n&&void 0===t||Yg(Ib(e,"value"),t,r)},Yg=function(e,t,r){var n=r instanceof mb?new dy(r,e):r;if(void 0===t)throw new Error(e+"contains undefined "+Ld(n));if("function"==typeof t)throw new Error(e+"contains a function "+Ld(n)+" with contents = "+t.toString());if(tj(t))throw new Error(e+"contains "+t.toString()+" "+Ld(n));if("string"==typeof t&&t.length>Bl/3&&oj(t)>Bl)throw new Error(e+"contains a string greater than "+Bl+" utf8 bytes "+Ld(n)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var a=!1,o=!1;if(zb(t,function(t,r){if(".value"===t)a=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Pj(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ld(n)+".  Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"");ey(n,t),Yg(e,r,n),fy(n)}),a&&o)throw new Error(e+" contains \".value\" child "+Ld(n)+" in addition to actual children.")}},bA=function(e,t){var r,n;for(r=0;r<t.length;r++)for(var a=Mg(n=t[r]),o=0;o<a.length;o++)if(".priority"===a[o]&&o===a.length-1);else if(!Pj(a[o]))throw new Error(e+"contains an invalid key ("+a[o]+") in path "+n.toString()+". Keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"");t.sort(cy);var i=null;for(r=0;r<t.length;r++){if(n=t[r],null!==i&&Ob(i,n))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},nq=function(e,t,r,n){if(!n||void 0!==t){var a=Ib(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(a+" must be an object containing the children to replace.");var o=[];zb(t,function(e,t){var n=new mb(e);if(Yg(a,t,sb(r,n)),".priority"===Qk(n)&&!Xg(t))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(n)}),bA(a,o)}},Cl=function(e,t,r){if(!r||void 0!==t){if(tj(t))throw new Error(Ib(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xg(t))throw new Error(Ib(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cA=function(e,t,r){if(!r||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ib(e,"eventType")+"must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".");}},Zg=function(e,t,r,n){if(!(n&&void 0===r||Pj(r)))throw new Error(Ib(e,t)+"was an invalid key = \""+r+"\".  Firebase keys must be non-empty strings and can't contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").")},$g=function(e,t,r,n){if(!(n&&void 0===r||mq(r)))throw new Error(Ib(e,t)+"was an invalid path = \""+r+"\". Paths must be non-empty strings and can't contain \".\", \"#\", \"$\", \"[\", or \"]\"")},dA=function(e,t,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),$g(e,t,r,n)},Pb=function(e,t){if(".info"===fb(t))throw new Error(e+" failed = Can't modify data under /.info/")},oq=function(e,t){var r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Pj(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&!aA(r))throw new Error(Ib(e,"url")+"must be a valid firebase URL and the path can't contain \".\", \"#\", \"$\", \"[\", or \"]\".")},eA=function(e,t,r,n){if((!n||void 0!==r)&&"boolean"!=typeof r)throw new Error(Ib(e,t)+"must be a boolean.")},fA=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Qj(e,t){for(var r=null,n=0;n<t.length;n++){var a=t[n],o=a.getPath();null===r||Rk(o,r.path)||(e.eventLists_.push(r),r=null),null===r&&(r={events:[],path:o}),r.events.push(a)}r&&e.eventLists_.push(r)}function Dl(e,t,r){Qj(e,r),pq(e,function(e){return Rk(e,t)})}function Qb(e,t,r){Qj(e,r),pq(e,function(e){return Ob(e,t)||Ob(t,e)})}function pq(e,t){e.recursionDepth_++;for(var r=!0,n=0;n<e.eventLists_.length;n++){var a=e.eventLists_[n];if(a)t(a.path)?(gA(e.eventLists_[n]),e.eventLists_[n]=null):r=!1}r&&(e.eventLists_=[]),e.recursionDepth_--}function gA(e){for(var t=0;t<e.events.length;t++){var r=e.events[t];if(null!==r){e.events[t]=null;var n=r.getEventRunner();sj&&Cb("event: "+r.toString()),jg(n)}}}var qq="repo_interrupt",hA=25,iA=function(){function e(e,t,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bj(),this.transactionQueueTree_=new yl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function jA(e,t,r){if(e.stats_=Mk(e.repoInfo_),e.forceRestClient_||Dx())e.server_=new Ky(e.repoInfo_,function(t,r,n,a){sq(e,t,r,n,a)},e.authTokenProvider_),setTimeout(function(){return tq(e,!0)},0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yb(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Md(e.repoInfo_,t,function(t,r,n,a){sq(e,t,r,n,a)},function(t){tq(e,t)},function(t){lA(e,t)},e.authTokenProvider_,r),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.statsReporter_=Hx(e.repoInfo_,function(){return new Py(e.stats_,e.server_)}),e.infoData_=new Ly,e.infoSyncTree_=new dq({startListening:function(t,r,n,a){var o=[],i=e.infoData_.getNode(t._path);return i.isEmpty()||(o=Ug(e.infoSyncTree_,t._path,i),setTimeout(function(){a("ok")},0)),o},stopListening:function(){}}),El(e,"connected",!1),e.serverSyncTree_=new dq({startListening:function(t,r,n,a){return e.server_.listen(t,n,r,function(r,n){var o=a(r,n);Qb(e.eventQueue_,t._path,o)}),[]},stopListening:function(t,r){e.server_.unlisten(t,r)}})}function rq(e){var t=e.infoData_.getNode(new mb(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function _g(e){return Uz({timestamp:rq(e)})}function sq(e,t,r,n,a){e.dataUpdateCount++;var o=new mb(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;var i=[];if(a){if(n){var $=nj(r,function(e){return ub(e)});i=Mz(e.serverSyncTree_,o,$,a)}else{var s=ub(r);i=Lz(e.serverSyncTree_,o,s,a)}}else if(n){var l=nj(r,function(e){return ub(e)});i=Iz(e.serverSyncTree_,o,l)}else{var u=ub(r);i=Ug(e.serverSyncTree_,o,u)}var c=o;i.length>0&&(c=sg(e,o)),Qb(e.eventQueue_,c,i)}function kA(e,t){e.interceptServerDataCallback_=t}function tq(e,t){El(e,"connected",t),!1===t&&oA(e)}function lA(e,t){zb(t,function(t,r){El(e,t,r)})}function El(e,t,r){var n=new mb("/.info/"+t),a=ub(r);e.infoData_.updateSnapshot(n,a);var o=Ug(e.infoSyncTree_,n,a);Qb(e.eventQueue_,n,o)}function Rj(e){return e.nextWriteId_++}function mA(e,t){var r=Nz(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(function(r){var n=ub(r),a=Ug(e.serverSyncTree_,t._path,n);return Dl(e.eventQueue_,t._path,a),Promise.resolve(n)},function(r){return rg(e,"get for query "+yb(t)+" failed: "+r),Promise.reject(new Error(r))})}function Fl(e,t,r,n,a){rg(e,"set",{path:t.toString(),value:r,priority:n});var o=_g(e),i=ub(r,n),$=Kj(e.serverSyncTree_,t),s=wl(i,$,o),l=Rj(e),u=ql(e.serverSyncTree_,t,s,l,!0);Qj(e.eventQueue_,u),e.server_.put(t.toString(),i.val(!0),function(r,n){var o="ok"===r;o||Db("set at "+t+" failed: "+r);var i=wd(e.serverSyncTree_,l,!o);Qb(e.eventQueue_,t,i),xd(e,a,r,n)});var c=Il(e,t);sg(e,c),Qb(e.eventQueue_,c,[])}function nA(e,t,r,n){rg(e,"update",{path:t.toString(),value:r});var a=!0,o=_g(e),i={};if(zb(r,function(r,n){a=!1,i[r]=jq(sb(t,r),ub(n),e.serverSyncTree_,o)}),a)Cb("update() called with empty data.  Don't do anything."),xd(e,n,"ok",void 0);else{var $=Rj(e),s=Hz(e.serverSyncTree_,t,i,$);Qj(e.eventQueue_,s),e.server_.merge(t.toString(),r,function(r,a){var o="ok"===r;o||Db("update at "+t+" failed: "+r);var i=wd(e.serverSyncTree_,$,!o),s=i.length>0?sg(e,t):t;Qb(e.eventQueue_,s,i),xd(e,n,r,a)}),zb(r,function(r){var n=Il(e,sb(t,r));sg(e,n)}),Qb(e.eventQueue_,t,[])}}function oA(e){rg(e,"onDisconnectEvents");var t=_g(e),r=Bj();_k(e.onDisconnect_,lb(),function(n,a){var o=jq(n,a,e.serverSyncTree_,t);og(r,n,o)});var n=[];_k(r,lb(),function(t,r){n=n.concat(Ug(e.serverSyncTree_,t,r));var a=Il(e,t);sg(e,a)}),e.onDisconnect_=Bj(),Qb(e.eventQueue_,lb(),n)}function pA(e,t,r){e.server_.onDisconnectCancel(t.toString(),function(n,a){"ok"===n&&$k(e.onDisconnect_,t),xd(e,r,n,a)})}function uq(e,t,r,n){var a=ub(r);e.server_.onDisconnectPut(t.toString(),a.val(!0),function(r,o){"ok"===r&&og(e.onDisconnect_,t,a),xd(e,n,r,o)})}function qA(e,t,r,n,a){var o=ub(r,n);e.server_.onDisconnectPut(t.toString(),o.val(!0),function(r,n){"ok"===r&&og(e.onDisconnect_,t,o),xd(e,a,r,n)})}function rA(e,t,r,n){if(yk(r))return Cb("onDisconnect().update() called with empty data.  Don't do anything."),void xd(e,n,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),r,function(a,o){"ok"===a&&zb(r,function(r,n){var a=ub(n);og(e.onDisconnect_,sb(t,r),a)}),xd(e,n,a,o)})}function sA(e,t,r){var n;n=".info"===fb(t._path)?eq(e.infoSyncTree_,t,r):eq(e.serverSyncTree_,t,r),Dl(e.eventQueue_,t._path,n)}function Gl(e,t,r){var n;n=".info"===fb(t._path)?rl(e.infoSyncTree_,t,r):rl(e.serverSyncTree_,t,r),Dl(e.eventQueue_,t._path,n)}function vq(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qq)}function tA(e){e.persistentConnection_&&e.persistentConnection_.resume(qq)}function uA(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var r;t?(e.statsListener_||(e.statsListener_=new Fp(e.stats_)),r=e.statsListener_.get()):r=e.stats_.get();var n=Object.keys(r).reduce(function(e,t){return Math.max(t.length,e)},0);zb(r,function(e,t){for(var r=e,a=e.length;a<n+2;a++)r+=" ";console.log(r+t)})}}function vA(e,t){e.stats_.incrementCounter(t),Qy(e.statsReporter_,t)}function rg(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Cb.apply(void 0,od([n],Kb(t)))}function xd(e,t,r,n){t&&jg(function(){if("ok"===r)t(null);else{var e=(r||"error").toUpperCase(),a=e;n&&(a+=": "+n);var o=new Error(a);o.code=e,t(o)}})}function wA(e,t,r,n,a,o){rg(e,"transaction on "+t);var i={path:t,update:r,onComplete:n,status:null,order:Nm(),applyLocally:o,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},$=Hl(e,t,void 0);i.currentInputSnapshot=$;var s=i.update($.val());if(void 0===s)i.unwatcher(),i.currentOutputSnapshotRaw=null,i.currentOutputSnapshotResolved=null,i.onComplete&&i.onComplete(null,!1,i.currentInputSnapshot);else{Yg("transaction failed: Data returned ",s,i.path),i.status=0;var l=Nj(e.transactionQueueTree_,t),u=Pd(l)||[];u.push(i),zl(l,u);var c=void 0;if("object"==typeof s&&null!==s&&Hb(s,".priority"))c=Ed(s,".priority"),bb(Xg(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else c=(Kj(e.serverSyncTree_,t)||eb.EMPTY_NODE).getPriority().val();var v=_g(e),p=ub(s,c),h=wl(p,$,v);i.currentOutputSnapshotRaw=p,i.currentOutputSnapshotResolved=h,i.currentWriteId=Rj(e);var d=ql(e.serverSyncTree_,t,h,i.currentWriteId,i.applyLocally);Qb(e.eventQueue_,t,d),Sj(e,e.transactionQueueTree_)}}function Hl(e,t,r){return Kj(e.serverSyncTree_,t,r)||eb.EMPTY_NODE}function Sj(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Tj(e,t),Pd(t)){var r=xq(e,t);bb(r.length>0,"Sending zero length transaction queue"),r.every(function(e){return 0===e.status})&&xA(e,Wg(t),r)}else kq(t)&&Oj(t,function(t){Sj(e,t)})}function xA(e,t,r){for(var n=r.map(function(e){return e.currentWriteId}),a=Hl(e,t,n),o=a,i=a.hash(),$=0;$<r.length;$++){var s=r[$];bb(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var l=Eb(t,s.path);o=o.updateChild(l,s.currentOutputSnapshotRaw)}var u=o.val(!0),c=t;e.server_.put(c.toString(),u,function(n){rg(e,"transaction put response",{path:c.toString(),status:n});var a=[];if("ok"===n){for(var o=[],i=function(t){r[t].status=2,a=a.concat(wd(e.serverSyncTree_,r[t].currentWriteId)),r[t].onComplete&&o.push(function(){return r[t].onComplete(null,!0,r[t].currentOutputSnapshotResolved)}),r[t].unwatcher()},$=0;$<r.length;$++)i($);Tj(e,Nj(e.transactionQueueTree_,t)),Sj(e,e.transactionQueueTree_),Qb(e.eventQueue_,t,a);for($=0;$<o.length;$++)jg(o[$])}else{if("datastale"===n)for($=0;$<r.length;$++)3===r[$].status?r[$].status=4:r[$].status=0;else{Db("transaction at "+c.toString()+" failed: "+n);for($=0;$<r.length;$++)r[$].status=4,r[$].abortReason=n}sg(e,t)}},i)}function sg(e,t){var r=wq(e,t),n=Wg(r);return yA(e,xq(e,r),n),n}function yA(e,t,r){if(0!==t.length){for(var n=[],a=[],o=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),i=function(i){var $,s,l=t[i],u=Eb(r,l.path),c=!1;if(bb(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,$=l.abortReason,a=a.concat(wd(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=hA)c=!0,$="maxretry",a=a.concat(wd(e.serverSyncTree_,l.currentWriteId,!0));else{var v=Hl(e,l.path,o);l.currentInputSnapshot=v;var p=t[i].update(v.val());if(void 0!==p){Yg("transaction failed: Data returned ",p,l.path);var h=ub(p);"object"==typeof p&&null!=p&&Hb(p,".priority")||(h=h.updatePriority(v.getPriority()));var d=l.currentWriteId,E=_g(e),M=wl(h,v,E);l.currentOutputSnapshotRaw=h,l.currentOutputSnapshotResolved=M,l.currentWriteId=Rj(e),o.splice(o.indexOf(d),1),a=(a=a.concat(ql(e.serverSyncTree_,l.path,M,l.currentWriteId,l.applyLocally))).concat(wd(e.serverSyncTree_,d,!0))}else c=!0,$="nodata",a=a.concat(wd(e.serverSyncTree_,l.currentWriteId,!0))}Qb(e.eventQueue_,r,a),a=[],c&&(t[i].status=2,s=t[i].unwatcher,setTimeout(s,Math.floor(0)),t[i].onComplete&&("nodata"===$?n.push(function(){return t[i].onComplete(null,!1,t[i].currentInputSnapshot)}):n.push(function(){return t[i].onComplete(new Error($),!1,null)})))},$=0;$<t.length;$++)i($);Tj(e,e.transactionQueueTree_);for($=0;$<n.length;$++)jg(n[$]);Sj(e,e.transactionQueueTree_)}}function wq(e,t){var r,n=e.transactionQueueTree_;for(r=fb(t);null!==r&&void 0===Pd(n);)n=Nj(n,r),r=fb(t=ob(t));return n}function xq(e,t){var r=[];return yq(e,t,r),r.sort(function(e,t){return e.order-t.order}),r}function yq(e,t,r){var n=Pd(t);if(n)for(var a=0;a<n.length;a++)r.push(n[a]);Oj(t,function(t){yq(e,t,r)})}function Tj(e,t){var r=Pd(t);if(r){for(var n=0,a=0;a<r.length;a++)2!==r[a].status&&(r[n]=r[a],n++);r.length=n,zl(t,r.length>0?r:void 0)}Oj(t,function(t){Tj(e,t)})}function Il(e,t){var r=Wg(wq(e,t)),n=Nj(e.transactionQueueTree_,t);return Yz(n,function(t){Jl(e,t)}),Jl(e,n),lq(n,function(t){Jl(e,t)}),r}function Jl(e,t){var r=Pd(t);if(r){for(var n=[],a=[],o=-1,i=0;i<r.length;i++)3===r[i].status||(1===r[i].status?(bb(o===i-1,"All SENT items should be at beginning of queue."),o=i,r[i].status=3,r[i].abortReason="set"):(bb(0===r[i].status,"Unexpected transaction status in abort"),r[i].unwatcher(),a=a.concat(wd(e.serverSyncTree_,r[i].currentWriteId,!0)),r[i].onComplete&&n.push(r[i].onComplete.bind(null,new Error("set"),!1,null))));-1===o?zl(t,void 0):r.length=o+1,Qb(e.eventQueue_,Wg(t),a);for(i=0;i<n.length;i++)jg(n[i])}}function zA(e){for(var t="",r=e.split("/"),n=0;n<r.length;n++)if(r[n].length>0){var a=r[n];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(o){}t+="/"+a}return t}function AA(e){var t,r,n={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var a=Nb(e.split("&")),o=a.next();!o.done;o=a.next()){var i=o.value;if(0!==i.length){var $=i.split("=");2===$.length?n[decodeURIComponent($[0])]=decodeURIComponent($[1]):Db("Invalid query segment '"+i+"' in query '"+e+"'")}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}var Kl=function(e,t){var r=BA(e),n=r.namespace;"firebase.com"===r.domain&&id(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===r.domain||id("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||wx();var a="ws"===r.scheme||"wss"===r.scheme;return{repoInfo:new Jk(r.host,r.secure,n,t,a,"",n!==r.subdomain),path:new mb(r.pathString)}},BA=function(e){var t="",r="",n="",a="",o="",i=!0,$="https",s=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&($=e.substring(0,l-1),e=e.substring(l+2));var u=e.indexOf("/");-1===u&&(u=e.length);var c=e.indexOf("?");-1===c&&(c=e.length),t=e.substring(0,Math.min(u,c)),u<c&&(a=zA(e.substring(u,c)));var v=AA(e.substring(Math.min(e.length,c)));(l=t.indexOf(":"))>=0?(i="https"===$||"wss"===$,s=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())r="localhost";else if(p.split(".").length<=2)r=p;else{var h=t.indexOf(".");n=t.substring(0,h).toLowerCase(),r=t.substring(h+1),o=n}"ns"in v&&(o=v.ns)}return{host:t,port:s,domain:r,subdomain:n,secure:i,scheme:$,pathString:a,namespace:o}},zq=function(){function e(e,t,r,n){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=n}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+yb(this.snapshot.exportVal())},e}(),Aq=function(){function e(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Bq=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return bb(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),CA=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new Gb;return pA(this._repo,this._path,e.wrapCallback(function(){})),e.promise},e.prototype.remove=function(){Pb("OnDisconnect.remove",this._path);var e=new Gb;return uq(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise},e.prototype.set=function(e){Pb("OnDisconnect.set",this._path),cd("OnDisconnect.set",e,this._path,!1);var t=new Gb;return uq(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e.prototype.setWithPriority=function(e,t){Pb("OnDisconnect.setWithPriority",this._path),cd("OnDisconnect.setWithPriority",e,this._path,!1),Cl("OnDisconnect.setWithPriority",t,!1);var r=new Gb;return qA(this._repo,this._path,e,t,r.wrapCallback(function(){})),r.promise},e.prototype.update=function(e){Pb("OnDisconnect.update",this._path),nq("OnDisconnect.update",e,this._path,!1);var t=new Gb;return rA(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e}(),Rb=function(){function e(e,t,r,n){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=n}return Object.defineProperty(e.prototype,"key",{get:function(){return gb(this._path)?null:Qk(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new dd(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Ep(this._queryParams),t=Hk(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Ep(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=Lb(t))instanceof e))return!1;var r=this._repo===t._repo,n=Rk(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&n&&a},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+by(this._path)},e}();function Uj(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function yd(e){var t=null,r=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(r=e.getIndexEndValue()),e.getIndex()===ad){var n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==jd)throw new Error(n);if("string"!=typeof t)throw new Error(a)}if(e.hasEnd()){if(e.getIndexEndName()!==_b)throw new Error(n);if("string"!=typeof r)throw new Error(a)}}else if(e.getIndex()===qb){if(null!=t&&!Xg(t)||null!=r&&!Xg(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(bb(e.getIndex()instanceof Uk||e.getIndex()===Vk,"unknown index type."),null!=t&&"object"==typeof t||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Vj(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var dd=function(e){function t(t,r){return e.call(this,t,r,new Cp,!1)||this}return tb(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=pp(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(Rb),Wj=function(){function e(e,t,r){this._node=e,this.ref=t,this._index=r}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var r=new mb(t),n=Qd(this.ref,t);return new e(this._node.getChild(r),n,qb)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(n,a){return t(new e(a,Qd(r.ref,n),qb))})},e.prototype.hasChild=function(e){var t=new mb(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Cq(e,t){return(e=Lb(e))._checkNotDeleted("ref"),void 0!==t?Qd(e._root,t):e._root}function Dq(e,t){(e=Lb(e))._checkNotDeleted("refFromURL");var r=Kl(t,e._repo.repoInfo_.nodeAdmin);oq("refFromURL",r);var n=r.repoInfo;return e._repo.repoInfo_.isCustomHost()||n.host===e._repo.repoInfo_.host||id("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+e._repo.repoInfo_.host+")"),Cq(e,r.path.toString())}function Qd(e,t){return null===fb((e=Lb(e))._path)?dA("child","path",t,!1):$g("child","path",t,!1),new dd(e._repo,sb(e._path,t))}function DA(e,t){e=Lb(e),Pb("push",e._path),cd("push",t,e._path,!0);var r,n=rq(e._repo),a=Cy(n),o=Qd(e,a),i=Qd(e,a);return r=null!=t?Ll(i,t).then(function(){return i}):Promise.resolve(i),o.then=r.then.bind(r),o.catch=r.then.bind(r,void 0),o}function EA(e){return Pb("remove",e._path),Ll(e,null)}function Ll(e,t){e=Lb(e),Pb("set",e._path),cd("set",t,e._path,!1);var r=new Gb;return Fl(e._repo,e._path,t,null,r.wrapCallback(function(){})),r.promise}function FA(e,t){e=Lb(e),Pb("setPriority",e._path),Cl("setPriority",t,!1);var r=new Gb;return Fl(e._repo,sb(e._path,".priority"),t,null,r.wrapCallback(function(){})),r.promise}function GA(e,t,r){if(Pb("setWithPriority",e._path),cd("setWithPriority",t,e._path,!1),Cl("setWithPriority",r,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var n=new Gb;return Fl(e._repo,e._path,t,r,n.wrapCallback(function(){})),n.promise}function HA(e,t){nq("update",t,e._path,!1);var r=new Gb;return nA(e._repo,e._path,t,r.wrapCallback(function(){})),r.promise}function IA(e){return mA((e=Lb(e))._repo,e).then(function(t){return new Wj(t,new dd(e._repo,e._path),e._queryParams.getIndex())})}var Eq=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var r=t._queryParams.getIndex();return new zq("value",this,new Wj(e.snapshotNode,new dd(t._repo,t._path),r))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Aq(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),Fq=function(){function e(e){this.callbacks=e}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Hb(this.callbacks,t)},e.prototype.createCancelEvent=function(e,t){return this.callbacks.cancel.hasCancelCallback?new Aq(this,e,t):null},e.prototype.createEvent=function(e,t){bb(null!=e.childName,"Child events should have a childName.");var r=Qd(new dd(t._repo,t._path),e.childName),n=t._queryParams.getIndex();return new zq(e.type,this,new Wj(e.snapshotNode,r,n),e.prevName)},e.prototype.getEventRunner=function(e){if("cancel"===e.getEventType()){var t=this.callbacks.cancel;return function(){return t.onCancel(e.error)}}var r=this.callbacks[e.eventType];return function(){return r.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){var r=this;if(t instanceof e){if(!this.callbacks||!t.callbacks)return!0;var n=Object.keys(t.callbacks),a=Object.keys(this.callbacks),o=n.length;if(o===a.length){if(1===o){var i=n[0],$=a[0];return $===i&&(!t.callbacks[i]||!this.callbacks[$]||t.callbacks[i].matches(this.callbacks[$]))}return a.every(function(e){return t.callbacks[e].matches(r.callbacks[e])})}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks},e}();function aj(e,t,r,n,a){var o,i;if("object"==typeof n&&(i=void 0,a=n),"function"==typeof n&&(i=n),a&&a.onlyOnce){var $=r,s=function(t,r){$(t,r),Gl(e._repo,e,u)};s.userCallback=r.userCallback,s.context=r.context,r=s}var l=new Bq(r,i||void 0),u="value"===t?new Eq(l):new Fq(((o={})[t]=l,o));return sA(e._repo,e,u),function(){return Gl(e._repo,e,u)}}function Ml(e,t,r,n){return aj(e,"value",t,r,n)}function Gq(e,t,r,n){return aj(e,"child_added",t,r,n)}function Hq(e,t,r,n){return aj(e,"child_changed",t,r,n)}function Iq(e,t,r,n){return aj(e,"child_moved",t,r,n)}function Jq(e,t,r,n){return aj(e,"child_removed",t,r,n)}function Kq(e,t,r){var n=null,a=null,o=r?new Bq(r):null;"value"===t?n=new Eq(o):t&&(r&&((a={})[t]=o),n=new Fq(a)),Gl(e._repo,e,n)}var Xb=function(){return function(){}}(),Lq=function(e){function t(t,r){var n=e.call(this)||this;return n._value=t,n._key=r,n}return tb(t,e),t.prototype._apply=function(e){cd("endAt",this._value,e._path,!0);var t=Zk(e._queryParams,this._value,this._key);if(Vj(t),yd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Rb(e._repo,e._path,t,e._orderByCalled)},t}(Xb);function JA(e,t){return Zg("endAt","key",t,!0),new Lq(e,t)}var KA=function(e){function t(t,r){var n=e.call(this)||this;return n._value=t,n._key=r,n}return tb(t,e),t.prototype._apply=function(e){cd("endBefore",this._value,e._path,!1);var t=Jy(e._queryParams,this._value,this._key);if(Vj(t),yd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Rb(e._repo,e._path,t,e._orderByCalled)},t}(Xb);function LA(e,t){return Zg("endBefore","key",t,!0),new KA(e,t)}var Mq=function(e){function t(t,r){var n=e.call(this)||this;return n._value=t,n._key=r,n}return tb(t,e),t.prototype._apply=function(e){cd("startAt",this._value,e._path,!0);var t=Yk(e._queryParams,this._value,this._key);if(Vj(t),yd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Rb(e._repo,e._path,t,e._orderByCalled)},t}(Xb);function MA(e,t){return void 0===e&&(e=null),Zg("startAt","key",t,!0),new Mq(e,t)}var NA=function(e){function t(t,r){var n=e.call(this)||this;return n._value=t,n._key=r,n}return tb(t,e),t.prototype._apply=function(e){cd("startAfter",this._value,e._path,!1);var t=Iy(e._queryParams,this._value,this._key);if(Vj(t),yd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Rb(e._repo,e._path,t,e._orderByCalled)},t}(Xb);function OA(e,t){return Zg("startAfter","key",t,!0),new NA(e,t)}var PA=function(e){function t(t){var r=e.call(this)||this;return r._limit=t,r}return tb(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Rb(e._repo,e._path,Gy(e._queryParams,this._limit),e._orderByCalled)},t}(Xb);function QA(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new PA(e)}var RA=function(e){function t(t){var r=e.call(this)||this;return r._limit=t,r}return tb(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Rb(e._repo,e._path,Hy(e._queryParams,this._limit),e._orderByCalled)},t}(Xb);function SA(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new RA(e)}var TA=function(e){function t(t){var r=e.call(this)||this;return r._path=t,r}return tb(t,e),t.prototype._apply=function(e){Uj(e,"orderByChild");var t=new mb(this._path);if(gb(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var r=new Uk(t),n=Aj(e._queryParams,r);return yd(n),new Rb(e._repo,e._path,n,!0)},t}(Xb);function UA(e){if("$key"===e)throw new Error("orderByChild: \"$key\" is invalid.  Use orderByKey() instead.");if("$priority"===e)throw new Error("orderByChild: \"$priority\" is invalid.  Use orderByPriority() instead.");if("$value"===e)throw new Error("orderByChild: \"$value\" is invalid.  Use orderByValue() instead.");return $g("orderByChild","path",e,!1),new TA(e)}var VA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),t.prototype._apply=function(e){Uj(e,"orderByKey");var t=Aj(e._queryParams,ad);return yd(t),new Rb(e._repo,e._path,t,!0)},t}(Xb);function WA(){return new VA}var XA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),t.prototype._apply=function(e){Uj(e,"orderByPriority");var t=Aj(e._queryParams,qb);return yd(t),new Rb(e._repo,e._path,t,!0)},t}(Xb);function YA(){return new XA}var ZA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tb(t,e),t.prototype._apply=function(e){Uj(e,"orderByValue");var t=Aj(e._queryParams,Vk);return yd(t),new Rb(e._repo,e._path,t,!0)},t}(Xb);function $A(){return new ZA}var _A=function(e){function t(t,r){var n=e.call(this)||this;return n._value=t,n._key=r,n}return tb(t,e),t.prototype._apply=function(e){if(cd("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lq(this._value,this._key)._apply(new Mq(this._value,this._key)._apply(e))},t}(Xb);function aB(e,t){return Zg("equalTo","key",t,!0),new _A(e,t)}function Yb(e){for(var t,r,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var o=Lb(e);try{for(var i=Nb(n),$=i.next();!$.done;$=i.next()){o=$.value._apply(o)}}catch(s){t={error:s}}finally{try{$&&!$.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o}zz(dd),Ez(dd);var bB="FIREBASE_DATABASE_EMULATOR_HOST",Nl={},cB=!1;function dB(e,t,r){e.repoInfo_=new Jk(t+":"+r,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),e.repoInfo_.nodeAdmin&&(e.authTokenProvider_=new Tm)}function Nq(e,t,r,n){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||id("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cb("Using default host for project ",e.options.projectId),a=e.options.projectId+"-default-rtdb.firebaseio.com");var o,i=Kl(a,n),$=i.repoInfo,s=void 0;void 0!==rj&&(s=rj.env[bB]),s?(o=!0,a="http://"+s+"?ns="+$.namespace,$=(i=Kl(a,n)).repoInfo):o=!i.repoInfo.secure;var l=n&&o?new Tm:new Ex(e.name,e.options,t);oq("Invalid Firebase Database URL",i),gb(i.path)||id("Database URL must point to the root of a Firebase Database (not including a child path).");var u=fB($,e,l);return new hB(u,e)}function eB(e,t){var r=Nl[t];r&&r[e.key]===e||id("Database "+t+"("+e.repoInfo_+") has already been deleted."),vq(e),delete r[e.key]}function fB(e,t,r){var n=Nl[t.name];n||(n={},Nl[t.name]=n);var a=n[e.toURLString()];return a&&id("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new iA(e,cB,r),n[e.toURLString()]=a,a}function gB(e){cB=e}var hB=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(jA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new dd(this._repo,lb())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._checkNotDeleted("delete"),eB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&id("Cannot call "+e+" on a deleted database.")},e}();function iB(e,t,r){(e=Lb(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&id("Cannot call useEmulator() after instance has already been initialized."),dB(e._repo,t,r)}function jB(e){(e=Lb(e))._checkNotDeleted("goOffline"),vq(e._repo)}function kB(e){(e=Lb(e))._checkNotDeleted("goOnline"),tA(e._repo)}function lB(e,t){Pm(e,t)}var mB={".sv":"timestamp"};function nB(){return mB}function oB(e){return{".sv":{increment:e}}}var pB=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function qB(e,t,r){var n;if(e=Lb(e),Pb("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var a=null===(n=null==r?void 0:r.applyLocally)||void 0===n||n,o=new Gb,i=Ml(e,function(){});return wA(e._repo,e._path,t,function(t,r,n){var a=null;t?o.reject(t):(a=new Wj(n,new dd(e._repo,e._path),qb),o.resolve(new pB(r,a)))},i,a),o.promise}var rB=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){cb("OnDisconnect.cancel",0,1,arguments.length),Ab("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.remove=function(e){cb("OnDisconnect.remove",0,1,arguments.length),Ab("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.set=function(e,t){cb("OnDisconnect.set",1,2,arguments.length),Ab("OnDisconnect.set","onComplete",t,!0);var r=this._delegate.set(e);return t&&r.then(function(){return t(null)},function(e){return t(e)}),r},e.prototype.setWithPriority=function(e,t,r){cb("OnDisconnect.setWithPriority",2,3,arguments.length),Ab("OnDisconnect.setWithPriority","onComplete",r,!0);var n=this._delegate.setWithPriority(e,t);return r&&n.then(function(){return r(null)},function(e){return r(e)}),n},e.prototype.update=function(e,t){if(cb("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var r={},n=0;n<e.length;++n)r[""+n]=e[n];e=r,Db("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ab("OnDisconnect.update","onComplete",t,!0);var a=this._delegate.update(e);return t&&a.then(function(){return t(null)},function(e){return t(e)}),a},e}(),sB=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return cb("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),bj=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return cb("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return cb("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return cb("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return cb("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return cb("DataSnapshot.child",0,1,arguments.length),t=String(t),$g("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return cb("DataSnapshot.hasChild",1,1,arguments.length),$g("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return cb("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var r=this;return cb("DataSnapshot.forEach",1,1,arguments.length),Ab("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(n){return t(new e(r._database,n))})},e.prototype.hasChildren=function(){return cb("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return cb("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return cb("DataSnapshot.ref",0,0,arguments.length),new Rd(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Oq=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,r,n,a){var o,i=this;cb("Query.on",2,4,arguments.length),Ab("Query.on","callback",r,!1);var $=e.getCancelAndContextArgs_("Query.on",n,a),s=function(e,t){r.call($.context,new bj(i.database,e),t)};s.userCallback=r,s.context=$.context;var l=null===(o=$.cancel)||void 0===o?void 0:o.bind($.context);switch(t){case"value":return Ml(this._delegate,s,l),r;case"child_added":return Gq(this._delegate,s,l),r;case"child_removed":return Jq(this._delegate,s,l),r;case"child_changed":return Hq(this._delegate,s,l),r;case"child_moved":return Iq(this._delegate,s,l),r;default:throw new Error(Ib("Query.on","eventType")+"must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".");}},e.prototype.off=function(e,t,r){if(cb("Query.off",0,3,arguments.length),cA("Query.off",e,!0),Ab("Query.off","callback",t,!0),zm("Query.off","context",r,!0),t){var n=function(){};n.userCallback=t,n.context=r,Kq(this._delegate,e,n)}else Kq(this._delegate,e)},e.prototype.get=function(){var e=this;return IA(this._delegate).then(function(t){return new bj(e.database,t)})},e.prototype.once=function(t,r,n,a){var o=this;cb("Query.once",1,4,arguments.length),Ab("Query.once","callback",r,!0);var i=e.getCancelAndContextArgs_("Query.on",n,a),$=new Gb,s=function(e,t){var n=new bj(o.database,e);r&&r.call(i.context,n,t),$.resolve(n)};s.userCallback=r,s.context=i.context;var l=function(e){i.cancel&&i.cancel.call(i.context,e),$.reject(e)};switch(t){case"value":Ml(this._delegate,s,l,{onlyOnce:!0});break;case"child_added":Gq(this._delegate,s,l,{onlyOnce:!0});break;case"child_removed":Jq(this._delegate,s,l,{onlyOnce:!0});break;case"child_changed":Hq(this._delegate,s,l,{onlyOnce:!0});break;case"child_moved":Iq(this._delegate,s,l,{onlyOnce:!0});break;default:throw new Error(Ib("Query.once","eventType")+"must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".");}return $.promise},e.prototype.limitToFirst=function(t){return cb("Query.limitToFirst",1,1,arguments.length),new e(this.database,Yb(this._delegate,QA(t)))},e.prototype.limitToLast=function(t){return cb("Query.limitToLast",1,1,arguments.length),new e(this.database,Yb(this._delegate,SA(t)))},e.prototype.orderByChild=function(t){return cb("Query.orderByChild",1,1,arguments.length),new e(this.database,Yb(this._delegate,UA(t)))},e.prototype.orderByKey=function(){return cb("Query.orderByKey",0,0,arguments.length),new e(this.database,Yb(this._delegate,WA()))},e.prototype.orderByPriority=function(){return cb("Query.orderByPriority",0,0,arguments.length),new e(this.database,Yb(this._delegate,YA()))},e.prototype.orderByValue=function(){return cb("Query.orderByValue",0,0,arguments.length),new e(this.database,Yb(this._delegate,$A()))},e.prototype.startAt=function(t,r){return void 0===t&&(t=null),cb("Query.startAt",0,2,arguments.length),new e(this.database,Yb(this._delegate,MA(t,r)))},e.prototype.startAfter=function(t,r){return void 0===t&&(t=null),cb("Query.startAfter",0,2,arguments.length),new e(this.database,Yb(this._delegate,OA(t,r)))},e.prototype.endAt=function(t,r){return void 0===t&&(t=null),cb("Query.endAt",0,2,arguments.length),new e(this.database,Yb(this._delegate,JA(t,r)))},e.prototype.endBefore=function(t,r){return void 0===t&&(t=null),cb("Query.endBefore",0,2,arguments.length),new e(this.database,Yb(this._delegate,LA(t,r)))},e.prototype.equalTo=function(t,r){return cb("Query.equalTo",1,2,arguments.length),new e(this.database,Yb(this._delegate,aB(t,r)))},e.prototype.toString=function(){return cb("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return cb("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(cb("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,r){var n={cancel:void 0,context:void 0};if(t&&r)n.cancel=t,Ab(e,"cancel",n.cancel,!0),n.context=r,zm(e,"context",n.context,!0);else if(t)if("object"==typeof t&&null!==t)n.context=t;else{if("function"!=typeof t)throw new Error(Ib(e,"cancelOrContext")+" must either be a cancel callback or a context object.");n.cancel=t}return n},Object.defineProperty(e.prototype,"ref",{get:function(){return new Rd(this.database,new dd(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Rd=function(e){function t(t,r){var n=e.call(this,t,new Rb(r._repo,r._path,new Cp(),!1))||this;return n.database=t,n._delegate=r,n}return tb(t,e),t.prototype.getKey=function(){return cb("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return cb("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,Qd(this._delegate,e))},t.prototype.getParent=function(){cb("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return cb("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){cb("Reference.set",1,2,arguments.length),Ab("Reference.set","onComplete",t,!0);var r=Ll(this._delegate,e);return t&&r.then(function(){return t(null)},function(e){return t(e)}),r},t.prototype.update=function(e,t){if(cb("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var r={},n=0;n<e.length;++n)r[""+n]=e[n];e=r,Db("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pb("Reference.update",this._delegate._path),Ab("Reference.update","onComplete",t,!0);var a=HA(this._delegate,e);return t&&a.then(function(){return t(null)},function(e){return t(e)}),a},t.prototype.setWithPriority=function(e,t,r){cb("Reference.setWithPriority",2,3,arguments.length),Ab("Reference.setWithPriority","onComplete",r,!0);var n=GA(this._delegate,e,t);return r&&n.then(function(){return r(null)},function(e){return r(e)}),n},t.prototype.remove=function(e){cb("Reference.remove",0,1,arguments.length),Ab("Reference.remove","onComplete",e,!0);var t=EA(this._delegate);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},t.prototype.transaction=function(e,t,r){var n=this;cb("Reference.transaction",1,3,arguments.length),Ab("Reference.transaction","transactionUpdate",e,!1),Ab("Reference.transaction","onComplete",t,!0),eA("Reference.transaction","applyLocally",r,!0);var a=qB(this._delegate,e,{applyLocally:r}).then(function(e){return new sB(e.committed,new bj(n.database,e.snapshot))});return t&&a.then(function(e){return t(null,e.committed,e.snapshot)},function(e){return t(e,!1,null)}),a},t.prototype.setPriority=function(e,t){cb("Reference.setPriority",1,2,arguments.length),Ab("Reference.setPriority","onComplete",t,!0);var r=FA(this._delegate,e);return t&&r.then(function(){return t(null)},function(e){return t(e)}),r},t.prototype.push=function(e,r){var n=this;cb("Reference.push",0,2,arguments.length),Ab("Reference.push","onComplete",r,!0);var a=DA(this._delegate,e),o=a.then(function(e){return new t(n.database,e)});r&&o.then(function(){return r(null)},function(e){return r(e)});var i=new t(this.database,a);return i.then=o.then.bind(o),i.catch=o.catch.bind(o,void 0),i},t.prototype.onDisconnect=function(){return Pb("Reference.onDisconnect",this._delegate._path),new rB(new CA(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Oq),Xj=function(){function e(e,t){var r=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return e.prototype.useEmulator=function(e,t){iB(this._delegate,e,t)},e.prototype.ref=function(e){if(cb("database.ref",0,1,arguments.length),e instanceof Rd){var t=Dq(this._delegate,e.toString());return new Rd(this,t)}t=Cq(this._delegate,e);return new Rd(this,t)},e.prototype.refFromURL=function(e){cb("database.refFromURL",1,1,arguments.length);var t=Dq(this._delegate,e);return new Rd(this,t)},e.prototype.goOffline=function(){return cb("database.goOffline",0,0,arguments.length),jB(this._delegate)},e.prototype.goOnline=function(){return cb("database.goOnline",0,0,arguments.length),kB(this._delegate)},e.ServerValue={TIMESTAMP:nB(),increment:function(e){return oB(e)}},e}(),tB=function(){Kd.forceDisallow(),Nk.forceAllow()},uB=function(){Nk.forceDisallow()},vB=function(){return Kd.isAvailable()},wB=function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},xB=function(e,t){uA(e._delegate._repo,t)},yB=function(e,t){vA(e._delegate._repo,t)},zB=function(e){return e._delegate._repo.dataUpdateCount},AB=function(e,t){return kA(e._delegate._repo,t)};function BB(e){var t=e.app,r=e.url,n=e.version,a=e.customAuthImpl,o=e.namespace,i=e.nodeAdmin,$=void 0!==i&&i;cp(n);var s=new Am("auth-internal",new Bm("database-standalone"));return s.setComponent(new Fg("auth-internal",function(){return a},"PRIVATE")),{instance:new Xj(Nq(t,s,r,$),t),namespace:o}}var CB=Object.freeze({__proto__:null,forceLongPolling:tB,forceWebSockets:uB,isWebSocketsAvailable:vB,setSecurityDebugCallback:wB,stats:xB,statsIncrementCounter:yB,dataUpdateCount:zB,interceptServerData:AB,initStandalone:BB}),DB=Md;Md.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Md.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var EB=jp,FB=function(e){var t=Md.prototype.put;return Md.prototype.put=function(r,n,a,o){void 0!==o&&(o=e()),t.call(this,r,n,a,o)},function(){Md.prototype.put=t}},GB=Jk,HB=function(e){return e._delegate._queryIdentifier},IB=function(e){gB(e)},JB=Object.freeze({__proto__:null,DataConnection:DB,RealTimeConnection:EB,hijackHash:FB,ConnectionTarget:GB,queryIdentifier:HB,forceRestClient:IB}),KB=Xj.ServerValue;function LB(e){cp(e.SDK_VERSION);var t=e.INTERNAL.registerComponent(new Fg("database",function(e,t){var r=t.instanceIdentifier,n=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal");return new Xj(Nq(n,a,r),n)},"PUBLIC").setServiceProps({Reference:Rd,Query:Oq,Database:Xj,DataSnapshot:bj,enableLogging:lB,INTERNAL:CB,ServerValue:KB,TEST_ACCESS:JB}).setMultipleInstances(!0));e.registerVersion(rx,sx),$b()&&t}LB(db);var Sb={},Pq=(Hd(),Fd),MB=TB;Sb.formatArgs=MB;var NB=VB;Sb.save=NB;var OB=WB;Sb.load=OB;var PB=SB;Sb.useColors=PB;var Yj=XB();Sb.storage=Yj;var QB=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}();Sb.destroy=QB;var RB=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function SB(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function TB(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Sb.humanize(this.diff),this.useColors){var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var r=0,t=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(t=r))}),e.splice(t,0,o)}}Sb.colors=RB;var UB=console.debug||console.log||function(){};function VB(e){try{e?Yj.setItem("debug",e):Yj.removeItem("debug")}catch(o){}}function WB(){var e;try{e=Yj.getItem("debug")}catch(o){}return!e&&void 0!==Pq&&"env"in Pq&&(e=void 0),e}function XB(){try{return localStorage}catch(e){}}var YB,tg,ug,vg,Sd,ZB,$B,_B=false;function aC($){if(!(($=String($)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(r){var a=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*$B;case"weeks":case"week":case"w":return a*ZB;case"days":case"day":case"d":return a*Sd;case"hours":case"hour":case"hrs":case"hr":case"h":return a*vg;case"minutes":case"minute":case"mins":case"min":case"m":return a*ug;case"seconds":case"second":case"secs":case"sec":case"s":return a*tg;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return;}}}}function bC($){var r=Math.abs($);return r>=Sd?Math.round($/Sd)+"d":r>=vg?Math.round($/vg)+"h":r>=ug?Math.round($/ug)+"m":r>=tg?Math.round($/tg)+"s":$+"ms"}function cC($){var r=Math.abs($);return r>=Sd?Zj($,r,Sd,"day"):r>=vg?Zj($,r,vg,"hour"):r>=ug?Zj($,r,ug,"minute"):r>=tg?Zj($,r,tg,"second"):$+" ms"}function Zj($,r,a,s){var e=r>=1.5*a;return Math.round($/a)+" "+s+(e?"s":"")}function dC(){if(_B)return;_B=true;YB={};tg=1e3;ug=60*tg;vg=60*ug;Sd=24*vg;ZB=7*Sd;$B=365.25*Sd;YB=function($,r){r=r||{};var a=typeof $;if("string"===a&&$.length>0)return aC($);if("number"===a&&isFinite($))return r.long?cC($):bC($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))}}var eC={};function Qq(r){return iC(r)||hC(r)||gC(r)||fC()}function fC(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gC(r,e){if(r){if("string"==typeof r)return Ol(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ol(r,e):void 0}}function hC(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function iC(r){if(Array.isArray(r))return Ol(r)}function Ol(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function jC(r){function e(r){var n,a=null;function o(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];if(o.enabled){var s=o,i=Number(new Date),u=i-(n||i);s.diff=u,s.prev=n,s.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return"%";l++;var a=e.formatters[n];if("function"==typeof a){var o=t[l];r=a.call(s,o),t.splice(l,1),l--}return r}),e.formatArgs.call(s,t),(s.log||e.log).apply(s,t)}}return o.namespace=r,o.useColors=e.useColors(),o.color=e.selectColor(r),o.extend=t,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===a?e.enabled(r):a},set:function(r){a=r}}),"function"==typeof e.init&&e.init(o),o}function t(r,t){var n=e(this.namespace+(void 0===t?":":t)+r);return n.log=this.log,n}function n(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(r){if(r instanceof Error)return r.stack||r.message;return r},e.disable=function(){var r=[].concat(Qq(e.names.map(n)),Qq(e.skips.map(n).map(function(r){return"-"+r}))).join(",");return e.enable(""),r},e.enable=function(r){var t;e.save(r),e.names=[],e.skips=[];var n=("string"==typeof r?r:"").split(/[\s,]+/),a=n.length;for(t=0;t<a;t++)n[t]&&("-"===(r=n[t].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+r.substr(1)+"$")):e.names.push(new RegExp("^"+r+"$")))},e.enabled=function(r){if("*"===r[r.length-1])return!0;var t,n;for(t=0,n=e.skips.length;t<n;t++)if(e.skips[t].test(r))return!1;for(t=0,n=e.names.length;t<n;t++)if(e.names[t].test(r))return!0;return!1},e.humanize=(dC(),YB),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(r).forEach(function(t){e[t]=r[t]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n),t|=0;return e.colors[Math.abs(t)%e.colors.length]},e.enable(e.load()),e}eC=jC;Sb.log=UB,Sb=eC(Sb);var{formatters:kC}=Sb;kC.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};var Rq={};Rq=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null};var $j,lC,mC,nC,oC=false;function Sq($){var r=$.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=$.indexOf("=");return-1===p&&(p=r),[p,p===r?0:4-p%4]}function pC($){var r=Sq($),p=r[0],o=r[1];return 3*(p+o)/4-o}function qC($,r,p){return 3*(r+p)/4-p}function rC($){var r,p,o=Sq($),e=o[0],y=o[1],h=new $yh9p$var$Arr(qC($,e,y)),a=0,t=y>0?e-4:e;for(p=0;p<t;p+=4)r=$yh9p$var$revLookup[$.charCodeAt(p)]<<18|$yh9p$var$revLookup[$.charCodeAt(p+1)]<<12|$yh9p$var$revLookup[$.charCodeAt(p+2)]<<6|$yh9p$var$revLookup[$.charCodeAt(p+3)],h[a++]=r>>16&255,h[a++]=r>>8&255,h[a++]=255&r;return 2===y&&(r=$yh9p$var$revLookup[$.charCodeAt(p)]<<2|$yh9p$var$revLookup[$.charCodeAt(p+1)]>>4,h[a++]=255&r),1===y&&(r=$yh9p$var$revLookup[$.charCodeAt(p)]<<10|$yh9p$var$revLookup[$.charCodeAt(p+1)]<<4|$yh9p$var$revLookup[$.charCodeAt(p+2)]>>2,h[a++]=r>>8&255,h[a++]=255&r),h}function sC($){return $yh9p$var$lookup[$>>18&63]+$yh9p$var$lookup[$>>12&63]+$yh9p$var$lookup[$>>6&63]+$yh9p$var$lookup[63&$]}function tC($,r,p){for(var o,e=[],y=r;y<p;y+=3)o=($[y]<<16&16711680)+($[y+1]<<8&65280)+(255&$[y+2]),e.push(sC(o));return e.join("")}function uC($){for(var r,p=$.length,o=p%3,e=[],y=0,h=p-o;y<h;y+=16383)e.push(tC($,y,y+16383>h?h:y+16383));return 1===o?(r=$[p-1],e.push($yh9p$var$lookup[r>>2]+$yh9p$var$lookup[r<<4&63]+"==")):2===o&&(r=($[p-2]<<8)+$[p-1],e.push($yh9p$var$lookup[r>>10]+$yh9p$var$lookup[r>>4&63]+$yh9p$var$lookup[r<<2&63]+"=")),e.join("")}function vC(){if(oC)return;oC=true;$j={};lC=pC;$j.byteLength=lC;mC=rC;$j.toByteArray=mC;nC=uC;$j.fromByteArray=nC;for(var $yh9p$var$lookup=[],$yh9p$var$revLookup=[],$yh9p$var$Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,$yh9p$var$code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$yh9p$var$i=0,$yh9p$var$len=$yh9p$var$code.length;$yh9p$var$i<$yh9p$var$len;++$yh9p$var$i)$yh9p$var$lookup[$yh9p$var$i]=$yh9p$var$code[$yh9p$var$i],$yh9p$var$revLookup[$yh9p$var$code.charCodeAt($yh9p$var$i)]=$yh9p$var$i;$yh9p$var$revLookup["-".charCodeAt(0)]=62,$yh9p$var$revLookup["_".charCodeAt(0)]=63}var Pl,wC,xC,yC=false;function zC(){if(yC)return;yC=true;Pl={};wC=function(t,r,o,a,$){var e,p,J=8*$-a-1,N=(1<<J)-1,h=N>>1,M=-7,w=o?$-1:0,f=o?-1:1,i=t[r+w];for(w+=f,e=i&(1<<-M)-1,i>>=-M,M+=J;M>0;e=256*e+t[r+w],w+=f,M-=8);for(p=e&(1<<-M)-1,e>>=-M,M+=a;M>0;p=256*p+t[r+w],w+=f,M-=8);if(0===e)e=1-h;else{if(e===N)return p?NaN:1/0*(i?-1:1);p+=Math.pow(2,a),e-=h}return(i?-1:1)*p*Math.pow(2,e-a)};Pl.read=wC;xC=function(t,r,o,a,$,e){var p,J,N,h=8*e-$-1,M=(1<<h)-1,w=M>>1,f=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,i=a?0:e-1,g=a?1:-1,s=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(J=isNaN(r)?1:0,p=M):(p=Math.floor(Math.log(r)/Math.LN2),r*(N=Math.pow(2,-p))<1&&(p--,N*=2),(r+=p+w>=1?f/N:f*Math.pow(2,1-w))*N>=2&&(p++,N/=2),p+w>=M?(J=0,p=M):p+w>=1?(J=(r*N-1)*Math.pow(2,$),p+=w):(J=r*Math.pow(2,w-1)*Math.pow(2,$),p=0));$>=8;t[o+i]=255&J,i+=g,J/=256,$-=8);for(p=p<<$|J,h+=$;h>0;t[o+i]=255&p,i+=g,p/=256,h-=8);t[o+i-g]|=128*s};Pl.write=xC}var AC,BC,CC=false;function DC(){if(CC)return;CC=true;AC={};BC={}.toString;AC=Array.isArray||function(r){return"[object Array]"==BC.call(r)}}var Zb,Ql,wg,Tq,EC,FC,Uq,GC,Vq,HC,IC=false;function JC(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function _j(){return ab.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ld(e,r){if(_j()<r)throw new RangeError("Invalid typed array length");return ab.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r)).__proto__=ab.prototype:(null===e&&(e=new ab(r)),e.length=r),e}function ab(e,r,t){if(!(ab.TYPED_ARRAY_SUPPORT||this instanceof ab))return new ab(e,r,t);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return Rl(this,e)}return Wq(this,e,r,t)}function Wq(e,r,t,$){if("number"==typeof r)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?MC(e,r,t,$):"string"==typeof r?LC(e,r,t):NC(e,r)}function Xq(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(e<0)throw new RangeError("\"size\" argument must not be negative")}function KC(e,r,t,$){return Xq(r),r<=0?ld(e,r):void 0!==t?"string"==typeof $?ld(e,r).fill(t,$):ld(e,r).fill(t):ld(e,r)}function Rl(e,r){if(Xq(r),e=ld(e,r<0?0:0|Tl(r)),!ab.TYPED_ARRAY_SUPPORT)for(var t=0;t<r;++t)e[t]=0;return e}function LC(e,r,t){if("string"==typeof t&&""!==t||(t="utf8"),!ab.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var $=0|Yq(r,t),n=(e=ld(e,$)).write(r,t);return n!==$&&(e=e.slice(0,n)),e}function Sl(e,r){var t=r.length<0?0:0|Tl(r.length);e=ld(e,t);for(var $=0;$<t;$+=1)e[$]=255&r[$];return e}function MC(e,r,t,$){if(r.byteLength,t<0||r.byteLength<t)throw new RangeError("'offset' is out of bounds");if(r.byteLength<t+($||0))throw new RangeError("'length' is out of bounds");return r=void 0===t&&void 0===$?new Uint8Array(r):void 0===$?new Uint8Array(r,t):new Uint8Array(r,t,$),ab.TYPED_ARRAY_SUPPORT?(e=r).__proto__=ab.prototype:e=Sl(e,r),e}function NC(e,r){if(ab.isBuffer(r)){var t=0|Tl(r.length);return 0===(e=ld(e,t)).length?e:(r.copy(e,0,0,t),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||eD(r.length)?ld(e,0):Sl(e,r);if("Buffer"===r.type&&Tq(r.data))return Sl(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Tl(e){if(e>=_j())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_j().toString(16)+" bytes");return 0|e}function OC(e){return+e!=e&&(e=0),ab.alloc(+e)}function Yq(e,r){if(ab.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var $=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ck(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return ev(e).length;default:if($)return ck(e).length;r=(""+r).toLowerCase(),$=!0;}}function PC(e,r,t){var $=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return ZC(this,r,t);case"utf8":case"utf-8":return av(this,r,t);case"ascii":return XC(this,r,t);case"latin1":case"binary":return YC(this,r,t);case"base64":return VC(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $C(this,r,t);default:if($)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),$=!0;}}function Td(e,r,t){var $=e[r];e[r]=e[t],e[t]=$}function Zq(e,r,t,$,n){if(0===e.length)return-1;if("string"==typeof t?($=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(n)return-1;t=e.length-1}else if(t<0){if(!n)return-1;t=0}if("string"==typeof r&&(r=ab.from(r,$)),ab.isBuffer(r))return 0===r.length?-1:$q(e,r,t,$,n);if("number"==typeof r)return r&=255,ab.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):$q(e,[r],t,$,n);throw new TypeError("val must be string, number or Buffer")}function $q(e,r,t,$,n){var f,a=1,i=e.length,o=r.length;if(void 0!==$&&("ucs2"===($=String($).toLowerCase())||"ucs-2"===$||"utf16le"===$||"utf-16le"===$)){if(e.length<2||r.length<2)return-1;a=2,i/=2,o/=2,t/=2}function u(e,r){return 1===a?e[r]:e.readUInt16BE(r*a)}if(n){var p=-1;for(f=t;f<i;f++)if(u(e,f)===u(r,-1===p?0:f-p)){if(-1===p&&(p=f),f-p+1===o)return p*a}else-1!==p&&(f-=f-p),p=-1}else for(t+o>i&&(t=i-o),f=t;f>=0;f--){for(var s=!0,h=0;h<o;h++)if(u(e,f+h)!==u(r,h)){s=!1;break}if(s)return f}return-1}function QC(e,r,t,$){t=Number(t)||0;var n=e.length-t;$?($=Number($))>n&&($=n):$=n;var f=r.length;if(f%2!=0)throw new TypeError("Invalid hex string");$>f/2&&($=f/2);for(var a=0;a<$;++a){var i=parseInt(r.substr(2*a,2),16);if(isNaN(i))return a;e[t+a]=i}return a}function RC(e,r,t,$){return dk(ck(r,e.length-t),e,t,$)}function _q(e,r,t,$){return dk(cD(r),e,t,$)}function SC(e,r,t,$){return _q(e,r,t,$)}function TC(e,r,t,$){return dk(ev(r),e,t,$)}function UC(e,r,t,$){return dk(dD(r,e.length-t),e,t,$)}function VC(e,r,t){return 0===r&&t===e.length?Ql.fromByteArray(e):Ql.fromByteArray(e.slice(r,t))}function av(e,r,t){t=Math.min(e.length,t);for(var $=[],n=r;n<t;){var f,a,i,o,u=e[n],p=null,s=u>239?4:u>223?3:u>191?2:1;if(n+s<=t)switch(s){case 1:u<128&&(p=u);break;case 2:128==(192&(f=e[n+1]))&&(o=(31&u)<<6|63&f)>127&&(p=o);break;case 3:f=e[n+1],a=e[n+2],128==(192&f)&&128==(192&a)&&(o=(15&u)<<12|(63&f)<<6|63&a)>2047&&(o<55296||o>57343)&&(p=o);break;case 4:f=e[n+1],a=e[n+2],i=e[n+3],128==(192&f)&&128==(192&a)&&128==(192&i)&&(o=(15&u)<<18|(63&f)<<12|(63&a)<<6|63&i)>65535&&o<1114112&&(p=o);}null===p?(p=65533,s=1):p>65535&&(p-=65536,$.push(p>>>10&1023|55296),p=56320|1023&p),$.push(p),n+=s}return WC($)}function WC(e){var r=e.length;if(r<=Vq)return String.fromCharCode.apply(String,e);for(var t="",$=0;$<r;)t+=String.fromCharCode.apply(String,e.slice($,$+=Vq));return t}function XC(e,r,t){var $="";t=Math.min(e.length,t);for(var n=r;n<t;++n)$+=String.fromCharCode(127&e[n]);return $}function YC(e,r,t){var $="";t=Math.min(e.length,t);for(var n=r;n<t;++n)$+=String.fromCharCode(e[n]);return $}function ZC(e,r,t){var $=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>$)&&(t=$);for(var n="",f=r;f<t;++f)n+=bD(e[f]);return n}function $C(e,r,t){for(var $=e.slice(r,t),n="",f=0;f<$.length;f+=2)n+=String.fromCharCode($[f]+256*$[f+1]);return n}function Bb(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function Jb(e,r,t,$,n,f){if(!ab.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(r>n||r<f)throw new RangeError("\"value\" argument is out of bounds");if(t+$>e.length)throw new RangeError("Index out of range")}function ak(e,r,t,$){r<0&&(r=65535+r+1);for(var n=0,f=Math.min(e.length-t,2);n<f;++n)e[t+n]=(r&255<<8*($?n:1-n))>>>8*($?n:1-n)}function bk(e,r,t,$){r<0&&(r=4294967295+r+1);for(var n=0,f=Math.min(e.length-t,4);n<f;++n)e[t+n]=r>>>8*($?n:3-n)&255}function bv(e,r,t,$,n,f){if(t+$>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function cv(e,r,t,$,n){return n||bv(e,r,t,4,3.4028234663852886e38,-3.4028234663852886e38),wg.write(e,r,t,$,23,4),t+4}function dv(e,r,t,$,n){return n||bv(e,r,t,8,1.7976931348623157e308,-1.7976931348623157e308),wg.write(e,r,t,$,52,8),t+8}function _C(e){if((e=aD(e).replace(HC,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function aD(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function bD(e){return e<16?"0"+e.toString(16):e.toString(16)}function ck(e,r){var t;r=r||1/0;for(var $=e.length,n=null,f=[],a=0;a<$;++a){if((t=e.charCodeAt(a))>55295&&t<57344){if(!n){if(t>56319){(r-=3)>-1&&f.push(239,191,189);continue}if(a+1===$){(r-=3)>-1&&f.push(239,191,189);continue}n=t;continue}if(t<56320){(r-=3)>-1&&f.push(239,191,189),n=t;continue}t=65536+(n-55296<<10|t-56320)}else n&&(r-=3)>-1&&f.push(239,191,189);if(n=null,t<128){if((r-=1)<0)break;f.push(t)}else if(t<2048){if((r-=2)<0)break;f.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;f.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;f.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return f}function cD(e){for(var r=[],t=0;t<e.length;++t)r.push(255&e.charCodeAt(t));return r}function dD(e,r){for(var t,$,n,f=[],a=0;a<e.length&&!((r-=2)<0);++a)$=(t=e.charCodeAt(a))>>8,n=t%256,f.push(n),f.push($);return f}function ev(e){return Ql.toByteArray(_C(e))}function dk(e,r,t,$){for(var n=0;n<$&&!(n+t>=r.length||n>=e.length);++n)r[n+t]=e[n];return n}function eD(e){return e!=e}function Ud(){if(IC)return;IC=true;Zb={};Ql=(vC(),$j);wg=(zC(),Pl);Tq=(DC(),AC);EC=ab;Zb.Buffer=EC;FC=OC;Zb.SlowBuffer=FC;Uq=50;Zb.INSPECT_MAX_BYTES=Uq,ab.TYPED_ARRAY_SUPPORT=void 0!==Fb.TYPED_ARRAY_SUPPORT?Fb.TYPED_ARRAY_SUPPORT:JC();GC=_j();Zb.kMaxLength=GC,ab.poolSize=8192,ab._augment=function(e){return e.__proto__=ab.prototype,e},ab.from=function(e,r,t){return Wq(null,e,r,t)},ab.TYPED_ARRAY_SUPPORT&&(ab.prototype.__proto__=Uint8Array.prototype,ab.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&ab[Symbol.species]===ab&&Object.defineProperty(ab,Symbol.species,{value:null,configurable:!0})),ab.alloc=function(e,r,t){return KC(null,e,r,t)},ab.allocUnsafe=function(e){return Rl(null,e)},ab.allocUnsafeSlow=function(e){return Rl(null,e)},ab.isBuffer=function(e){return!(null==e||!e._isBuffer)},ab.compare=function(e,r){if(!ab.isBuffer(e)||!ab.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,$=r.length,n=0,f=Math.min(t,$);n<f;++n)if(e[n]!==r[n]){t=e[n],$=r[n];break}return t<$?-1:$<t?1:0},ab.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},ab.concat=function(e,r){if(!Tq(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return ab.alloc(0);var t;if(void 0===r)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var $=ab.allocUnsafe(r),n=0;for(t=0;t<e.length;++t){var f=e[t];if(!ab.isBuffer(f))throw new TypeError("\"list\" argument must be an Array of Buffers");f.copy($,n),n+=f.length}return $},ab.byteLength=Yq,ab.prototype._isBuffer=!0,ab.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Td(this,r,r+1);return this},ab.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Td(this,r,r+3),Td(this,r+1,r+2);return this},ab.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Td(this,r,r+7),Td(this,r+1,r+6),Td(this,r+2,r+5),Td(this,r+3,r+4);return this},ab.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?av(this,0,e):PC.apply(this,arguments)},ab.prototype.equals=function(e){if(!ab.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ab.compare(this,e)},ab.prototype.inspect=function(){var e="",r=Uq;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},ab.prototype.compare=function(e,r,t,$,n){if(!ab.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===t&&(t=e?e.length:0),void 0===$&&($=0),void 0===n&&(n=this.length),r<0||t>e.length||$<0||n>this.length)throw new RangeError("out of range index");if($>=n&&r>=t)return 0;if($>=n)return-1;if(r>=t)return 1;if(this===e)return 0;for(var f=(n>>>=0)-($>>>=0),a=(t>>>=0)-(r>>>=0),i=Math.min(f,a),o=this.slice($,n),u=e.slice(r,t),p=0;p<i;++p)if(o[p]!==u[p]){f=o[p],a=u[p];break}return f<a?-1:a<f?1:0},ab.prototype.includes=function(e,r,t){return-1!==this.indexOf(e,r,t)},ab.prototype.indexOf=function(e,r,t){return Zq(this,e,r,t,!0)},ab.prototype.lastIndexOf=function(e,r,t){return Zq(this,e,r,t,!1)},ab.prototype.write=function(e,r,t,$){if(void 0===r)$="utf8",t=this.length,r=0;else if(void 0===t&&"string"==typeof r)$=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(t)?(t|=0,void 0===$&&($="utf8")):($=t,t=void 0)}var n=this.length-r;if((void 0===t||t>n)&&(t=n),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var f=!1;;)switch($){case"hex":return QC(this,e,r,t);case"utf8":case"utf-8":return RC(this,e,r,t);case"ascii":return _q(this,e,r,t);case"latin1":case"binary":return SC(this,e,r,t);case"base64":return TC(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return UC(this,e,r,t);default:if(f)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),f=!0;}},ab.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Vq=4096;ab.prototype.slice=function(e,r){var t,$=this.length;if((e=~~e)<0?(e+=$)<0&&(e=0):e>$&&(e=$),(r=void 0===r?$:~~r)<0?(r+=$)<0&&(r=0):r>$&&(r=$),r<e&&(r=e),ab.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,r)).__proto__=ab.prototype;else{var n=r-e;t=new ab(n,void 0);for(var f=0;f<n;++f)t[f]=this[f+e]}return t},ab.prototype.readUIntLE=function(e,r,t){e|=0,r|=0,t||Bb(e,r,this.length);for(var $=this[e],n=1,f=0;++f<r&&(n*=256);)$+=this[e+f]*n;return $},ab.prototype.readUIntBE=function(e,r,t){e|=0,r|=0,t||Bb(e,r,this.length);for(var $=this[e+--r],n=1;r>0&&(n*=256);)$+=this[e+--r]*n;return $},ab.prototype.readUInt8=function(e,r){return r||Bb(e,1,this.length),this[e]},ab.prototype.readUInt16LE=function(e,r){return r||Bb(e,2,this.length),this[e]|this[e+1]<<8},ab.prototype.readUInt16BE=function(e,r){return r||Bb(e,2,this.length),this[e]<<8|this[e+1]},ab.prototype.readUInt32LE=function(e,r){return r||Bb(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ab.prototype.readUInt32BE=function(e,r){return r||Bb(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ab.prototype.readIntLE=function(e,r,t){e|=0,r|=0,t||Bb(e,r,this.length);for(var $=this[e],n=1,f=0;++f<r&&(n*=256);)$+=this[e+f]*n;return $>=(n*=128)&&($-=Math.pow(2,8*r)),$},ab.prototype.readIntBE=function(e,r,t){e|=0,r|=0,t||Bb(e,r,this.length);for(var $=r,n=1,f=this[e+--$];$>0&&(n*=256);)f+=this[e+--$]*n;return f>=(n*=128)&&(f-=Math.pow(2,8*r)),f},ab.prototype.readInt8=function(e,r){return r||Bb(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ab.prototype.readInt16LE=function(e,r){r||Bb(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},ab.prototype.readInt16BE=function(e,r){r||Bb(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},ab.prototype.readInt32LE=function(e,r){return r||Bb(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ab.prototype.readInt32BE=function(e,r){return r||Bb(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ab.prototype.readFloatLE=function(e,r){return r||Bb(e,4,this.length),wg.read(this,e,!0,23,4)},ab.prototype.readFloatBE=function(e,r){return r||Bb(e,4,this.length),wg.read(this,e,!1,23,4)},ab.prototype.readDoubleLE=function(e,r){return r||Bb(e,8,this.length),wg.read(this,e,!0,52,8)},ab.prototype.readDoubleBE=function(e,r){return r||Bb(e,8,this.length),wg.read(this,e,!1,52,8)},ab.prototype.writeUIntLE=function(e,r,t,$){(e=+e,r|=0,t|=0,$)||Jb(this,e,r,t,Math.pow(2,8*t)-1,0);var n=1,f=0;for(this[r]=255&e;++f<t&&(n*=256);)this[r+f]=e/n&255;return r+t},ab.prototype.writeUIntBE=function(e,r,t,$){(e=+e,r|=0,t|=0,$)||Jb(this,e,r,t,Math.pow(2,8*t)-1,0);var n=t-1,f=1;for(this[r+n]=255&e;--n>=0&&(f*=256);)this[r+n]=e/f&255;return r+t},ab.prototype.writeUInt8=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,1,255,0),ab.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},ab.prototype.writeUInt16LE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,2,65535,0),ab.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):ak(this,e,r,!0),r+2},ab.prototype.writeUInt16BE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,2,65535,0),ab.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):ak(this,e,r,!1),r+2},ab.prototype.writeUInt32LE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,4,4294967295,0),ab.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):bk(this,e,r,!0),r+4},ab.prototype.writeUInt32BE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,4,4294967295,0),ab.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):bk(this,e,r,!1),r+4},ab.prototype.writeIntLE=function(e,r,t,$){if(e=+e,r|=0,!$){var n=Math.pow(2,8*t-1);Jb(this,e,r,t,n-1,-n)}var f=0,a=1,i=0;for(this[r]=255&e;++f<t&&(a*=256);)e<0&&0===i&&0!==this[r+f-1]&&(i=1),this[r+f]=(e/a>>0)-i&255;return r+t},ab.prototype.writeIntBE=function(e,r,t,$){if(e=+e,r|=0,!$){var n=Math.pow(2,8*t-1);Jb(this,e,r,t,n-1,-n)}var f=t-1,a=1,i=0;for(this[r+f]=255&e;--f>=0&&(a*=256);)e<0&&0===i&&0!==this[r+f+1]&&(i=1),this[r+f]=(e/a>>0)-i&255;return r+t},ab.prototype.writeInt8=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,1,127,-128),ab.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},ab.prototype.writeInt16LE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,2,32767,-32768),ab.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):ak(this,e,r,!0),r+2},ab.prototype.writeInt16BE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,2,32767,-32768),ab.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):ak(this,e,r,!1),r+2},ab.prototype.writeInt32LE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,4,2147483647,-2147483648),ab.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):bk(this,e,r,!0),r+4},ab.prototype.writeInt32BE=function(e,r,t){return e=+e,r|=0,t||Jb(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ab.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):bk(this,e,r,!1),r+4},ab.prototype.writeFloatLE=function(e,r,t){return cv(this,e,r,!0,t)},ab.prototype.writeFloatBE=function(e,r,t){return cv(this,e,r,!1,t)},ab.prototype.writeDoubleLE=function(e,r,t){return dv(this,e,r,!0,t)},ab.prototype.writeDoubleBE=function(e,r,t){return dv(this,e,r,!1,t)},ab.prototype.copy=function(e,r,t,$){if(t||(t=0),$||0===$||($=this.length),r>=e.length&&(r=e.length),r||(r=0),$>0&&$<t&&($=t),$===t)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),e.length-r<$-t&&($=e.length-r+t);var n,f=$-t;if(this===e&&t<r&&r<$)for(n=f-1;n>=0;--n)e[n+r]=this[n+t];else if(f<1e3||!ab.TYPED_ARRAY_SUPPORT)for(n=0;n<f;++n)e[n+r]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+f),r);return f},ab.prototype.fill=function(e,r,t,$){if("string"==typeof e){if("string"==typeof r?($=r,r=0,t=this.length):"string"==typeof t&&($=t,t=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==$&&"string"!=typeof $)throw new TypeError("encoding must be a string");if("string"==typeof $&&!ab.isEncoding($))throw new TypeError("Unknown encoding: "+$)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var f;if(r>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"==typeof e)for(f=r;f<t;++f)this[f]=e;else{var a=ab.isBuffer(e)?e:ck(new ab(e,$).toString()),i=a.length;for(f=0;f<t-r;++f)this[f+r]=a[f%i]}return this};HC=/[^+\/0-9A-Za-z-_]/g}var fD,ek,fk,ed,gD=false;function fv(r,$){for(var f in r)$[f]=r[f]}function Vd(r,$,f){return ed(r,$,f)}function gv(){if(gD)return;gD=true;ek={};fk=(Ud(),Zb);ed=fk.Buffer;ed.from&&ed.alloc&&ed.allocUnsafe&&ed.allocUnsafeSlow?ek=fk:(fv(fk,ek),fD=Vd,ek.Buffer=fD),Vd.prototype=Object.create(ed.prototype),fv(ed,Vd),Vd.from=function(r,$,f){if("number"==typeof r)throw new TypeError("Argument must not be a number");return ed(r,$,f)},Vd.alloc=function(r,$,f){if("number"!=typeof r)throw new TypeError("Argument must be a number");var u=ed(r);return void 0!==$?"string"==typeof f?u.fill($,f):u.fill($):u.fill(0),u},Vd.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return ed(r)},Vd.allocUnsafeSlow=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return fk.SlowBuffer(r)}}var hv={},hD=(Hd(),Fd),Ul=65536,iD=4294967295;function jD(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var kD=(gv(),ek).Buffer,gk=Fb.crypto||Fb.msCrypto;function lD(r,$){if(r>iD)throw new RangeError("requested too many random bytes");var e=kD.allocUnsafe(r);if(r>0)if(r>Ul)for(var o=0;o<r;o+=Ul)gk.getRandomValues(e.slice(o,o+Ul));else gk.getRandomValues(e);return"function"==typeof $?hD.nextTick(function(){$(null,e)}):e}hv=gk&&gk.getRandomValues?lD:jD;var mD,iv,xg,jv,kv,nD,oD=false;function pD(e){console&&console.warn&&console.warn(e)}function nb(){nb.init.call(this)}function hk(e){if("function"!=typeof e)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof e)}function lv(e){return void 0===e._maxListeners?nb.defaultMaxListeners:e._maxListeners}function mv(e,t,r,n){var i,s,$;if(hk(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),$=s[t]),void 0===$)$=s[t]=r,++e._eventsCount;else if("function"==typeof $?$=s[t]=n?[r,$]:[$,r]:n?$.unshift(r):$.push(r),(i=lv(e))>0&&$.length>i&&!$.warned){$.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=$.length,pD(o)}return e}function qD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nv(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=qD.bind(n);return i.listener=r,n.wrapFn=i,i}function ov(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?sD(i):qv(i,i.length)}function pv(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function qv(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function rD(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function sD(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function tD(e,t){return new Promise(function(r,n){function i(){void 0!==s&&e.removeListener("error",s),r([].slice.call(arguments))}var s;"error"!==t&&(s=function(r){e.removeListener(t,i),n(r)},e.once("error",s)),e.once(t,i)})}function rv(){if(oD)return;oD=true;iv={};xg="object"==typeof Reflect?Reflect:null;jv=xg&&"function"==typeof xg.apply?xg.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};mD=xg&&"function"==typeof xg.ownKeys?xg.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};kv=Number.isNaN||function(e){return e!=e};(iv=nb).once=tD,nb.EventEmitter=nb,nb.prototype._events=void 0,nb.prototype._eventsCount=0,nb.prototype._maxListeners=void 0;nD=10;Object.defineProperty(nb,"defaultMaxListeners",{enumerable:!0,get:function(){return nD},set:function(e){if("number"!=typeof e||e<0||kv(e))throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received "+e+".");nD=e}}),nb.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},nb.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||kv(e))throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received "+e+".");return this._maxListeners=e,this},nb.prototype.getMaxListeners=function(){return lv(this)},nb.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var $=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw $.context=s,$}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)jv(o,this,t);else{var v=o.length,a=qv(o,v);for(r=0;r<v;++r)jv(a[r],this,t)}return!0},nb.prototype.addListener=function(e,t){return mv(this,e,t,!1)},nb.prototype.on=nb.prototype.addListener,nb.prototype.prependListener=function(e,t){return mv(this,e,t,!0)},nb.prototype.once=function(e,t){return hk(t),this.on(e,nv(this,e,t)),this},nb.prototype.prependOnceListener=function(e,t){return hk(t),this.prependListener(e,nv(this,e,t)),this},nb.prototype.removeListener=function(e,t){var r,n,i,s,$;if(hk(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){$=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():rD(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,$||t)}return this},nb.prototype.off=nb.prototype.removeListener,nb.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},nb.prototype.listeners=function(e){return ov(this,e,!0)},nb.prototype.rawListeners=function(e){return ov(this,e,!1)},nb.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):pv.call(e,t)},nb.prototype.listenerCount=pv,nb.prototype.eventNames=function(){return this._eventsCount>0?mD(this._events):[]}}var sv,uD=false;function tv(){if(uD)return;uD=true;sv={};sv=(rv(),iv).EventEmitter}var vD=false;function uv(){if(vD)return;vD=true}var wD,xD,ik,yD,Vl,zD,AD=false;function vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function BD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vv(Object(r),!0).forEach(function(t){CD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function CD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wv(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ED(e,t,r){return t&&wv(e.prototype,t),r&&wv(e,r),e}function FD(e,t,r){ik.prototype.copy.call(e,t,r)}function GD(){if(AD)return;AD=true;wD={};xD=(Ud(),Zb);ik=xD.Buffer;yD=(uv(),{});Vl=yD.inspect;zD=Vl&&Vl.custom||"inspect";wD=function(){function e(){DD(this,e),this.head=null,this.tail=null,this.length=0}return ED(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return ik.alloc(0);for(var t=ik.allocUnsafe(e>>>0),r=this.head,a=0;r;)FD(r.data,t,a),a+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,a=t.data;for(e-=a.length;t=t.next;){var n=t.data,i=e>n.length?n.length:e;if(i===n.length?a+=n:a+=n.slice(0,e),0===(e-=i)){i===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(i));break}++r}return this.length-=r,a}},{key:"_getBuffer",value:function(e){var t=ik.allocUnsafe(e),r=this.head,a=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,i=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,i),0===(e-=i)){i===n.length?(++a,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(i));break}++a}return this.length-=a,t}},{key:zD,value:function(e,t){return Vl(this,BD({},t,{depth:0,customInspect:!1}))}}]),e}()}var xv,Wd,HD=false;function ID(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Wd.nextTick(Wl,this,t)):Wd.nextTick(Wl,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted?Wd.nextTick(jk,r):(r._writableState.errorEmitted=!0,Wd.nextTick(yv,r,t)):Wd.nextTick(yv,r,t):e?(Wd.nextTick(jk,r),e(t)):Wd.nextTick(jk,r)}),this)}function yv(t,e){Wl(t,e),jk(t)}function jk(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function JD(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Wl(t,e){t.emit("error",e)}function KD(t,e){var r=t._readableState,a=t._writableState;r&&r.autoDestroy||a&&a.autoDestroy?t.destroy(e):t.emit("error",e)}function zv(){if(HD)return;HD=true;xv={};Wd=(Hd(),Fd);xv={destroy:ID,undestroy:JD,errorOrDestroy:KD}}var Xd,Av,LD=false;function MD(r){return(MD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function ND(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function Tb(r,e,t){t||(t=Error);var o=function(r){function t(t,o,n){return r.call(this,function(r,t,o){return"string"==typeof e?e:e(r,t,o)}(t,o,n))||this}return ND(t,r),t}(t);o.prototype.name=t.name,o.prototype.code=r,Av[r]=o}function Bv(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(r){return String(r)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:2===t?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}return"of ".concat(e," ").concat(String(r))}function OD(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function PD(r,e,t){return(void 0===t||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function QD(r,e,t){return"number"!=typeof t&&(t=0),!(t+e.length>r.length)&&-1!==r.indexOf(e,t)}function yg(){if(LD)return;LD=true;Xd={};Av={};Tb("ERR_INVALID_OPT_VALUE",function(r,e){return"The value \""+e+"\" is invalid for option \""+r+"\""},TypeError),Tb("ERR_INVALID_ARG_TYPE",function(r,e,t){var o,n;if("string"==typeof e&&OD(e,"not ")?(o="must not be",e=e.replace(/^not /,"")):o="must be",PD(r," argument"))n="The ".concat(r," ").concat(o," ").concat(Bv(e,"type"));else{var a=QD(r,".")?"property":"argument";n="The \"".concat(r,"\" ").concat(a," ").concat(o," ").concat(Bv(e,"type"))}return n+=". Received type ".concat(MD(t))},TypeError),Tb("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Tb("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),Tb("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Tb("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),Tb("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Tb("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Tb("ERR_STREAM_WRITE_AFTER_END","write after end"),Tb("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Tb("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),Tb("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Xd.codes=Av}var Cv,RD,SD=false;function TD(r,a,e){return null!=r.highWaterMark?r.highWaterMark:a?r[e]:null}function UD(r,a,e,$){var t=TD(a,$,e);if(null!=t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new RD($?e:"highWaterMark",t);return Math.floor(t)}return r.objectMode?16:16384}function Dv(){if(SD)return;SD=true;Cv={};RD=(yg(),Xd).codes.ERR_INVALID_OPT_VALUE;Cv={getHighWaterMark:UD}}var cj,VD=false;function dj(){if(VD)return;VD=true;cj={};cj="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}}}var WD,XD=false;function YD(r,o){if(Xl("noDeprecation"))return r;var e=!1;return function(){if(!e){if(Xl("throwDeprecation"))throw new Error(o);Xl("traceDeprecation")?console.trace(o):console.warn(o),e=!0}return r.apply(this,arguments)}}function Xl(r){try{if(!Fb.localStorage)return!1}catch(e){return!1}var o=Fb.localStorage[r];return null!=o&&"true"===String(o).toLowerCase()}function ZD(){if(XD)return;XD=true;WD={};WD=YD}var Yl,Ev,Yd,$D,Fv,kk,_D,Gv,Zl,aE,bE,zd,cE,dE,eE,fE,gE,hE,iE,jE,zg,kE=false;function Hv(e){var r=this;this.next=null,this.entry=null,this.finish=function(){zE(r,e)}}function lE(e){return kk.from(e)}function mE(e){return kk.isBuffer(e)||e instanceof _D}function nE(){}function ej(e,r,t){Yl=Yl||(Bg(),Ag),e=e||{},"boolean"!=typeof t&&(t=r instanceof Yl),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=bE(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=!1===e.decodeStrings;this.decodeStrings=!$,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){uE(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Hv(this)}function vb(e){var r=this instanceof(Yl=Yl||(Bg(),Ag));if(!r&&!Gv.call(vb,this))return new vb(e);this._writableState=new ej(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Fv.call(this)}function oE(e,r){var t=new iE;zg(e,t),Yd.nextTick(r,t)}function pE(e,r,t,$){var i;return null===t?i=new hE:"string"==typeof t||r.objectMode||(i=new cE("chunk",["string","Buffer"],t)),!i||(zg(e,i),Yd.nextTick($,i),!1)}function qE(e,r,t){return e.objectMode||!1===e.decodeStrings||"string"!=typeof r||(r=kk.from(r,t)),r}function rE(e,r,t,$,i,a){if(!t){var n=qE(r,$,i);$!==n&&(t=!0,i="buffer",$=n)}var o=r.objectMode?1:$.length;r.length+=o;var s=r.length<r.highWaterMark;if(s||(r.needDrain=!0),r.writing||r.corked){var E=r.lastBufferedRequest;r.lastBufferedRequest={chunk:$,encoding:i,isBuf:t,callback:a,next:null},E?E.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else $l(e,r,!1,o,$,i,a);return s}function $l(e,r,t,$,i,a,n){r.writelen=$,r.writecb=n,r.writing=!0,r.sync=!0,r.destroyed?r.onwrite(new gE("write")):t?e._writev(i,r.onwrite):e._write(i,a,r.onwrite),r.sync=!1}function sE(e,r,t,$,i){--r.pendingcb,t?(Yd.nextTick(i,$),Yd.nextTick(fj,e,r),e._writableState.errorEmitted=!0,zg(e,$)):(i($),e._writableState.errorEmitted=!0,zg(e,$),fj(e,r))}function tE(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function uE(e,r){var t=e._writableState,$=t.sync,i=t.writecb;if("function"!=typeof i)throw new eE;if(tE(t),r)sE(e,t,$,r,i);else{var a=Kv(t)||e.destroyed;a||t.corked||t.bufferProcessing||!t.bufferedRequest||Jv(e,t),$?Yd.nextTick(Iv,e,t,a,i):Iv(e,t,a,i)}}function Iv(e,r,t,$){t||vE(e,r),r.pendingcb--,$(),fj(e,r)}function vE(e,r){0===r.length&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function Jv(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var $=r.bufferedRequestCount,i=new Array($),a=r.corkedRequestsFree;a.entry=t;for(var n=0,o=!0;t;)i[n]=t,t.isBuf||(o=!1),t=t.next,n+=1;i.allBuffers=o,$l(e,r,!0,r.length,i,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new Hv(r),r.bufferedRequestCount=0}else{for(;t;){var s=t.chunk,E=t.encoding,w=t.callback;if($l(e,r,!1,r.objectMode?1:s.length,s,E,w),t=t.next,r.bufferedRequestCount--,r.writing)break}null===t&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}function Kv(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function wE(e,r){e._final(function(t){r.pendingcb--,t&&zg(e,t),r.prefinished=!0,e.emit("prefinish"),fj(e,r)})}function xE(e,r){r.prefinished||r.finalCalled||("function"!=typeof e._final||r.destroyed?(r.prefinished=!0,e.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,Yd.nextTick(wE,e,r)))}function fj(e,r){var t=Kv(r);if(t&&(xE(e,r),0===r.pendingcb&&(r.finished=!0,e.emit("finish"),r.autoDestroy))){var $=e._readableState;(!$||$.autoDestroy&&$.endEmitted)&&e.destroy()}return t}function yE(e,r,t){r.ending=!0,fj(e,r),t&&(r.finished?Yd.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function zE(e,r,t){var $=e.entry;for(e.entry=null;$;){var i=$.callback;r.pendingcb--,i(t),$=$.next}r.corkedRequestsFree.next=e}function Lv(){if(kE)return;kE=true;Ev={};Yd=(Hd(),Fd);Ev=vb,vb.WritableState=ej;$D={deprecate:(ZD(),WD)};Fv=(tv(),sv);kk=(Ud(),Zb).Buffer;_D=Fb.Uint8Array||function(){};Zl=(zv(),xv);aE=(Dv(),Cv);bE=aE.getHighWaterMark;zd=(yg(),Xd).codes;cE=zd.ERR_INVALID_ARG_TYPE;dE=zd.ERR_METHOD_NOT_IMPLEMENTED;eE=zd.ERR_MULTIPLE_CALLBACK;fE=zd.ERR_STREAM_CANNOT_PIPE;gE=zd.ERR_STREAM_DESTROYED;hE=zd.ERR_STREAM_NULL_VALUES;iE=zd.ERR_STREAM_WRITE_AFTER_END;jE=zd.ERR_UNKNOWN_ENCODING;zg=Zl.errorOrDestroy;(dj(),cj)(vb,Fv),ej.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r},function(){try{Object.defineProperty(ej.prototype,"buffer",{get:$D.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Gv=Function.prototype[Symbol.hasInstance],Object.defineProperty(vb,Symbol.hasInstance,{value:function(e){return!!Gv.call(this,e)||this===vb&&e&&e._writableState instanceof ej}})):Gv=function(e){return e instanceof this},vb.prototype.pipe=function(){zg(this,new fE)},vb.prototype.write=function(e,r,t){var $=this._writableState,i=!1,a=!$.objectMode&&mE(e);return a&&!kk.isBuffer(e)&&(e=lE(e)),"function"==typeof r&&(t=r,r=null),a?r="buffer":r||(r=$.defaultEncoding),"function"!=typeof t&&(t=nE),$.ending?oE(this,t):(a||pE(this,$,e,t))&&($.pendingcb++,i=rE(this,$,a,e,r,t)),i},vb.prototype.cork=function(){this._writableState.corked++},vb.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||Jv(this,e))},vb.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new jE(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(vb.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(vb.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),vb.prototype._write=function(e,r,t){t(new dE("_write()"))},vb.prototype._writev=null,vb.prototype.end=function(e,r,t){var $=this._writableState;return"function"==typeof e?(t=e,e=null,r=null):"function"==typeof r&&(t=r,r=null),null!=e&&this.write(e,r),$.corked&&($.corked=1,this.uncork()),$.ending||yE(this,$,t),this},Object.defineProperty(vb.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(vb.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),vb.prototype.destroy=Zl.destroy,vb.prototype._undestroy=Zl.undestroy,vb.prototype._destroy=function(e,r){r(e)}}var Ag,AE,BE,Mv,_l,CE=false;function fd(e){if(!(this instanceof fd))return new fd(e);Mv.call(this,e),_l.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",DE)))}function DE(){this._writableState.ended||AE.nextTick(EE,this)}function EE(e){e.end()}function Bg(){if(CE)return;CE=true;Ag={};AE=(Hd(),Fd);BE=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Ag=fd;Mv=(dw(),Tv);_l=(Lv(),Ev);(dj(),cj)(fd,Mv);for(var $YgPj$var$keys=BE(_l.prototype),$YgPj$var$v=0;$YgPj$var$v<$YgPj$var$keys.length;$YgPj$var$v++){var $YgPj$var$method=$YgPj$var$keys[$YgPj$var$v];fd.prototype[$YgPj$var$method]||(fd.prototype[$YgPj$var$method]=_l.prototype[$YgPj$var$method])}Object.defineProperty(fd.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(fd.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(fd.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(fd.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}var am,bm,Nv,FE,GE=false;function HE(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}function IE(t){var e=HE(t);if("string"!=typeof e&&(bm.isEncoding===Nv||!Nv(t)))throw new Error("Unknown encoding: "+t);return e||t}function gj(t){var e;switch(this.encoding=IE(t),this.encoding){case"utf16le":this.text=OE,this.end=PE,e=4;break;case"utf8":this.fillLast=LE,e=4;break;case"base64":this.text=QE,this.end=RE,e=3;break;default:return this.write=SE,void(this.end=TE);}this.lastNeed=0,this.lastTotal=0,this.lastChar=bm.allocUnsafe(e)}function cm(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function JE(t,e,r){var a=e.length-1;if(a<r)return 0;var s=cm(e[a]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--a<r||-2===s?0:(s=cm(e[a]))>=0?(s>0&&(t.lastNeed=s-2),s):--a<r||-2===s?0:(s=cm(e[a]))>=0?(s>0&&(2===s?s=0:t.lastNeed=s-3),s):0}function KE(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\uFFFD"}}function LE(t){var e=this.lastTotal-this.lastNeed,r=KE(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function ME(t,e){var r=JE(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var a=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,a),t.toString("utf8",e,a)}function NE(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function OE(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var a=r.charCodeAt(r.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function PE(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function QE(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function RE(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function SE(t){return t.toString(this.encoding)}function TE(t){return t&&t.length?this.write(t):""}function Ov(){if(GE)return;GE=true;am={};bm=(gv(),ek).Buffer;Nv=bm.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};FE=gj;am.StringDecoder=FE,gj.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},gj.prototype.end=NE,gj.prototype.text=ME,gj.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}var dm,Pv,UE=false;function VE(e){var r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];e.apply(this,t)}}}function WE(){}function XE(e){return e.setHeader&&"function"==typeof e.abort}function Qv(e,r,n){if("function"==typeof r)return Qv(e,null,r);r||(r={}),n=VE(n||WE);var t=r.readable||!1!==r.readable&&e.readable,o=r.writable||!1!==r.writable&&e.writable,a=function(){e.writable||$()},i=e._writableState&&e._writableState.finished,$=function(){o=!1,i=!0,t||n.call(e)},l=e._readableState&&e._readableState.endEmitted,R=function(){t=!1,l=!0,o||n.call(e)},s=function(r){n.call(e,r)},c=function(){var r;return t&&!l?(e._readableState&&e._readableState.ended||(r=new Pv),n.call(e,r)):o&&!i?(e._writableState&&e._writableState.ended||(r=new Pv),n.call(e,r)):void 0},v=function(){e.req.on("finish",$)};return XE(e)?(e.on("complete",$),e.on("abort",c),e.req?v():e.on("request",v)):o&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",R),e.on("finish",$),!1!==r.error&&e.on("error",s),e.on("close",c),function(){e.removeListener("complete",$),e.removeListener("abort",c),e.removeListener("request",v),e.req&&e.req.removeListener("finish",$),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",$),e.removeListener("end",R),e.removeListener("error",s),e.removeListener("close",c)}}function em(){if(UE)return;UE=true;dm={};Pv=(yg(),Xd).codes.ERR_STREAM_PREMATURE_CLOSE;dm=Qv}var Rv,YE,Sv,ZE,Ad,Zd,hj,lk,$d,fm,_d,$E,_E,aF,bF=false;function Bd(e,r,$){return r in e?Object.defineProperty(e,r,{value:$,enumerable:!0,configurable:!0,writable:!0}):e[r]=$,e}function Cd(e,r){return{value:e,done:r}}function cF(e){var r=e[Ad];if(null!==r){var $=e[_d].read();null!==$&&(e[$d]=null,e[Ad]=null,e[Zd]=null,r(Cd($,!1)))}}function dF(e){Sv.nextTick(cF,e)}function eF(e,r){return function($,a){e.then(function(){r[lk]?$(Cd(void 0,!0)):r[fm]($,a)},a)}}function fF(){if(bF)return;bF=true;YE={};Sv=(Hd(),Fd);ZE=(em(),dm);Ad=Symbol("lastResolve");Zd=Symbol("lastReject");hj=Symbol("error");lk=Symbol("ended");$d=Symbol("lastPromise");fm=Symbol("handlePromise");_d=Symbol("stream");$E=Object.getPrototypeOf(function(){});_E=Object.setPrototypeOf((Bd(Rv={get stream(){return this[_d]},next:function(){var e=this,r=this[hj];if(null!==r)return Promise.reject(r);if(this[lk])return Promise.resolve(Cd(void 0,!0));if(this[_d].destroyed)return new Promise(function(r,$){Sv.nextTick(function(){e[hj]?$(e[hj]):r(Cd(void 0,!0))})});var $,a=this[$d];if(a)$=new Promise(eF(a,this));else{var t=this[_d].read();if(null!==t)return Promise.resolve(Cd(t,!1));$=new Promise(this[fm])}return this[$d]=$,$}},Symbol.asyncIterator,function(){return this}),Bd(Rv,"return",function(){var e=this;return new Promise(function(r,$){e[_d].destroy(null,function(e){e?$(e):r(Cd(void 0,!0))})})}),Rv),$E);aF=function(e){var r,$=Object.create(_E,(Bd(r={},_d,{value:e,writable:!0}),Bd(r,Ad,{value:null,writable:!0}),Bd(r,Zd,{value:null,writable:!0}),Bd(r,hj,{value:null,writable:!0}),Bd(r,lk,{value:e._readableState.endEmitted,writable:!0}),Bd(r,fm,{value:function(e,r){var a=$[_d].read();a?($[$d]=null,$[Ad]=null,$[Zd]=null,e(Cd(a,!1))):($[Ad]=e,$[Zd]=r)},writable:!0}),r));return $[$d]=null,ZE(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var r=$[Zd];return null!==r&&($[$d]=null,$[Ad]=null,$[Zd]=null,r(e)),void($[hj]=e)}var a=$[Ad];null!==a&&($[$d]=null,$[Ad]=null,$[Zd]=null,a(Cd(void 0,!0))),$[lk]=!0}),e.on("readable",dF.bind(null,$)),$};YE=aF}var gF,hF=false;function iF(){if(hF)return;hF=true;gF={};gF=function(){throw new Error("Readable.from is not available in the browser")}}var mk,Tv,gd,c,Uv,ij,nk,jF,ib,gm,ok,Vv,Wv,kF,hm,lF,mF,pk,nF,oF,pF,qF,jj,im,Xv,rF=false;function sF(e){return nk.from(e)}function tF(e){return nk.isBuffer(e)||e instanceof jF}function uF(e,r,a){if("function"==typeof e.prependListener)return e.prependListener(r,a);e._events&&e._events[r]?Array.isArray(e._events[r])?e._events[r].unshift(a):e._events[r]=[a,e._events[r]]:e.on(r,a)}function Yv(e,r,a){mk=mk||(Bg(),Ag),e=e||{},"boolean"!=typeof a&&(a=r instanceof mk),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=mF(this,e,"readableHighWaterMark",a),this.buffer=new kF,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ok||(ok=(Ov(),am).StringDecoder),this.decoder=new ok(e.encoding),this.encoding=e.encoding)}function kb(e){if(mk=mk||(Bg(),Ag),!(this instanceof kb))return new kb(e);var r=this instanceof mk;this._readableState=new Yv(e,this,r),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),ij.call(this)}function Zv(e,r,a,t,$){ib("readableAddChunk",r);var n,i=e._readableState;if(null===r)i.reading=!1,xF(e,i);else if($||(n=vF(i,r)),n)jj(e,n);else if(i.objectMode||r&&r.length>0){if("string"==typeof r||i.objectMode||Object.getPrototypeOf(r)===nk.prototype||(r=sF(r)),t)i.endEmitted?jj(e,new qF):jm(e,i,r,!0);else if(i.ended)jj(e,new oF);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!a?(r=i.decoder.write(r),i.objectMode||0!==r.length?jm(e,i,r,!1):km(e,i)):jm(e,i,r,!1)}}else t||(i.reading=!1,km(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function jm(e,r,a,t){r.flowing&&0===r.length&&!r.sync?(r.awaitDrain=0,e.emit("data",a)):(r.length+=r.objectMode?1:a.length,t?r.buffer.unshift(a):r.buffer.push(a),r.needReadable&&qk(e)),km(e,r)}function vF(e,r){var a;return tF(r)||"string"==typeof r||void 0===r||e.objectMode||(a=new nF("chunk",["string","Buffer","Uint8Array"],r)),a}function wF(e){return e>=Xv?e=Xv:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function $v(e,r){return e<=0||0===r.length&&r.ended?0:r.objectMode?1:e!=e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=wF(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}function xF(e,r){if(ib("onEofChunk"),!r.ended){if(r.decoder){var a=r.decoder.end();a&&a.length&&(r.buffer.push(a),r.length+=r.objectMode?1:a.length)}r.ended=!0,r.sync?qk(e):(r.needReadable=!1,r.emittedReadable||(r.emittedReadable=!0,_v(e)))}}function qk(e){var r=e._readableState;ib("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(ib("emitReadable",r.flowing),r.emittedReadable=!0,gd.nextTick(_v,e))}function _v(e){var r=e._readableState;ib("emitReadable_",r.destroyed,r.length,r.ended),r.destroyed||!r.length&&!r.ended||(e.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,lm(e)}function km(e,r){r.readingMore||(r.readingMore=!0,gd.nextTick(yF,e,r))}function yF(e,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&0===r.length);){var a=r.length;if(ib("maybeReadMore read 0"),e.read(0),a===r.length)break}r.readingMore=!1}function zF(e){return function(){var r=e._readableState;ib("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&Uv(e,"data")&&(r.flowing=!0,lm(e))}}function aw(e){var r=e._readableState;r.readableListening=e.listenerCount("readable")>0,r.resumeScheduled&&!r.paused?r.flowing=!0:e.listenerCount("data")>0&&e.resume()}function AF(e){ib("readable nexttick read 0"),e.read(0)}function BF(e,r){r.resumeScheduled||(r.resumeScheduled=!0,gd.nextTick(CF,e,r))}function CF(e,r){ib("resume",r.reading),r.reading||e.read(0),r.resumeScheduled=!1,e.emit("resume"),lm(e),r.flowing&&!r.reading&&e.read(0)}function lm(e){var r=e._readableState;for(ib("flow",r.flowing);r.flowing&&null!==e.read(););}function bw(e,r){return 0===r.length?null:(r.objectMode?a=r.buffer.shift():!e||e>=r.length?(a=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.first():r.buffer.concat(r.length),r.buffer.clear()):a=r.buffer.consume(e,r.decoder),a);var a}function mm(e){var r=e._readableState;ib("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,gd.nextTick(DF,r,e))}function DF(e,r){if(ib("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,r.readable=!1,r.emit("end"),e.autoDestroy)){var a=r._writableState;(!a||a.autoDestroy&&a.finished)&&r.destroy()}}function cw(e,r){for(var a=0,t=e.length;a<t;a++)if(e[a]===r)return a;return-1}function dw(){if(rF)return;rF=true;Tv={};gd=(Hd(),Fd);Tv=kb,kb.ReadableState=Yv;c=(rv(),iv).EventEmitter;Uv=function(e,r){return e.listeners(r).length};ij=(tv(),sv);nk=(Ud(),Zb).Buffer;jF=Fb.Uint8Array||function(){};gm=(uv(),{});ib=gm&&gm.debuglog?gm.debuglog("stream"):function(){};kF=(GD(),wD);hm=(zv(),xv);lF=(Dv(),Cv);mF=lF.getHighWaterMark;pk=(yg(),Xd).codes;nF=pk.ERR_INVALID_ARG_TYPE;oF=pk.ERR_STREAM_PUSH_AFTER_EOF;pF=pk.ERR_METHOD_NOT_IMPLEMENTED;qF=pk.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;(dj(),cj)(kb,ij);jj=hm.errorOrDestroy;im=["error","close","destroy","pause","resume"];Object.defineProperty(kb.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),kb.prototype.destroy=hm.destroy,kb.prototype._undestroy=hm.undestroy,kb.prototype._destroy=function(e,r){r(e)},kb.prototype.push=function(e,r){var a,t=this._readableState;return t.objectMode?a=!0:"string"==typeof e&&((r=r||t.defaultEncoding)!==t.encoding&&(e=nk.from(e,r),r=""),a=!0),Zv(this,e,r,!1,a)},kb.prototype.unshift=function(e){return Zv(this,e,null,!0,!1)},kb.prototype.isPaused=function(){return!1===this._readableState.flowing},kb.prototype.setEncoding=function(e){ok||(ok=(Ov(),am).StringDecoder);var r=new ok(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var a=this._readableState.buffer.head,t="";null!==a;)t+=r.write(a.data),a=a.next;return this._readableState.buffer.clear(),""!==t&&this._readableState.buffer.push(t),this._readableState.length=t.length,this};Xv=1073741824;kb.prototype.read=function(e){ib("read",e),e=parseInt(e,10);var r=this._readableState,a=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return ib("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?mm(this):qk(this),null;if(0===(e=$v(e,r))&&r.ended)return 0===r.length&&mm(this),null;var t,$=r.needReadable;return ib("need readable",$),(0===r.length||r.length-e<r.highWaterMark)&&ib("length less than watermark",$=!0),r.ended||r.reading?ib("reading or ended",$=!1):$&&(ib("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=$v(a,r))),null===(t=e>0?bw(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),a!==e&&r.ended&&mm(this)),null!==t&&this.emit("data",t),t},kb.prototype._read=function(e){jj(this,new pF("_read()"))},kb.prototype.pipe=function(e,r){var a=this,t=this._readableState;switch(t.pipesCount){case 0:t.pipes=e;break;case 1:t.pipes=[t.pipes,e];break;default:t.pipes.push(e);}t.pipesCount+=1,ib("pipe count=%d opts=%j",t.pipesCount,r);var $=(!r||!1!==r.end)&&e!==gd.stdout&&e!==gd.stderr?i:u;function n(r,$){ib("onunpipe"),r===a&&$&&!1===$.hasUnpiped&&($.hasUnpiped=!0,ib("cleanup"),e.removeListener("close",s),e.removeListener("finish",l),e.removeListener("drain",d),e.removeListener("error",o),e.removeListener("unpipe",n),a.removeListener("end",i),a.removeListener("end",u),a.removeListener("data",h),U=!0,!t.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function i(){ib("onend"),e.end()}t.endEmitted?gd.nextTick($):a.once("end",$),e.on("unpipe",n);var d=zF(a);e.on("drain",d);var U=!1;function h(r){ib("ondata");var $=e.write(r);ib("dest.write",$),!1===$&&((1===t.pipesCount&&t.pipes===e||t.pipesCount>1&&-1!==cw(t.pipes,e))&&!U&&(ib("false write response, pause",t.awaitDrain),t.awaitDrain++),a.pause())}function o(r){ib("onerror",r),u(),e.removeListener("error",o),0===Uv(e,"error")&&jj(e,r)}function s(){e.removeListener("finish",l),u()}function l(){ib("onfinish"),e.removeListener("close",s),u()}function u(){ib("unpipe"),a.unpipe(e)}return a.on("data",h),uF(e,"error",o),e.once("close",s),e.once("finish",l),e.emit("pipe",a),t.flowing||(ib("pipe resume"),a.resume()),e},kb.prototype.unpipe=function(e){var r=this._readableState,a={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,a),this);if(!e){var t=r.pipes,$=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var n=0;n<$;n++)t[n].emit("unpipe",this,{hasUnpiped:!1});return this}var i=cw(r.pipes,e);return-1===i?this:(r.pipes.splice(i,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,a),this)},kb.prototype.on=function(e,r){var a=ij.prototype.on.call(this,e,r),t=this._readableState;return"data"===e?(t.readableListening=this.listenerCount("readable")>0,!1!==t.flowing&&this.resume()):"readable"===e&&(t.endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.flowing=!1,t.emittedReadable=!1,ib("on readable",t.length,t.reading),t.length?qk(this):t.reading||gd.nextTick(AF,this))),a},kb.prototype.addListener=kb.prototype.on,kb.prototype.removeListener=function(e,r){var a=ij.prototype.removeListener.call(this,e,r);return"readable"===e&&gd.nextTick(aw,this),a},kb.prototype.removeAllListeners=function(e){var r=ij.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||gd.nextTick(aw,this),r},kb.prototype.resume=function(){var e=this._readableState;return e.flowing||(ib("resume"),e.flowing=!e.readableListening,BF(this,e)),e.paused=!1,this},kb.prototype.pause=function(){return ib("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(ib("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},kb.prototype.wrap=function(e){var r=this,a=this._readableState,t=!1;for(var $ in e.on("end",function(){if(ib("wrapped end"),a.decoder&&!a.ended){var e=a.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function($){(ib("wrapped data"),a.decoder&&($=a.decoder.write($)),a.objectMode&&null==$)||(a.objectMode||$&&$.length)&&(r.push($)||(t=!0,e.pause()))}),e)void 0===this[$]&&"function"==typeof e[$]&&(this[$]=function(r){return function(){return e[r].apply(e,arguments)}}($));for(var n=0;n<im.length;n++)e.on(im[n],this.emit.bind(this,im[n]));return this._read=function(r){ib("wrapped _read",r),t&&(t=!1,e.resume())},this},"function"==typeof Symbol&&(kb.prototype[Symbol.asyncIterator]=function(){return void 0===Vv&&(Vv=(fF(),YE)),Vv(this)}),Object.defineProperty(kb.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(kb.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(kb.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),kb._fromList=bw,Object.defineProperty(kb.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(kb.from=function(e,r){return void 0===Wv&&(Wv=(iF(),gF)),Wv(kb,e,r)})}var nm={};nm=md;var rk=(yg(),Xd).codes,EF=rk.ERR_METHOD_NOT_IMPLEMENTED,FF=rk.ERR_MULTIPLE_CALLBACK,GF=rk.ERR_TRANSFORM_ALREADY_TRANSFORMING,HF=rk.ERR_TRANSFORM_WITH_LENGTH_0,sk=(Bg(),Ag);function IF(r,e){var t=this._transformState;t.transforming=!1;var a=t.writecb;if(null===a)return this.emit("error",new FF);t.writechunk=null,t.writecb=null,null!=e&&this.push(e),a(r);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function md(r){if(!(this instanceof md))return new md(r);sk.call(this,r),this._transformState={afterTransform:IF.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",JF)}function JF(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?ew(this,null,null):this._flush(function(e,t){ew(r,e,t)})}function ew(r,e,t){if(e)return r.emit("error",e);if(null!=t&&r.push(t),r._writableState.length)throw new HF;if(r._transformState.transforming)throw new GF;return r.push(null)}(dj(),cj)(md,sk),md.prototype.push=function(r,e){return this._transformState.needTransform=!1,sk.prototype.push.call(this,r,e)},md.prototype._transform=function(r,e,t){t(new EF("_transform()"))},md.prototype._write=function(r,e,t){var a=this._transformState;if(a.writecb=t,a.writechunk=r,a.writeencoding=e,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},md.prototype._read=function(r){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},md.prototype._destroy=function(r,e){sk.prototype._destroy.call(this,r,function(r){e(r)})};var KF={};KF=kj;function kj(r){if(!(this instanceof kj))return new kj(r);nm.call(this,r)}(dj(),cj)(kj,nm),kj.prototype._transform=function(r,$,a){a(null,r)};var fw,LF={};function MF(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var gw=(yg(),Xd).codes,NF=gw.ERR_MISSING_ARGS,OF=gw.ERR_STREAM_DESTROYED;function hw(r){if(r)throw r}function PF(r){return r.setHeader&&"function"==typeof r.abort}function QF(r,e,$,a){a=MF(a);var n=!1;r.on("close",function(){n=!0}),void 0===fw&&(fw=(em(),dm)),fw(r,{readable:e,writable:$},function(r){if(r)return a(r);n=!0,a()});var o=!1;return function(e){if(!n&&!o)return o=!0,PF(r)?r.abort():"function"==typeof r.destroy?r.destroy():void a(e||new OF("pipe"))}}function iw(r){r()}function RF(r,e){return r.pipe(e)}function SF(r){return r.length?"function"!=typeof r[r.length-1]?hw:r.pop():hw}function TF(){for(var r=arguments.length,e=new Array(r),$=0;$<r;$++)e[$]=arguments[$];var a,n=SF(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new NF("streams");var o=e.map(function(r,$){var t=$<e.length-1;return QF(r,t,$>0,function(r){a||(a=r),r&&o.forEach(iw),t||(o.forEach(iw),n(a))})});return e.reduce(RF)}LF=TF;var nd={},UF=nd=nd=(dw(),Tv);nd.Stream=UF;nd.Readable=nd;var VF=(Lv(),Ev);nd.Writable=VF;var jw=(Bg(),Ag);nd.Duplex=jw;nd.Transform=nm;nd.PassThrough=KF;var WF=(em(),dm);nd.finished=WF;nd.pipeline=LF;var om={};let XF;om="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:Fb):e=>(XF||(XF=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0));var jb={};function kw(r,e){for(const t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function YF(r,e,t){if(!r||"string"==typeof r)throw new TypeError("Please pass an Error to err-code");t||(t={}),"object"==typeof e&&(t=e,e=""),e&&(t.code=e);try{return kw(r,t)}catch(o){t.message=r.message,t.stack=r.stack;const e=function(){};return e.prototype=Object.create(Object.getPrototypeOf(r)),kw(new e,t)}}jb=YF;var lw={};const ZF=Sb("simple-peer"),{Buffer:$F}=(Ud(),Zb),pm=65536,_F=5e3,aG=5e3;function mw(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function bG(e){console.warn(e)}class Cg extends jw{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=hv(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||hv(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Cg.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Cg.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||_F,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:Rq(),!this._wrtc)throw"undefined"==typeof window?jb(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):jb(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(jb(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(jb(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(jb(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(jb(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?bG("Ignoring unsupported ICE candidate."):this.destroy(jb(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(i){this.destroy(jb(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw jb(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const i=this._senderMap.get(e)||new Map;let s=i.get(t);if(s)throw s.removed?jb(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):jb(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");s=this._pc.addTrack(e,t),i.set(t,s),this._senderMap.set(e,i),this._needsNegotiation()}replaceTrack(e,t,i){if(this.destroying)return;if(this.destroyed)throw jb(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const s=this._senderMap.get(e),r=s?s.get(i):null;if(!r)throw jb(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,s),null!=r.replaceTrack?r.replaceTrack(t):this.destroy(jb(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw jb(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const i=this._senderMap.get(e),s=i?i.get(t):null;if(!s)throw jb(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{s.removed=!0,this._pc.removeTrack(s)}catch(r){"NS_ERROR_UNEXPECTED"===r.name?this._sendersAwaitingStable.push(s):this.destroy(jb(r,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,om(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw jb(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),om(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(jb(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=pm),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(jb(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},aG)}_read(){}_write(e,t,i){if(this.destroyed)return i(jb(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(s){return this.destroy(jb(s,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>pm?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=mw(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(jb(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(jb(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=mw(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(jb(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(jb(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(jb(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(jb(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(jb(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{const s=[];i.forEach(e=>{s.push(t(e))}),e(null,s)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(this.destroyed)return;const s=[];i.result().forEach(e=>{const i={};e.names().forEach(t=>{i[t]=e.stat(t)}),i.id=e.id,i.type=e.type,i.timestamp=e.timestamp,s.push(t(i))}),e(null,s)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,i)=>{if(this.destroyed)return;t&&(i=[]);const s={},r={},n={};let a=!1;i.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(s[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(r[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(n[e.id]=e)});const o=e=>{a=!0;let t=r[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let i=s[e.remoteCandidateId];i&&(i.ip||i.address)?(this.remoteAddress=i.ip||i.address,this.remotePort=Number(i.port)):i&&i.ipAddress?(this.remoteAddress=i.ipAddress,this.remotePort=Number(i.portNumber)):"string"==typeof e.googRemoteAddress&&(i=e.googRemoteAddress.split(":"),this.remoteAddress=i[0],this.remotePort=Number(i[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&o(n[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&o(e)}),a||Object.keys(n).length&&!Object.keys(r).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(jb(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug("sent chunk from \"write before connect\"");const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>pm||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=$F.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),om(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],ZF.apply(null,e)}}Cg.WEBRTC_SUPPORT=!!Rq(),Cg.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},Cg.channelConfig={},lw=Cg;var tk={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Fb&&Fb,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function r(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,i){if(i){var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(i=i(o=r[t=t[t.length-1]]))!=o&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function i(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var a=n.setTimeout;i.prototype.c=function(t){a(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(i){this.f(i)}}}this.a=null},i.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1;}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new i;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(i){n.reject(i)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(n){o(n)}}:e}var r,o,a=new e(function(t,e){r=t,o=e});return this.Qa(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b);}}var i=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=r(t),a=i.next();!a.done;a=i.next())o(a.value).Qa(e,n)})},e.all=function(t){var n=r(t),i=n.next();return i.done?o([]):new e(function(t,e){function r(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(i.value).Qa(r(a.length-1),e),i=n.next()}while(!i.done)})},e});var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function l(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:y).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function k(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function A(t,e,n){this.code=_+t,this.message=e||O[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new A(e.substring(_.length),t.message,t.serverResponse):null}k(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var N,_="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":"This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.","popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");D.call(this,n+t[i])}function x(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}N=R("__EID__")?"__EID__":void 0,k(D,Error),D.prototype.name="CustomError",k(L,D),L.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new M(function(){return new $},function(t){t.reset()});function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function $(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},$.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=[],r=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(i[r++]=s)}return i},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function W(t,e){return 0<=q(t,e)}function X(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,function(n,i){e.call(void 0,n,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&0})}function Y(t){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var Z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,it=/"/g,rt=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=a.navigator;if(ct){var ht=ct.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return st(Z,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function gt(t,e){t:{try{var n=t&&t.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||a).Element&&i.Location){var r=i;break t}}catch(s){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=It}function yt(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,It={},Tt={};function kt(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Et(t,e){this.a=e===Ot?t:""}function At(t){return t instanceof Et&&t.constructor===Et?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=yt(t);if(!_t.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=kt();return new Et(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Nt,function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error("Found marker, \""+i+"\", in format string, \""+n+"\", but no valid label mapping found in args: "+JSON.stringify(e));return(t=e[i])instanceof bt?yt(t):encodeURIComponent(String(t))}))}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,_t=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Ct(t,e){this.a=e===jt?t:""}function Rt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof Ct)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t))t=new Ct(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Pt.test(e[1])?new Ct(t,jt):null}return t}function Mt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Ct(t,jt))}var jt={},Ft=new Ct("about:invalid#zClosurez",jt);function Ut(t,e,n){this.a=n===Vt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function $t(t,e,n,i){return t=t instanceof Ct?t:Mt(t),e=e||a,n=n instanceof bt?yt(n):n||"",e.open(Rt(t),n,i,void 0)}function qt(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}function Kt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf("\"")&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=h;var Gt,Bt,Wt=ft("Opera"),Xt=ft("Trident")||ft("MSIE"),Jt=ft("Edge"),Yt=Jt||Xt,zt=ft("Gecko")&&!(st(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=st(Z.toLowerCase(),"webkit")&&!ft("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}t:{var te="",ee=(Bt=Z,zt?/rv:([^\);]+)(\)|;)/.exec(Bt):Jt?/Edge\/([\d\.]+)/.exec(Bt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bt):Zt?/WebKit\/(\S+)/.exec(Bt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Bt):void 0);if(ee&&(te=ee?ee[1]:""),Xt){var ne=Qt();if(null!=ne&&ne>parseFloat(te)){Gt=String(ne);break t}}Gt=te}var ie,re={};function oe(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=Q(String(Gt)).split("."),i=Q(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}if(a.document&&Xt){var ae=Qt();ie=ae||parseInt(Gt,10)||void 0}else ie=void 0;var se=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Bt){}var ue=!Xt||9<=Number(se);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){lt(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var fe,le,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!ue&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(" name=\"",Kt(a.name),"\""),a.type){o.push(" type=\"",Kt(a.type),"\"");var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(r,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<i.length&&function(t,e,n){function i(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];if(!l(o)||p(o)&&0<o.nodeType)i(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}K(a?z(o):o,i)}}}(r,o,i),o}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){a.setTimeout(function(){throw t},0)}function ge(t,e){le||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);le=function(){t.then(we)}}else le=function(){var t=we;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(fe||(fe=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){i.next={Gb:t},i=i.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),fe(t)):a.setImmediate(t)}}(),be||(le(),be=!0),ye.add(t,e)}var be=!1,ye=new F;function we(){for(var t;t=V();){try{t.a.call(t.b)}catch(e){me(e)}j(U,t)}be=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Le(n,ke,t)},function(t){if(!(t instanceof $e))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Le(n,Ee,t)})}catch(i){Le(this,Ee,i)}}var Te=0,ke=2,Ee=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new M(function(){return new Ae},function(t){t.reset()});function Ne(t,e,n){var i=Se.get();return i.g=t,i.b=e,i.f=n,i}function _e(t){if(t instanceof Ie)return t;var e=new Ie(h);return Le(e,ke,t),e}function Oe(t){return new Ie(function(e,n){n(t)})}function Ce(t,e,n){xe(t,e,n,null)||ge(I(e,t))}function Re(t){return new Ie(function(e){var n=t.length,i=[];if(n)for(var r=function(t,r,o){n--,i[t]=r?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(i)},o=0;o<t.length;o++)Ce(t[o],I(r,o,!0),I(r,o,!1));else e(i)})}function Pe(t,e){t.b||t.a!=ke&&t.a!=Ee||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,i){var r=Ne(null,null,null);return r.a=new Ie(function(t,o){r.g=e?function(n){try{var r=e.call(i,n);t(r)}catch(a){o(a)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof $e?o(e):t(r)}catch(a){o(a)}}:o}),r.a.c=t,Pe(t,r),r.a}function Le(t,e,n){t.a==Te&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,xe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ee||n instanceof $e||function(t,e){t.g=!0,ge(function(){t.g&&Ve.call(null,e)})}(t,n)))}function xe(t,e,n,i){if(t instanceof Ie)return Pe(t,Ne(e||h,n||null,i)),!0;if(P(t))return t.then(e,n,i),!0;if(p(t))try{var r=t.then;if(d(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(r,t))},o)}catch(s){o(s)}}(t,r,e,n,i),!0}catch(o){return n.call(i,o),!0}return!1}function Me(t){t.h||(t.h=!0,ge(t.gc,t))}function je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,i){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,i);else try{e.c?e.g.call(e.f):Ue(e,n,i)}catch(r){Ve.call(null,r)}j(Se,e)}function Ue(t,e,n){e==ke?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return De(this,d(t)?t:null,d(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return De(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new $e(t);ge(function(){!function t(e,n){if(e.a==Te)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==Te&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):je(i),Fe(i,o,Ee,n)))}e.c=null}else Le(e,Ee,n)}(this,e)},this)}},t.$c=function(t){this.a=Te,Le(this,ke,t)},t.ad=function(t){this.a=Te,Le(this,Ee,t)},t.gc=function(){for(var t;t=je(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ve=me;function $e(t){D.call(this,t)}function qe(){0!=Ke&&(He[v(this)]=this),this.xa=this.xa,this.pa=this.pa}k($e,D),$e.prototype.name="cancel";var Ke=0,He={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ke)){var e=v(t);if(0!=Ke&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Be=Object.freeze||function(t){return t},We=!Xt||9<=Number(se),Xe=Xt&&!oe("9"),Je=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function ze(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(zt){t:{try{Ht(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},k(ze,Ye);var Ze=Be({2:"touch",3:"pen",4:"mouse"});ze.prototype.preventDefault=function(){ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},ze.prototype.g=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Va=r,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function an(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==i)return r}return-1}rn.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=an(t,e,i,r);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!i,r)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,i,r){if(i&&i.once)fn(t,e,n,i,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,i,r);else n=wn(n),t&&t[Qe]?Tn(t,e,n,p(i)?!!i.capture:!!i,r):hn(t,e,n,!1,i,r)}function hn(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=p(r)?!!r.capture:!!r,s=bn(t);if(s||(t[sn]=s=new rn(t)),!(n=s.add(e,n,i,a,o)).proxy){if(i=function(){var t=gn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Je||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(pn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}0}}function fn(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,i,r);else n=wn(n),t&&t[Qe]?kn(t,e,n,p(i)?!!i.capture:!!i,r):hn(t,e,n,!0,i,r)}function ln(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,i,r);else i=p(i)?!!i.capture:!!i,n=wn(n),t&&t[Qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=an(o=t.a[e],n,i,r))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=an(e,n,i,r)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Qe])on(e.v,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(pn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),0,(n=bn(e))?(on(n,t),0==n.b&&(n.src=null,e[sn]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function vn(t,e,n,i){var r=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,i),r=r&&!1!==o)}return r}function mn(t,e){var n=t.listener,i=t.Va||t.src;return t.Pa&&dn(t),n.call(i,e)}function gn(t,e){if(t.va)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=a,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new ze(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(s){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=vn(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=vn(i[r],t,!1,e),n=n&&o}return n}return mn(t,new ze(e,this))}function bn(t){return(t=t[sn])instanceof rn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function In(){qe.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function Tn(t,e,n,i,r){t.v.add(String(e),n,!1,i,r)}function kn(t,e,n,i,r){t.v.add(String(e),n,!0,i,r)}function En(t,e,n,i){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&on(t.v,a),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}function An(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Sn(t){var e=null;return new Ie(function(n,i){-1==(e=An(function(){n(void 0)},t))&&i(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function Nn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function _n(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(l(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof On)for(n=t.Y(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Cn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Rn(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Rn(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}k(In,qe),In.prototype[Qe]=!0,In.prototype.addEventListener=function(t,e,n,i){cn(this,t,e,n,i)},In.prototype.removeEventListener=function(t,e,n,i){ln(this,t,e,n,i)},In.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var i=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var r=t;mt(t=new Ye(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=En(a,i,!0,t)&&r}if(r=En(a=t.b=n,i,!0,t)&&r,r=En(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=En(a=t.b=e[o],i,!1,t)&&r;return r},In.prototype.Da=function(){if(In.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)0,nn(n[i]);delete e.a[t],e.b--}}this.gb=null},(t=On.prototype).W=function(){Cn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Cn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},t.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Dn?(this.i=void 0!==e?e:t.i,Ln(this,t.c),this.l=t.l,this.a=t.a,xn(this,t.g),this.f=t.f,Mn(this,ei(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=$n(n[2]||""),this.a=$n(n[3]||"",!0),xn(this,n[4]),this.f=$n(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=$n(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Ln(t,e,n){t.c=n?$n(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),ti(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Wn)),t.b=new Jn(e,t.i))}function jn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Dn?new Dn(t):new Dn(t,void 0)}function Vn(t,e,n,i){var r=new Dn(null,void 0);return t&&Ln(r,t),e&&(r.a=e),n&&xn(r,n),i&&(r.f=i),r}function $n(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Bn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Xn)),t.join("")},Dn.prototype.resolve=function(t){var e=new Dn(this),n=!!t.c;n?Ln(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var i=t.f;if(n)xn(e,t.g);else if(n=!!t.f){if("/"!=i.charAt(0))if(this.a&&!this.f)i="/"+i;else{var r=e.f.lastIndexOf("/");-1!=r&&(i=e.f.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(st(r,"./")||st(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?e.f=i:n=""!==t.b.toString(),n?Mn(e,ei(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,Gn=/[#\?:]/g,Bn=/[#\?]/g,Wn=/[#\?@]/g,Xn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function zn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Nn(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];Array.isArray(o)?ti(n,r,o):n.add(r,o)}return n}function Zn(t,e){Yn(t),e=ni(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Cn(t)))}function Qn(t,e){return Yn(t),e=ni(t,e),Rn(t.a.b,e)}function ti(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(ni(t,e),z(n)),t.b+=n.length)}function ei(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ni(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ii(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return void i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&"function"!=typeof(a=n[r])&&(i.push(o),si(r,i),i.push(":"),t(e,a,i),o=",");return void i.push("}")}n=n.valueOf()}switch(typeof n){case"string":si(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n);}}}(new ri,t,e),e.join("")}function ri(){}(t=Jn.prototype).add=function(t,e){Yn(this),this.c=null,t=ni(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach(function(n,i){K(n,function(n){t.call(e,n,i,this)},this)},this)},t.Y=function(){Yn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.W=function(t){Yn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=Y(e,this.a.get(ni(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Qn(this,t=ni(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.W(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join("&")};var oi={"\"":"\\\"","\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ai=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function si(t,e){e.push("\"",t.replace(ai,function(t){var e=oi[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),oi[t]=e),e}),"\"")}function ui(){var t=Ni();return Xt&&!!se&&11==se||/Edge\/\d+/.test(t)}function ci(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hi(t,e){e=e||a.window;var n="about:blank";t&&(n=Rt(xt(t)||Ft)),e.location.href=n}function fi(t){return!!((t=(t||Ni()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function li(t){t=t||a.window;try{t.close()}catch(e){}}function di(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ni().toLowerCase(),i&&(e.target=i,st(n,"crios/")&&(e.target="_blank")),Ei(Ni())==Ti&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof Ct?n:xt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,r=[],t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0));}var a=r.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(gt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Mt(e),a.href=Rt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=$t("",i,n,a),t=Rt(e),a&&(Yt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t="<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url="+Kt(t)+"\">",t=new Ut(t=(i=kt())?i.createHTML(t):t,null,Vt),i=a.document)&&(i.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),i.close())):(a=$t(e,i,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var pi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vi=/^[^@]+@[^@]+$/;function mi(){var t=null;return new Ie(function(e){"complete"==a.document.readyState?e():(t=function(){e()},fn(window,"load",t))}).o(function(e){throw ln(window,"load",t),e})}function gi(t){return t=t||Ni(),!("file:"!==Pi()&&"ionic:"!==Pi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function bi(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function yi(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function wi(){return db.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":db.INTERNAL.hasOwnProperty("node")?"Node":yi()?"Worker":"Browser"}function Ii(){var t=wi();return"ReactNative"===t||"Node"===t}var Ti="Firefox",ki="Chrome";function Ei(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Ti:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":ki:"Safari"}var Ai={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Si(t,e){e=e||[];var n,i=[],r={};for(n in Ai)r[Ai[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=wi())?i=Ei(r=Ni()):"Worker"===i&&(i=Ei(r=Ni())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function Ni(){return a.navigator&&a.navigator.userAgent||""}function _i(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Oi(){try{var t=a.localStorage,e=ji();if(t)return t.setItem(e,"1"),t.removeItem(e),!ui()||!!a.indexedDB}catch(n){return yi()&&!!a.indexedDB}return!1}function Ci(){return(Ri()||"chrome-extension:"===Pi()||gi())&&!Ii()&&Oi()&&!yi()}function Ri(){return"http:"===Pi()||"https:"===Pi()}function Pi(){return a.location&&a.location.protocol||null}function Di(t){return!fi(t=t||Ni())&&Ei(t)!=Ti}function Li(t){return void 0===t?null:ii(t)}function xi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mi(t){if(null!==t)return JSON.parse(t)}function ji(t){return t||Math.floor(1e9*Math.random()).toString()}function Fi(t){return"Safari"!=Ei(t=t||Ni())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ui(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ni(),e=wi(),this.b=fi(t)||"ReactNative"===e}function $i(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Ki(){return!(!_i("fireauth.oauthhelper",a)&&!_i("fireauth.iframe",a))}Vi.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Ri()&&"chrome-extension:"!==Pi()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hi,Gi={};function Bi(t){Gi[t]||(Gi[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wi={};Object.defineProperty(Wi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wi,"abcd",{configurable:!0,enumerable:!0,value:2}),Hi=2==Wi.abcd}catch(Bt){Hi=!1}function Xi(t,e,n){Hi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ji(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Xi(t,n,e[n])}function Yi(t){var e={};return Ji(e,t),e}function zi(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Xi(e,n,zi(t[n]));return e}function Zi(t){var e=t&&(t[ir]?"phone":null);if(!(e&&t&&t[nr]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Xi(this,"uid",t[nr]),Xi(this,"displayName",t[tr]||null);var n=null;t[er]&&(n=new Date(t[er]).toUTCString()),Xi(this,"enrollmentTime",n),Xi(this,"factorId",e)}function Qi(t){try{var e=new rr(t)}catch(n){e=null}return e}Zi.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var tr="displayName",er="enrolledAt",nr="mfaEnrollmentId",ir="phoneInfo";function rr(t){Zi.call(this,t),Xi(this,"phoneNumber",t[ir])}function or(t){var e={},n=t[cr],i=t[fr],r=t[lr];if(t=Qi(t[hr]),!r||r!=sr&&r!=ur&&!n||r==ur&&!i||r==ar&&!t)throw Error("Invalid checkActionCode response!");r==ur?(e[pr]=n||null,e[mr]=n||null,e[dr]=i):(e[pr]=i||null,e[mr]=i||null,e[dr]=n||null),e[vr]=t||null,Xi(this,br,r),Xi(this,gr,zi(e))}k(rr,Zi),rr.prototype.w=function(){var t=rr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ar="REVERT_SECOND_FACTOR_ADDITION",sr="EMAIL_SIGNIN",ur="VERIFY_AND_CHANGE_EMAIL",cr="email",hr="mfaInfo",fr="newEmail",lr="requestType",dr="email",pr="fromEmail",vr="multiFactorInfo",mr="previousEmail",gr="data",br="operation";function yr(t){var e=Fn(t=Un(t),wr)||null,n=Fn(t,Ir)||null,i=Fn(t,Er)||null;if(i=i&&Sr[i]||null,!e||!n||!i)throw new A("argument-error",wr+", "+Ir+"and "+Er+" are required in a valid action code URL.");Ji(this,{apiKey:e,operation:i,code:n,continueUrl:Fn(t,Tr)||null,languageCode:Fn(t,kr)||null,tenantId:Fn(t,Ar)||null})}var wr="apiKey",Ir="oobCode",Tr="continueUrl",kr="languageCode",Er="mode",Ar="tenantId",Sr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ar,signIn:sr,verifyAndChangeEmail:ur,verifyEmail:"VERIFY_EMAIL"};function Nr(t){try{return new yr(t)}catch(e){return null}}function _r(t){var e=t[Dr];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Or];if(n&&"object"==typeof n){e=n[Mr];var i=n[Lr];if(n=n[xr],"string"==typeof e&&e.length){if(this.a=e,void 0!==i&&"boolean"!=typeof i)throw new A("argument-error",Lr+" property must be a boolean when specified.");if(this.g=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",xr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Mr+" property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",Or+" property must be a non null object when specified.");if(this.f=null,(e=t[Pr])&&"object"==typeof e){if("string"==typeof(e=e[jr])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",jr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Pr+" property must be a non null object when specified.");if(void 0!==(e=t[Rr])&&"boolean"!=typeof e)throw new A("argument-error",Rr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Cr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Cr+" property must be a non empty string when specified.");this.i=t||null}var Or="android",Cr="dynamicLinkDomain",Rr="handleCodeInApp",Pr="iOS",Dr="url",Lr="installApp",xr="minimumVersion",Mr="packageName",jr="bundleId";function Fr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ur=null;function Vr(t){var e=[];return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=Ur[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ur){Ur={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var i=t.concat(e[n].split("")),r=0;r<i.length;r++){var o=i[r];void 0===Ur[o]&&(Ur[o]=r)}}}();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e.push(t)}),e}function $r(t){var e=Kr(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function qr(t){try{return new $r(t)}catch(e){return null}}function Kr(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var i=Vr(t);for(t=[],n=e=0;e<i.length;){var r=i[e++];if(128>r)t[n++]=String.fromCharCode(r);else if(191<r&&224>r){var o=i[e++];t[n++]=String.fromCharCode((31&r)<<6|63&o)}else if(239<r&&365>r){o=i[e++];var a=i[e++],s=((7&r)<<18|(63&o)<<12|(63&a)<<6|63&i[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=i[e++],a=i[e++],t[n++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(u){}return null}$r.prototype.T=function(){return this.f},$r.prototype.l=function(){return this.c},$r.prototype.toString=function(){return this.h};var Hr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gr=["client_id","response_type","scope","redirect_uri","state"],Br={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Gr},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Gr},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Gr},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hr},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Wr(t){for(var e in Br)if(Br[e].fa==t)return Br[e];return null}function Xr(t){var e={};e["facebook.com"]=Qr,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Yr];try{if(n)return e[n]?new e[n](t):new Zr(t);if(void 0!==t[Jr])return new zr(t)}catch(i){}return null}var Jr="idToken",Yr="providerId";function zr(t){var e=t[Yr];if(!e&&t[Jr]){var n=qr(t[Jr]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Xi(this,"providerId",e),Xi(this,"isNewUser",n)}function Zr(t){zr.call(this,t),Xi(this,"profile",zi((t=Mi(t.rawUserInfo||"{}"))||{}))}function Qr(t){if(Zr.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Zr.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xi(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Zr.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Zr.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xi(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),i=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||i||n||t}function ro(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:ao}k(Zr,zr),k(Qr,Zr),k(to,Zr),k(eo,Zr),k(no,Zr);var oo="enroll",ao="signin";function so(){}function uo(t,e){return t.then(function(t){if(t[Ya]){var n=qr(t[Ya]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==_+"user-not-found"?new A("user-mismatch"):t})}function co(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Xi(this,"providerId",t),Xi(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function lo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Xi(this,"idToken",e.idToken),e.accessToken&&Xi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Xi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Xi(this,"accessToken",e.oauthToken),Xi(this,"secret",e.oauthTokenSecret)}Xi(this,"providerId",t),Xi(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new lo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function mo(t,e){this.Qc=e||[],Ji(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Wr(t)||{}).Ja||null,this.ob=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error","SAML provider IDs must be prefixed with \"saml.\"");mo.call(this,t,[])}function bo(t){mo.call(this,t,Gr),this.a=[]}function yo(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),new yo().credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),new Io().credential({accessToken:e})}function ko(){bo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),new ko().credential({idToken:n,accessToken:e})}function Ao(){mo.call(this,"twitter.com",Hr)}function So(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Xi(this,"providerId","password"),Xi(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Oo(){Ji(this,{providerId:"password",isOAuthProvider:!1})}function Co(t,e){if(!(e=Ro(e)))throw new A("argument-error","Invalid email link!");return new No(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=Nr(t=io(t)))&&t.operation===sr?t:null}function Po(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new A("internal-error");this.a=t,Xi(this,"providerId","phone"),this.fa="phone",Xi(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Po(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function xo(t){try{this.a=t||db.auth()}catch(e){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ji(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Po({eb:t,cb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return So(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new co(e,a):new lo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:r}):null;}}catch(s){return null}}function Fo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Uo(t,e,n,i,r,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=a||null,this.a=r||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function $o(){this.b=null,this.a=[]}ro.prototype.Ha=function(){return this.a?_e(this.a):_e(this.b)},ro.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ka=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},co.prototype.ka=function(t){return bs(t,ho(this))},co.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ys(t,n)},co.prototype.c=function(t,e){return uo(ws(t,ho(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lo.prototype.ka=function(t){return bs(t,po(this))},lo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ys(t,n)},lo.prototype.c=function(t,e){return uo(ws(t,po(this)),e)},lo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Ib=pt(t),this},k(go,mo),k(bo,mo),bo.prototype.Ca=function(t){return W(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return z(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,n,this.providerId)},k(yo,bo),Xi(yo,"PROVIDER_ID","facebook.com"),Xi(yo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),k(Io,bo),Xi(Io,"PROVIDER_ID","github.com"),Xi(Io,"GITHUB_SIGN_IN_METHOD","github.com"),k(ko,bo),Xi(ko,"PROVIDER_ID","google.com"),Xi(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),k(Ao,mo),Xi(Ao,"PROVIDER_ID","twitter.com"),Xi(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,_s,{email:this.a,oobCode:this.f}):eu(t,Ys,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Os,{idToken:e,email:this.a,oobCode:this.f}):eu(t,qs,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return uo(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ji(Oo,{PROVIDER_ID:"password"}),Ji(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ji(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.fb(Lo(this))},Po.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,eu(t,Zs,n)},Po.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",uo(t=eu(t,Qs,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},xo.prototype.fb=function(t,e){var n=this.a.a;return _e(e.verify()).then(function(i){if("string"!=typeof i)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var r=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(r&&r.type==oo?r.Ha().then(function(t){return eu(n,Hs,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):r&&r.type==ao?r.Ha().then(function(e){return function(t,e){return eu(t,Gs,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})}):function(t,e){return eu(t,Vs,e)}(n,{phoneNumber:o,recaptchaToken:i})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new A("argument-error","Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.");}})},Ji(xo,{PROVIDER_ID:"phone"}),Ji(xo,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.T=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var qo,Ko=null;function Ho(t){var e="unauthorized-domain",n=void 0,i=Un(t);t=i.a,"chrome-extension"==(i=i.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Go(t,e,n){A.call(this,t,n),(t=e||{}).Jb&&Xi(this,"email",t.Jb),t.ea&&Xi(this,"phoneNumber",t.ea),t.credential&&Xi(this,"credential",t.credential),t.Zb&&Xi(this,"tenantId",t.Zb)}function Bo(t){if(t.code){var e=t.code||"";0==e.indexOf(_)&&(e=e.substring(_.length));var n={credential:jo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Go(e,n,t.message)}return null}function Wo(){}function Xo(t){return t.c||(t.c=t.b())}function Jo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(r){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function zo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ta(t,e,n){this.reset(t,e,n,void 0,void 0)}k(Ho,A),k(Go,A),Go.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Go.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,k(Jo,Wo),Jo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},qo=new Jo,k(zo,Wo),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Qo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ta.prototype.a=null;function ea(t){this.f=t,this.b=this.c=this.a=null}function na(t,e){this.name=t,this.value=e}ta.prototype.reset=function(t,e,n,i,r){"number"==typeof r||0,i||T(),delete this.a},na.prototype.toString=function(){return this.name};var ia=new na("SEVERE",1e3),ra=new na("WARNING",900),oa=new na("CONFIG",700),aa=new na("FINE",500);ea.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(x("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new ta(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var sa={},ua=null;function ca(t){var e;if(ua||(ua=new ea(""),sa[""]=ua,ua.c=oa),!(e=sa[t])){e=new ea(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=ca(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,sa[t]=e}return e}function ha(t,e){t&&t.log(aa,e,void 0)}function fa(t){this.f=t}function la(t){In.call(this),this.u=t,this.h=void 0,this.readyState=da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ca("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}k(fa,Wo),fa.prototype.a=function(){return new la(this.f)},fa.prototype.b=function(t){return function(){return t}}({}),k(la,In);var da=0;function pa(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function va(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ma(t)}function ma(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ga(t){In.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ba,this.u=this.S=!1}(t=la.prototype).open=function(t,e){if(this.readyState!=da)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ma(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,va(this)),this.readyState=da},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ma(this)),this.a&&(this.readyState=3,ma(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,pa(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?va(this):ma(this),3==this.readyState&&pa(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,va(this))},t.sc=function(t){this.a&&(this.response=t,va(this))},t.Ua=function(t){var e=this.i;e&&e.log(ra,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&va(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ra,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ra,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(la.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),k(ga,In);var ba="";ga.prototype.b=ca("goog.net.XhrIo");var ya=/^https?$/i,wa=["POST","PUT"];function Ia(t,e,n,i,r){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():qo.a(),t.C=t.D?Xo(t.D):Xo(qo),t.a.onreadystatechange=w(t.Vb,t);try{ha(t.b,Ca(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return ha(t.b,Ca(t,"Error opening Xhr: "+s.message)),void ka(t,s)}e=i||"";var o=new On(t.headers);r&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)K(t,e,void 0);else for(var n=_n(t),i=Nn(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Ta,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),i=a.FormData&&e instanceof a.FormData,!W(wa,n)||r||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Na(t),0<t.g&&(t.u=function(t){return Xt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ha(t.b,Ca(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=An(t.Ma,t.g,t)),ha(t.b,Ca(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){ha(t.b,Ca(t,"Send error: "+s.message)),ka(t,s)}}function Ta(t){return"content-type"==t.toLowerCase()}function ka(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ea(t),Sa(t)}function Ea(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Aa(t){if(t.c&&void 0!==o)if(t.C[1]&&4==_a(t)&&2==Oa(t))ha(t.b,Ca(t,"Local request error detected and ignored"));else if(t.i&&4==_a(t))An(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==_a(t)){ha(t.b,Ca(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1;}if(!(e=i)){var r;if(r=0===n){var s=String(t.l).match(Pn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}r=!ya.test(s?s.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<_a(t)?t.a.statusText:""}catch(h){ha(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Oa(t)+"]",Ea(t)}}finally{Sa(t)}}}function Sa(t,e){if(t.a){Na(t);var n=t.a,i=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+r.message,void 0)}}}function Na(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function _a(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<_a(t)?t.a.status:-1}catch(e){return-1}}function Ca(t,e){return e+" ["+t.R+" "+t.l+" "+Oa(t)+"]"}function Ra(t){var e=qa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Pa(t,e,n){t.a=!0,t.c=n,t.f=!e,Ma(t)}function Da(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function La(t,e,n,i){t.g.push([e,n,i]),t.a&&Ma(t)}function xa(t){return B(t.g,function(t){return d(t[1])})}function Ma(t){if(t.h&&t.a&&xa(t)){var e=t.h,n=Va[e];n&&(a.clearTimeout(n.a),delete Va[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],s=r[1];if(r=r[2],o=t.f?s:o)try{var u=o.call(r||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(i=!0,t.i=!0)}catch(c){e=c,t.f=!0,xa(t)||(n=!0)}}t.c=e,i&&(u=w(t.m,t,!0),i=w(t.m,t,!1),e instanceof Ra?(La(e,u,i),e.C=!0):e.then(u,i)),n&&(e=new Ua(e),Va[e.a]=e,t.h=e.a)}function ja(){D.call(this)}function Fa(){D.call(this)}function Ua(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=ga.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ha(this.b,Ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ha(this.b,Ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Sa(this,!0)),ga.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Aa(this):this.Jc())},t.Jc=function(){Aa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ba:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer;}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ha(this.b,"Can not get response: "+e.message),null}},Ra.prototype.cancel=function(t){if(this.a)this.c instanceof Ra&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fa(this),Da(this),Pa(this,!1,t))}},Ra.prototype.m=function(t,e){this.i=!1,Pa(this,t,e)},Ra.prototype.then=function(t,e,n){var i,r,o=new Ie(function(t,e){i=t,r=e});return La(this,i,function(t){t instanceof Fa?o.cancel():r(t)}),o.then(t,e,n)},Ra.prototype.$goog_Thenable=!0,k(ja,D),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",k(Fa,D),Fa.prototype.message="Deferred was canceled",Fa.prototype.name="CanceledError",Ua.prototype.c=function(){throw delete Va[this.a],this.b};var Va={};function $a(t){var e={},n=e.document||document,i=At(t).toString(),r=ve(document,"SCRIPT"),o={Wb:r,Ma:void 0},s=new Ra(o),h=null,f=null!=e.timeout?e.timeout:5e3;return 0<f&&(h=window.setTimeout(function(){Ka(r,!0);var t=new Ba(Ga,"Timeout reached for loading script "+i);Da(s),Pa(s,!1,t)},f),o.Ma=h),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ka(r,e.xd||!1,h),Da(s),Pa(s,!0,null))},r.onerror=function(){Ka(r,!0,h);var t=new Ba(Ha,"Error while loading script "+i);Da(s),Pa(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(r,o),function(t,e){gt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),s}function qa(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ka(t,!0,this.Ma)}}function Ka(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ha=0,Ga=1;function Ba(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Wa(t){this.f=t}function Xa(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||za,this.g=pt(t.secureTokenHeaders||Za),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Qa,this.a=pt(t.firebaseHeaders||ts),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wi(),!(n=a.XMLHttpRequest||n&&db.INTERNAL.node&&db.INTERNAL.node.XMLHttpRequest)&&!yi())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,yi()?this.f=new fa(self):Ii()?this.f=new Wa(n):this.f=new zo,this.b=null}k(Ba,D),k(Wa,Wo),Wa.prototype.a=function(){return new this.f},Wa.prototype.b=function(){return{}};var Ja,Ya="idToken",za=new Vi(3e4,6e4),Za={"Content-Type":"application/x-www-form-urlencoded"},Qa=new Vi(3e4,6e4),ts={"Content-Type":"application/json"};function es(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ns(t,e){e&&(t.l=is("https://securetoken.googleapis.com/v1/token",e),t.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=is("https://identitytoolkit.googleapis.com/v2/",e))}function is(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,Ln(t,e.c),t.a=e.a,xn(t,e.g),t.toString()}function rs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function os(t,e,n,i,r,o,s){(function(){var t=Ni();return!((t=Ei(t)!=ki?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&se&&!(9<se))})()||yi()?t=w(t.u,t):(Ja||(Ja=new Ie(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[ss]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=St(as,{onload:ss});!function(t,e){La(t,null,e,void 0)}($a(n),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=w(t.s,t)),t(e,n,i,r,o,s)}Xa.prototype.T=function(){return this.b},Xa.prototype.u=function(t,e,n,i,r,o){if(yi()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ga(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}Tn(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ha(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),kn(s,"ready",function(){u&&clearTimeout(u),Ge(this)}),kn(s,"timeout",function(){u&&clearTimeout(u),Ge(this),e&&e(null)}),Ia(s,t,n,i,r)};var as=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),ss="__fcb"+Math.floor(1e6*Math.random()).toString();function us(t,e,n,i,r,o,a){var s=Un(e+n);jn(s,"key",t.c),a&&jn(s,"cb",T().toString());var u="GET"==i;if(u)for(var c in r)r.hasOwnProperty(c)&&jn(s,c,r[c]);return new Ie(function(e,n){os(t,s.toString(),function(t){t?t.error?n(iu(t,o||{})):e(t):n(new A("network-request-failed"))},i,u?void 0:ii(xi(r)),t.a,t.v.get())})}function cs(t){if("string"!=typeof(t=t.email)||!vi.test(t))throw new A("invalid-email")}function hs(t){"email"in t&&cs(t)}function fs(t){if(!t[Ya]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,pt(t));throw new A("internal-error")}}function ls(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Xa.prototype.s=function(t,e,n,i,r){var o=this;Ja.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Xa.prototype.zb=function(){return eu(this,Ks,{})},Xa.prototype.Bb=function(t,e){return eu(this,$s,{idToken:t,email:e})},Xa.prototype.Cb=function(t,e){return eu(this,qs,{idToken:t,password:e})};var ds={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ps(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function vs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Qn(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function gs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Bo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Bo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Bo(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;fs(t)}function bs(t,e){return e.returnIdpCredential=!0,eu(t,Bs,e)}function ys(t,e){return e.returnIdpCredential=!0,eu(t,Xs,e)}function ws(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Ws,e)}function Is(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=Xa.prototype).Db=function(t,e){var n={idToken:t},i=[];return lt(ds,function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)}),i.length&&(n.deleteAttribute=i),eu(this,$s,n)},t.vb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,Ms,t)},t.wb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,Ds,t)},t.ub=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Ls,t)},t.Eb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,xs,t)},t.fb=function(t){return eu(this,zs,t)},t.nb=function(t,e){return eu(this,Us,{oobCode:t,newPassword:e})},t.Ra=function(t){return eu(this,ks,{oobCode:t})},t.jb=function(t){return eu(this,Ts,{oobCode:t})};var Ts={endpoint:"setAccountInfo",A:Is,Z:"email",B:!0},ks={endpoint:"resetPassword",A:Is,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Es={endpoint:"signupNewUser",A:function(t){if(cs(t),!t.password)throw new A("weak-password")},G:fs,V:!0,B:!0},As={endpoint:"createAuthUri",B:!0},Ss={endpoint:"deleteAccount",N:["idToken"]},Ns={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},_s={endpoint:"emailLinkSignin",N:["email","oobCode"],A:cs,G:fs,V:!0,B:!0},Os={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:cs,G:fs,V:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ps,G:fs,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ps,G:fs,B:!0,Na:!0},Ps={endpoint:"getAccountInfo"},Ds={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");cs(t)},Z:"email",B:!0},Ls={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},xs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");cs(t)},Z:"email",B:!0},js={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Fs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Us={endpoint:"resetPassword",A:Is,Z:"email",B:!0},Vs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},$s={endpoint:"setAccountInfo",N:["idToken"],A:hs,V:!0},qs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(hs(t),!t.password)throw new A("weak-password")},G:fs,V:!0},Ks={endpoint:"signupNewUser",G:fs,V:!0,B:!0},Hs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Bs={endpoint:"verifyAssertion",A:vs,Ya:ms,G:gs,V:!0,B:!0},Ws={endpoint:"verifyAssertion",A:vs,Ya:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);fs(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(vs(t),!t.idToken)throw new A("internal-error")},Ya:ms,G:gs,V:!0},Js={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:fs,V:!0,B:!0},Ys={endpoint:"verifyPassword",A:function(t){if(cs(t),!t.password)throw new A("wrong-password")},G:fs,V:!0,B:!0},zs={endpoint:"verifyPhoneNumber",A:ls,G:fs,B:!0},Zs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ls(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Bo(t);fs(t)}},Qs={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ls,G:fs,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ya]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return!1}return!0}(n,e.N))return Oe(new A("internal-error"));var i,r=!!e.Na,o=e.Ub||"POST";return _e(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),us(t,r?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return i=t,e.Ya?e.Ya(n,i):i}).then(e.G).then(function(){if(!e.Z)return i;if(!(e.Z in i))throw new A("internal-error");return i[e.Z]})}function nu(t){return iu({error:{errors:[{message:t}],code:400,message:t}})}function iu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new A(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",mt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new A(i[r],e);return!e&&t&&(e=Li(t)),new A("internal-error",e)}function ru(t){this.b=t,this.a=null,this.rb=function(t){return(uu||(uu=new Ie(function(t,e){function n(){Ui(),_i("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ui(),e(Error("Network Error"))},timeout:au.get()})}if(_i("gapi.iframes.Iframe"))t();else if(_i("gapi.load"))n();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[i]=function(){_i("gapi.load")?n():e(Error("Network Error"))},_e($a(i=St(ou,{onload:i}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw uu=null,t}))).then(function(){return new Ie(function(e,n){_i("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:_i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());i.ping(r).then(r,function(){n(Error("Network Error"))})})})})}(this)}var ou=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new Vi(3e4,6e4),su=new Vi(5e3,15e3),uu=null;function cu(t,e,n,i){this.l=t,this.h=e,this.i=n,this.g=i,this.f=null,this.g?t=Vn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,jn(this.a,"apiKey",this.h),jn(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(t,e,n,i,r,o){this.u=t,this.s=e,this.c=n,this.m=i,this.v=o,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function fu(t){try{return db.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,i,r,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=i||null,this.i=r||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=ci();return function(t){return eu(t,js,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),i=n.c;n=n.a;for(var r=0;r<t.length;r++){var o=t[r],a=n,s=i;if(0==o.indexOf("chrome-extension://")?a=Un(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:pi.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ho(ci())})}function pu(t){return t.m?t.m:(t.m=mi().then(function(){if(!t.u){var e=t.c,n=t.i,i=fu(t.b),r=new cu(t.s,t.g,t.b,t.f);r.f=e,r.b=n,r.c=z(i||[]),t.u=r.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,_i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)i=t.h[n](e)||i;return(n={}).status=i?"ACK":"ERROR",_e(n)}return n.status="ERROR",_e(n)})}(t)}),t.m)}function vu(t){return t.l||(t.C=t.c?Si(t.c,fu(t.b)):null,t.l=new Xa(t.g,R(t.i),t.C),t.f&&ns(t.l,t.f)),t.l}function mu(t,e,n,i,r,o,a,s,u,c,h,f){return(t=new hu(t,e,n,i,r,f)).l=o,t.g=a,t.i=s,t.b=pt(u||null),t.f=c,t.yb(h).toString()}function gu(t){if(this.a=t||db.INTERNAL.reactNative&&db.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=w(this.c,this)}cu.prototype.toString=function(){return this.f?jn(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?jn(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?jn(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},hu.prototype.yb=function(t){return this.h=t,this},hu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(jn(t,"apiKey",this.s),jn(t,"appName",this.c),jn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=db.app(this.c).auth().la()}catch(s){n=null}for(var i in e.ob=n,jn(t,"providerId",this.a.providerId),e=xi((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=pt(e);for(var r=0;r<i.length;r++){var o=i[r];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),dt(e)||jn(t,"customParameters",Li(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&jn(t,"scopes",n.join(",")),this.l?jn(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?jn(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?jn(t,"v",this.i):Zn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&jn(t,a,this.b[a]);return this.h?jn(t,"tid",this.h):Zn(t.b,"tid"),this.f?jn(t,"eid",this.f):Zn(t.b,"eid"),(a=fu(this.c)).length&&jn(t,"fw",a.join(",")),t.toString()},(t=lu.prototype).Ob=function(t,e,n){var i=new A("popup-closed-by-user"),r=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return pu(t).then(function(){return function(t,e){return t.rb.then(function(){return new Ie(function(n){t.a.send(e.type,e,n,_i("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&li(t),e(r),a=!0)})}).o(function(){}).then(function(){if(!a)return function(t){return new Ie(function(e){return function n(){Sn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Sn(n).then(function(){e(i)})})},t.Xb=function(){var t=Ni();return!Di(t)&&!Fi(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,i,r,o,a,s){if(!t)return Oe(new A("popup-blocked"));if(a&&!Di())return this.ma().o(function(e){li(t),r(e)}),i(),_e();this.a||(this.a=du(vu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw li(t),r(e),e});return i(),e}).then(function(){(Fo(n),a)||hi(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,i){this.a||(this.a=du(vu(this)));var r=this;return this.a.then(function(){Fo(e),hi(mu(r.s,r.g,r.b,t,e,ci(),n,r.c,void 0,r.i,i,r.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ma=function(){var t=this;return pu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new A("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){J(this.h,function(e){return e==t})},(t=gu.prototype).get=function(t){return _e(this.a.getItem(t)).then(function(t){return t&&Mi(t)})},t.set=function(t,e){return _e(this.a.setItem(t,Li(e)))},t.U=function(t){return _e(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,wu=[];function Iu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function ku(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,i){var r,o,a,s,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=i?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie(function(n,i){f?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),a=setTimeout(function(){i(Error("unsupported_event"))},h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){i(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):i(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),i(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:r,data:u},[f.port2])):i(Error("connection_unavailable"))}).then(function(e){return Au(t,c),e}).o(function(e){throw Au(t,c),e})}function Au(t,e){if(e){var n=e.messageChannel,i=e.onMessage;n&&(n.port1.removeEventListener("message",i),n.port1.close()),J(t.a,function(t){return t==e})}}function Su(){if(!Cu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;yi()&&self?(this.v=function(){var t=yi()?self:null;if(K(wu,function(n){n.b==t&&(e=n)}),!e){var e=new bu(t);wu.push(e)}return e}(),Iu(this.v,"keyChanged",function(e,n){return xu(t).then(function(e){return 0<e.length&&K(t.a,function(t){t(e)}),{keyProcessed:W(e,n.key)}})}),Iu(this.v,"ping",function(){return _e(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?_e().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):_e(null)}().then(function(e){(t.h=e)&&(t.g=new ku(new Tu(e)),Eu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&W(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Nu(t){return new Ie(function(e,n){var i=t.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(i):function(t){return new Ie(function(e,n){var i=t.m.deleteDatabase("firebaseLocalStorageDb");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Nu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function _u(t){return t.i||(t.i=Nu(t)),t.i}function Ou(t,e){var n=0;return new Ie(function i(r,o){_u(t).then(e).then(r).o(function(e){if(!(3<++n))return _u(t).then(function(e){return e.close(),t.i=void 0,i(r,o)}).o(function(t){o(t)});o(e)})})}function Cu(){try{return!!a.indexedDB}catch(Bt){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Du(t){return new Ie(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Lu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):_e()}function xu(t){return _u(t).then(function(t){var e=Ru(Pu(t,!1));return e.getAll?Du(e.getAll()):new Ie(function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(t.c,n),t.c=n}return i})}function Mu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then(function(){if(Cu()){var t=ji(),i="__sak"+t;return yu||(yu=new Su),(n=yu).set(i,t).then(function(){return n.get(i)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(i)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){K(e.a,function(e){e(t)})}),t})}function Fu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var t="Node"==wi();if(!(t=Vu()||t&&db.INTERNAL.node&&db.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wi())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Vu()||db.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var t=a.localStorage,e=ji();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $u(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==wi();if(!(t=Ku()||t&&db.INTERNAL.node&&db.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wi())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Ku()||db.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=a.sessionStorage,e=ji();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Wu,t.Node=Xu,t.ReactNative=Ju,t.Worker=Yu,this.a=t[wi()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,i=this.a[e];if(i&&0<i.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var r=[];K(i,function(e){r.push(_e().then(function(){return e(t.origin,t.data.data)}))}),Re(r).then(function(i){var r=[];K(i,function(t){r.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),K(r,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:r})})}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},ku.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Su.prototype).set=function(t,e){var n=this,i=!1;return Ou(this,function(e){return Du((e=Ru(Pu(e,!0))).get(t))}).then(function(r){return Ou(n,function(o){if(o=Ru(Pu(o,!0)),r)return r.value=e,Du(o.put(r));n.b++,i=!0;var a={};return a.fbase_key=t,a.value=e,Du(o.add(a))})}).then(function(){return n.c[t]=e,Lu(n,t)}).oa(function(){i&&n.b--})},t.get=function(t){return Ou(this,function(e){return Du(Ru(Pu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Ou(this,function(i){return n=!0,e.b++,Du(Ru(Pu(i,!0)).delete(t))}).then(function(){return delete e.c[t],Lu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Mu(t),function e(){t.f=setTimeout(function(){t.l=xu(t).then(function(e){0<e.length&&K(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,function(e){return e==t}),0==this.a.length&&Mu(this)},(t=ju.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,function(e){return e==t})},(t=Fu.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.U=function(t){return delete this.a[t],_e()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return _e().then(function(){return Mi(e.a.getItem(t))})},t.set=function(t,e){var n=this;return _e().then(function(){var i=Li(e);null===i?n.U(t):n.a.setItem(t,i)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&ln(a.window,"storage",t)},(t=$u.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.U=function(){return _e()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return _e().then(function(){return Mi(e.a.getItem(t))})},t.set=function(t,e){var n=this;return _e().then(function(){var i=Li(e);null===i?n.U(t):n.a.setItem(t,i)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Gu,Bu,Wu={F:Uu,bb:qu},Xu={F:Uu,bb:qu},Ju={F:gu,bb:$u},Yu={F:Uu,bb:$u},zu={rd:"local",NONE:"none",td:"session"};function Zu(){var t=!(Fi(Ni())||!bi()),e=Di(),n=Oi();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Hu),t=Gu;try{this.g=!ui()&&Ki()||!a.indexedDB?new t.a.F:new ju(yi()?new Fu:new t.a.F)}catch(i){this.g=new Fu,this.h=!0}try{this.i=new t.a.bb}catch(i){this.i=new Fu}this.v=new Fu,this.f=w(this.Yb,this),this.b={}}function Qu(){return Bu||(Bu=new Zu),Bu}function tc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g;}}function ec(t,e){return"firebase:"+t.name+(e?":"+e:"")}function nc(t,e,n){return n=ec(e,n),"local"==e.F&&(t.b[n]=null),tc(t,e.F).U(n)}function ic(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Qu()}(t=Zu.prototype).get=function(t,e){return tc(this,t.F).get(ec(t,e))},t.set=function(t,e,n){var i=ec(t,n),r=this,o=tc(this,t.F);return o.set(i,e).then(function(){return o.get(i)}).then(function(e){"local"==t.F&&(r.b[i]=e)})},t.addListener=function(t,e,n){t=ec(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(tc(this,"local").ca(this.f),this.h||(ui()||!Ki())&&a.indexedDB||!this.l||function(t){ic(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new ze({type:"storage",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ec(t,e),this.a[t]&&(J(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(tc(this,"local").ia(this.f),ic(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=a.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?tc(this,"local").ia(this.f):ic(this),this.m)if(n=a.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?a.localStorage.setItem(e,i):a.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Xt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],function(t){t()})};var oc,ac={name:"authEvent",F:"local"};function sc(){this.a=Qu()}function uc(t,e){this.b=cc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===oc&&(oc=a.Int32Array?new Int32Array(mc):mc),this.reset()}k(uc,function(){this.b=-1});for(var cc=64,hc=cc-1,fc=[],lc=0;lc<hc;lc++)fc[lc]=0;var dc=Y(128,fc);function pc(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&f)+(0|oc[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+a|0,u=s,s=r,r=i,i=a+l|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function vc(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if("string"==typeof e)for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(pc(t),r=0);else{if(!l(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(pc(t),r=0)}}t.c=r,t.g+=n}uc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):z(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){uc.call(this,8,bc)}k(gc,uc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,i,r,o){this.v=t,this.i=e,this.l=n,this.m=i||null,this.u=r||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function wc(t){return new A("invalid-cordova-configuration",t)}function Ic(t){var e=new gc;vc(e,t),t=[];var n=8*e.g;56>e.c?vc(e,dc,56-e.c):vc(e,dc,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(pc(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return G(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(i){}}function kc(t){return t.f||(t.f=t.ma().then(function(){return new Ie(function(e){t.Ea(function n(i){return e(i),t.Sa(n),!1}),function(t){function e(e){i=!0,r&&r.cancel(),Ec(t).then(function(i){var r=n;if(i&&e&&e.url){var o=null;-1!=(r=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mi(Fn(o=Un(r),"firebaseError")||null))?S(o):null)?new Uo(i.c,i.b,null,null,o,null,i.T()):new Uo(i.c,i.b,r,i.f,null,null,i.T())),r=o||n}Tc(t,r)})}var n=new Uo("unknown",null,null,null,new A("no-auth-event")),i=!1,r=Sn(500).then(function(){return Ec(t).then(function(){i||Tc(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_i("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ko||(Ko=new $o),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=_i("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Ec(t){var e=null;return function(t){return t.b.get(ac,t.a).then(function(t){return Vo(t)})}(t.g).then(function(n){return e=n,nc((n=t.g).b,ac,n.a)}).then(function(){return e})}function Ac(t){this.a=t,this.b=Qu()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gi(void 0)?mi().then(function(){return new Ie(function(t,e){var n=a.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _i("universalLinks.subscribe",a))throw wc("cordova-universal-links-plugin-fix is not installed");if(void 0===_i("BuildInfo.packageName",a))throw wc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _i("cordova.plugins.browsertab.openUrl",a))throw wc("cordova-plugin-browsertab is not installed");if("function"!=typeof _i("cordova.InAppBrowser.open",a))throw wc("cordova-plugin-inappbrowser is not installed")},function(){throw new A("cordova-not-ready")})},t.Ob=function(t,e){return e(new A("operation-not-supported-in-this-environment")),_e()},t.Mb=function(){return Oe(new A("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,i){if(this.c)return Oe(new A("redirect-operation-pending"));var r=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=_e().then(function(){return Fo(e),kc(r)}).then(function(){return function(t,e,n,i,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Uo(e,i,null,o,new A("no-auth-event"),null,r),u=_i("BuildInfo.packageName",a);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=_i("BuildInfo.displayName",a),h={};if(Ni().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Ni().toLowerCase().match(/android/))return Oe(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ic(o),h.sessionId=o;var f=mu(t.v,t.i,t.l,e,n,null,i,t.m,h,t.u,r,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ac,s.w(),e)}).then(function(){var e=_i("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=_i("cordova.plugins.browsertab.openUrl",a)))throw new A("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=_i("cordova.InAppBrowser.open",a)))throw new A("invalid-cordova-configuration");e=Ni(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(r,t,e,n,i)}).then(function(){return new Ie(function(t,e){u=function(){var e=_i("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.Ea(u),c=function(){s||(s=Sn(2e3).then(function(){e(new A("redirect-cancelled-by-user"))}))},h=function(){$i()&&c()},o.addEventListener("resume",c,!1),Ni().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)}).o(function(t){return Ec(r).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&r.Sa(u),r.c=null})},t.Ea=function(t){this.b.push(t),kc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new A("no-auth-event")),t(e))})},t.Sa=function(t){J(this.b,function(e){return e==t})};var Sc={name:"pendingRedirect",F:"session"};function Nc(t){return nc(t.b,Sc,t.a)}function _c(t,e,n,i){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=i,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Kc,this.C=new Xc,this.g=new Ac($c(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,N,this.J)}function Oc(t,e,n,i,r){var o=db.SDK_VERSION||null;return gi()?new yc(t,e,n,o,i,r):new lu(t,e,n,o,i,r)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Rc(t){t.a.Xb()&&Cc(t).o(function(e){var n=new Uo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}),t.a.Tb()||Hc(t.b)}function Pc(t,e){W(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Sc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Nc(t.g).then(function(){Cc(t).o(function(e){var n=new Uo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})}):Rc(t)}).o(function(){Rc(t)})}function Dc(t,e){J(t.h,function(t){return t==e})}_c.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},_c.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return Hc(this.b),e};var Lc=new Vi(2e3,1e4),xc=new Vi(3e4,6e4);function Mc(t,e,n,i,r,o,a){return t.a.Mb(e,n,i,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},r,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Fc(t,e,n,i,r){var o;return function(t){return t.b.set(Sc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,i,r).o(function(e){if(jc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new Ie(function(){}):Nc(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Uc(t,e,n,i,r){return t.a.Ob(i,function(t){e.na(n,null,t,r)},Lc.get())}_c.prototype.qa=function(){return this.b.qa()};var Vc={};function $c(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function qc(t,e,n,i){var r=$c(e,n,i);return Vc[r]||(Vc[r]=new _c(t,e,n,i)),Vc[r]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Wc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Wc(t,!1,null,null)}function Bc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wc(t,e,n,i){e?i?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Bc(t,n):Bc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Jc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Yc(t,e){this.a=e,Xi(this,"verificationId",t)}function zc(t,e,n,i){return new xo(t).fb(e,n).then(function(t){return new Yc(t,i)})}function Zc(t){var e=Kr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ji(this,{token:t,expirationTime:qi(1e3*e.exp),authTime:qi(1e3*e.auth_time),issuedAtTime:qi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Qc(t,e,n){var i=e&&e[eh];if(!i)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new ro(null,i),this.b=[];var r=this;K(e[th]||[],function(t){(t=Qi(t))&&r.b.push(t)}),Xi(this,"auth",this.a),Xi(this,"session",this.c),Xi(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!r&&!o),"unknown"!=n||r||o?t.a?(Wc(this,!0,null,t.a),_e()):e.Fa(n,i)?function(t,e,n){n=n.Fa(e.c,e.b);var i=e.g,r=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(i,r,a,o).then(function(e){Wc(t,s,e,null)}).o(function(e){Wc(t,s,null,e)})}(this,t,e):Oe(new A("invalid-auth-event")):(Wc(this,!1,null,null),_e())}else Oe(new A("invalid-auth-event"))},Kc.prototype.qa=function(){var t=this;return new Ie(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Sn(xc.get()).then(function(){t.b||(t.g=!0,Wc(t,!0,null,e))})}(t))})},Xc.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.na(t.c,null,t.a,t.b),_e()):e.Fa(n,i)?function(t,e){var n=t.b,i=t.c;e.Fa(i,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(i,t,null,n)}).o(function(t){e.na(i,null,t,n)})}(t,e):Oe(new A("invalid-auth-event"))}else Oe(new A("invalid-auth-event"))},Yc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var th="mfaInfo",eh="mfaPendingCredential";function nh(t,e,n,i){A.call(this,"multi-factor-auth-required",i,e),this.b=new Qc(t,e,n),Xi(this,"resolver",this.b)}function ih(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new nh(e,t.serverResponse,n,t.message)}catch(i){}return null}function rh(){}function oh(t){Xi(this,"factorId",t.fa),this.a=t}function ah(t){if(oh.call(this,t),this.a.fa!=xo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sh(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function uh(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,function(t){var e=null,i={};if(t){t.uid&&(i[nr]=t.uid),t.displayName&&(i[tr]=t.displayName),t.enrollmentTime&&(i[er]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(i[ir]=t.phoneNumber);try{e=new rr(i)}catch(r){}t=e}else t=null;t&&n.push(t)}),ch(this,n)}function ch(t,e){t.b=e,Xi(t,"enrolledFactors",e)}function hh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function lh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function dh(t,e){t.b=qr(e[Ya]||""),t.a=e.refreshToken,lh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ph(t,e){return function(t,e){return new Ie(function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?os(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?i(iu(t)):t.access_token&&t.refresh_token?n(t):i(new A("internal-error")):i(new A("network-request-failed"))},"POST",zn(e).toString(),t.g,t.m.get()):i(new A("internal-error"))})}(t.f,e).then(function(e){return t.b=qr(e.access_token),t.a=e.refresh_token,lh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function vh(t,e){this.a=t||null,this.b=e||null,Ji(this,{lastSignInTime:qi(e||null),creationTime:qi(t||null)})}function mh(t,e,n,i,r,o){Ji(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function gh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=db.SDK_VERSION?Si(db.SDK_VERSION):null;this.a=new Xa(this.l,R(N),i),t.emulatorConfig&&ns(this.a,t.emulatorConfig),this.b=new fh(this.a),Ah(this,e[Ya]),dh(this.b,e),Xi(this,"refreshToken",this.b.a),_h(this,n||{}),In.call(this),this.R=!1,this.s&&Ci()&&(this.i=qc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new hh(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=w(this.hb,this);var r=this;this.ya=null,this.Oa=function(t){r.wa(t.h)},this.ja=null,this.Aa=function(t){ns(r.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){wh(r,t.f)},this.ba=null,this.O=new uh(this,n),Xi(this,"multiFactor",this.O)}function bh(t,e){t.ja&&ln(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function yh(t,e){t.X&&ln(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function wh(t,e){t.$=e,rs(t.a,db.SDK_VERSION?Si(db.SDK_VERSION,t.$):null)}function Ih(t,e){t.ba&&ln(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function Th(t){try{return db.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kh(t){t.D||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function Eh(t){ln(t,"tokenChanged",t.aa),t.u.stop()}function Ah(t,e){t.za=e,Xi(t,"_lat",e)}function Sh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then(function(){return t})}function Nh(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function _h(t,e){Ji(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new vh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Oh(){}function Ch(t){return _e().then(function(){if(t.D)throw new A("app-deleted")})}function Rh(t){return G(t.providerData,function(t){return t.providerId})}function Ph(t,e){e&&(Dh(t,e.providerId),t.providerData.push(e))}function Dh(t,e){J(t.providerData,function(t){return t.providerId==e})}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Xi(t,e,n)}function xh(t,e){t!=e&&(Ji(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Xi(t,"metadata",function(t){return new vh(t.a,t.b)}(e.metadata)):Xi(t,"metadata",new vh),K(e.providerData,function(e){Ph(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Xi(t,"refreshToken",t.b.a),ch(t.O,e.O.b))}function Mh(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,Ps,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||Lh(t,"isAnonymous",!1),e})})}function jh(t,e){e[Ya]&&t.za!=e[Ya]&&(dh(t.b,e),t.dispatchEvent(new sh("tokenChanged")),Ah(t,e[Ya]),Lh(t,"refreshToken",t.b.a))}function Fh(t,e){return Mh(t).then(function(){if(W(Rh(t),e))return Sh(t).then(function(){throw new A("provider-already-linked")})})}function Uh(t,e,n){return Yi({user:t,credential:jo(e),additionalUserInfo:e=Xr(e),operationType:n})}function Vh(t,e){return jh(t,e),t.reload().then(function(){return t})}function $h(t,e,n,i,r){if(!Ci())return Oe(new A("operation-not-supported-in-this-environment"));if(t.h&&!r)return Oe(t.h);var o=Wr(n.providerId),a=ji(t.uid+":::"),s=null;(!Di()||bi())&&t.s&&n.isOAuthProvider&&(s=mu(t.s,t.l,t.m,e,n,null,a,db.SDK_VERSION||null,null,null,t.tenantId));var u=di(s,o&&o.ua,o&&o.ta);return i=i().then(function(){if(Kh(t),!r)return t.I().then(function(){})}).then(function(){return Mc(t.i,u,e,n,a,!!s,t.tenantId)}).then(function(){return new Ie(function(n,i){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=i,t.g=a,t.c=Uc(t.i,t,e,u,a)})}).then(function(t){return u&&li(u),t?Yi(t):null}).o(function(t){throw u&&li(u),t}),Hh(t,i,r)}function qh(t,e,n,i,r){if(!Ci())return Oe(new A("operation-not-supported-in-this-environment"));if(t.h&&!r)return Oe(t.h);var o=null,a=ji(t.uid+":::");return i=i().then(function(){if(Kh(t),!r)return t.I().then(function(){})}).then(function(){return t.ga=a,Sh(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Wh,t.w(),e.a)),e}).then(function(){return Fc(t.i,e,n,a,t.tenantId)}).o(function(e){if(o=e,t.ha)return Xh(t.ha);throw o}).then(function(){if(o)throw o}),Hh(t,i,r)}function Kh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Hh(t,e,n){var i=function(t,e,n){return t.h&&!n?(e.cancel(),Oe(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new sh("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(i),i.oa(function(){X(t.J,i)}),i.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Th(t),w(t.jc,t))),n||e})}function Gh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ya]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var i=t.stsTokenManager.expirationTime;i&&(n.expiresIn=(i-Date.now())/1e3);var r=new gh(e,n,t);return t.providerData&&K(t.providerData,function(t){t&&Ph(r,Yi(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Bh(t){this.a=t,this.b=Qu()}Qc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=pt(e.f);return delete n[th],delete n[eh],mt(n,t),e.g(n)})},k(nh,A),rh.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,i){return n.Ha().then(function(n){return n={idToken:n},void 0!==i&&(n.displayName=i),mt(n,{phoneVerificationInfo:Lo(t.a)}),eu(e,Cs,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),eu(e,Rs,n)})}(this,t,e)},k(oh,rh),k(ah,oh),k(sh,Ye),(t=uh.prototype).yc=function(t){ch(this,function(t){var e=[];return K(t.mfaInfo||[],function(t){(t=Qi(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new ro(t,null)})},t.fc=function(t,e){var n=this,i=this.a.a;return this.Rb().then(function(n){return t.sb(i,n,e)}).then(function(t){return jh(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,i=this.a.a;return this.a.I().then(function(t){return eu(i,tu,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var i=H(e.b,function(t){return t.uid!=n});return ch(e,i),jh(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:G(this.b,function(t){return t.w()})}}},hh.prototype.start=function(){this.a=this.c,function t(e,n){e.stop();e.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=a.document,e=null,$i()||!t?_e():new Ie(function(n){e=function(){$i()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},hh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},fh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},fh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ph(this,{grant_type:"refresh_token",refresh_token:this.a}):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a})},vh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},k(gh,In),gh.prototype.wa=function(t){this.ya=t,es(this.a,t)},gh.prototype.la=function(){return this.ya},gh.prototype.Ga=function(){return z(this.$)},gh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Xi(gh.prototype,"providerId","firebase"),(t=gh.prototype).reload=function(){var t=this;return Hh(this,Ch(this).then(function(){return Mh(t).then(function(){return Sh(t)}).then(Oh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Zc(t)})},t.I=function(t){var e=this;return Hh(this,Ch(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.za&&(Ah(e,t.accessToken),e.dispatchEvent(new sh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");_h(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Ph(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sh("userReloaded",{hd:t}))},t.Lc=function(t){return Bi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Hh(this,t.c(this.a,this.uid).then(function(t){return jh(e,t),n=Uh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Bi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Hh(this,Fh(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Uh(e,t,"link"),Vh(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Hh(this,Fh(this,"phone").then(function(){return zc(Th(n),t,e,w(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Hh(this,_e().then(function(){return zc(Th(n),t,e,w(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Hh(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return jh(e,t),e.reload()}))},t.ed=function(t){var e=this;return Hh(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return jh(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Hh(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return jh(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ch(this);var e=this;return Hh(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return jh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),K(e.providerData,function(t){"password"===t.providerId&&(Xi(t,"displayName",e.displayName),Xi(t,"photoURL",e.photoURL))}),Sh(e)}).then(Oh))},t.cd=function(t){var e=this;return Hh(this,Mh(this).then(function(n){return W(Rh(e),t)?function(t,e,n){return eu(t,Ns,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return K(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),K(Rh(e),function(t){n[t]||Dh(e,t)}),n[xo.PROVIDER_ID]||Xi(e,"phoneNumber",null),Sh(e)}):Sh(e).then(function(){throw new A("no-such-provider")})}))},t.delete=function(){var t=this;return Hh(this,this.I().then(function(e){return eu(t.a,Ss,{idToken:e})}).then(function(){t.dispatchEvent(new sh("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bh(t,null),yh(t,null),Ih(t,null),t.J=[],t.D=!0,Eh(t),Xi(t,"refreshToken",null),t.i&&Dc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return $h(this,"linkViaPopup",t,function(){return Fh(e,t.providerId).then(function(){return Sh(e)})},!1)},t.Nc=function(t){return $h(this,"reauthViaPopup",t,function(){return _e()},!0)},t.Fc=function(t){var e=this;return qh(this,"linkViaRedirect",t,function(){return Fh(e,t.providerId)},!1)},t.Oc=function(t){return qh(this,"reauthViaRedirect",t,function(){return _e()},!0)},t.Kb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,this.I().then(function(n){return ys(r.a,{requestUri:t,postBody:i,sessionId:e,idToken:n})}).then(function(t){return o=Uh(r,t,"link"),Vh(r,t)}).then(function(){return o}))},t.Lb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,_e().then(function(){return uo(ws(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)}).then(function(t){return o=Uh(r,t,"reauthenticate"),jh(r,t),r.h=null,r.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Hh(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:Fr(new _r(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,i=null;return Hh(this,this.I().then(function(t){return i=t,void 0===e||dt(e)?{}:Fr(new _r(e))}).then(function(e){return n.a.Eb(i,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Hh(this,t=uo(_e(t),n.uid).then(function(t){return e=Uh(n,t,"reauthenticate"),jh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),K(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),mt(t,this.O.w()),t};var Wh={name:"redirectUser",F:"session"};function Xh(t){return nc(t.b,Wh,t.a)}function Jh(t){this.a=t,this.b=Qu(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),i=Zh("none");return function(t,e,n){var i=ec(e,n),r=tc(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Mi(a.localStorage.getItem(i))}catch(u){}if(s&&!o)return a.localStorage.removeItem(i),t.set(e,s,n);s&&o&&"localStorage"!=r.type&&a.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(r){return r?n:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(zh,t.a).then(function(t){return t?Zh(t):e})})})}).then(function(e){return t.c=e,Yh(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Zh("local"),this.a,w(this.g,this))}function Yh(t,e){var n,i=[];for(n in zu)zu[n]!==e&&i.push(nc(t.b,Zh(zu[n]),t.a));return i.push(nc(t.b,zh,t.a)),function(t){return new Ie(function(e,n){var i=t.length,r=[];if(i)for(var o=function(t,n){i--,r[t]=n,0==i&&e(r)},a=function(t){n(t)},s=0;s<t.length;s++)Ce(t[s],I(o,s),a);else e(r)})}(i)}Jh.prototype.g=function(){var t=this,e=Zh("local");nf(this,function(){return _e().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Yh(t,"local").then(function(){t.c=e})})})};var zh={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function Qh(t,e){return nf(t,function(){return t.b.set(t.c,e.w(),t.a)})}function tf(t){return nf(t,function(){return nc(t.b,t.c,t.a)})}function ef(t,e,n){return nf(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gh(t||{})})})}function nf(t,e){return t.f=t.f.then(e,e),t.f}function rf(t){if(this.l=!1,Xi(this,"settings",new Jc),Xi(this,"app",t),!df(this).options||!df(this).options.apiKey)throw new A("invalid-api-key");t=db.SDK_VERSION?Si(db.SDK_VERSION):null,this.a=new Xa(df(this).options&&df(this).options.apiKey,R(N),t),this.R=[],this.s=[],this.O=[],this.hb=db.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=db.INTERNAL.createSubscribe(w(this.Ac,this)),ff(this,null),this.i=new Jh(df(this).options.apiKey+":"+df(this).name),this.D=new Bh(df(this).options.apiKey+":"+df(this).name),this.$=gf(this,function(t){var e=df(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Wh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Gh(t||{})})}(t.D,df(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Xh(t.D)});return gf(t,e)}(t).then(function(){return ef(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Qh(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:tf(t.i)})):null}).then(function(e){ff(t,e||null)});return gf(t,n)}(this)),this.h=gf(this,function(t){return t.$.then(function(){return cf(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=df(t).options.authDomain,n=df(t).options.apiKey;e&&Ci()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=qc(e,n,df(t).name,t.P),Pc(t.b,t),pf(t)&&Nh(pf(t)),t.m){Nh(t.m);var i=t.m;i.wa(t.la()),bh(i,t),wh(i=t.m,t.J),Ih(i,t),ns((i=t.m).a,t.P),yh(i,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,In.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Un(this.P.url);t=Yi({protocol:t.c,host:t.a,port:t.g,options:Yi({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function of(t){Ye.call(this,"languageCodeChanged"),this.h=t}function af(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function sf(t){Ye.call(this,"frameworkChanged"),this.f=t}function uf(t){return t.Oa||Oe(new A("auth-domain-config-required"))}function cf(t){if(!Ci())return Oe(new A("operation-not-supported-in-this-environment"));var e=uf(t).then(function(){return t.b.qa()}).then(function(t){return t?Yi(t):null});return gf(t,e)}function hf(t,e){var n={};return n.apiKey=df(t).options.apiKey,n.authDomain=df(t).options.authDomain,n.appName=df(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,i){var r=new gh(t,e);return n&&(r.ha=n),i&&wh(r,i),r.reload().then(function(){return r})}(n,e,t.D,t.Ga())}).then(function(e){return pf(t)&&e.uid==pf(t).uid?(xh(pf(t),e),t.da(e)):(ff(t,e),Nh(e),t.da(e))}).then(function(){mf(t)})}function ff(t,e){pf(t)&&(function(t,e){J(t.S,function(t){return t==e})}(pf(t),t.Ba),ln(pf(t),"tokenChanged",t.ya),ln(pf(t),"userDeleted",t.za),ln(pf(t),"userInvalidated",t.Aa),Eh(pf(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&kh(e)),Xi(t,"currentUser",e),e&&(e.wa(t.la()),bh(e,t),wh(e,t.J),Ih(e,t),ns(e.a,t.P),yh(e,t))}function lf(t,e){var n=null,i=null;return gf(t,e.then(function(e){return n=jo(e),i=Xr(e),hf(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Yi({user:pf(t),credential:n,additionalUserInfo:i,operationType:"signIn"})}))}function df(t){return t.app}function pf(t){return t.currentUser}function vf(t){return pf(t)&&pf(t)._lat||null}function mf(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](vf(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](vf(t))}}function gf(t,e){return t.R.push(e),e.oa(function(){X(t.R,e)}),e}function bf(){}function yf(){this.a={},this.b=1e12}Jh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(i in zu)if(zu[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(wi()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Cu()&&"none"!==t)throw n;break;default:if(!Oi()&&"none"!==t)throw n;}}(t),nf(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(i){return e=i,Yh(n,t)}).then(function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)}):_e()})},k(rf,In),k(of,Ye),k(af,Ye),k(sf,Ye),(t=rf.prototype).xb=function(t){return gf(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,es(this.a,this.aa),this.dispatchEvent(new of(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&mi().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ns(this.a,this.P),this.dispatchEvent(new af(this.P))}},t.Gc=function(t){this.J.push(t),rs(this.a,db.SDK_VERSION?Si(db.SDK_VERSION,this.J):null),this.dispatchEvent(new sf(this.J))},t.Ga=function(){return z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:df(this).options.apiKey,authDomain:df(this).options.authDomain,appName:df(this).name,currentUser:pf(this)&&pf(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1;}},t.na=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,i){var r=this,o={requestUri:t,postBody:i,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.$.then(function(){return lf(r,bs(r.a,o))})},t.Xc=function(t){if(!Ci())return Oe(new A("operation-not-supported-in-this-environment"));var e=this,n=Wr(t.providerId),i=ji(),r=null;(!Di()||bi())&&df(this).options.authDomain&&t.isOAuthProvider&&(r=mu(df(this).options.authDomain,df(this).options.apiKey,df(this).name,"signInViaPopup",t,null,i,db.SDK_VERSION||null,null,null,this.T(),this.P));var o=di(r,n&&n.ua,n&&n.ta);return gf(this,n=uf(this).then(function(n){return Mc(n,o,"signInViaPopup",t,i,!!r,e.T())}).then(function(){return new Ie(function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Uc(e.b,e,"signInViaPopup",o,i)})}).then(function(t){return o&&li(o),t?Yi(t):null}).o(function(t){throw o&&li(o),t}))},t.Yc=function(t){if(!Ci())return Oe(new A("operation-not-supported-in-this-environment"));var e=this;return gf(this,uf(this).then(function(){return nf(t=e.i,function(){return t.b.set(zh,t.c.F,t.a)});var t}).then(function(){return Fc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return cf(this).then(function(e){return t.b&&Gc(t.b.b),e}).o(function(e){throw t.b&&Gc(t.b.b),e})},t.dd=function(t){if(!t)return Oe(new A("null-user"));if(this.S!=t.tenantId)return Oe(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=df(this).options.apiKey,n.authDomain=df(this).options.authDomain,n.appName=df(this).name;var i=function(t,e,n,i){var r=t.b,o={};return o[Ya]=r.b&&r.b.toString(),o.refreshToken=r.a,e=new gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),i&&wh(e,i),xh(e,t),e}(t,n,e.D,e.Ga());return gf(this,this.h.then(function(){if(df(e).options.apiKey!=t.l)return i.reload()}).then(function(){return pf(e)&&t.uid==pf(e).uid?(xh(pf(e),t),e.da(t)):(ff(e,i),Nh(i),e.da(i))}).then(function(){mf(e)}))},t.Ab=function(){var t=this;return gf(this,this.h.then(function(){return t.b&&Gc(t.b.b),pf(t)?(ff(t,null),tf(t.i).then(function(){mf(t)})):_e()}))},t.Zc=function(){var t=this;return ef(this.i,df(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=pf(t)&&e){n=pf(t).uid;var i=e.uid;n=null!=n&&""!==n&&null!=i&&""!==i&&n==i}if(n)return xh(pf(t),e),pf(t).I();(pf(t)||e)&&(ff(t,e),e&&(Nh(e),e.ha=t.D),t.b&&Pc(t.b,t),mf(t))}})},t.da=function(t){return Qh(this.i,t)},t.mc=function(){mf(this),this.da(pf(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return lf(e,_e(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(pf(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gf(t,t.h.then(function(){!t.l&&W(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(vf(t)))}))}(this,function(){t.next(pf(e))})},t.Ic=function(t,e,n){var i=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(pf(i)):"function"==typeof t.next&&t.next(pf(i))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var i=this;return this.ba&&Promise.resolve().then(function(){i.X=i.getUid(),"function"==typeof t?t(pf(i)):"function"==typeof t.next&&t.next(pf(i))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return gf(this,this.h.then(function(){return pf(e)?pf(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return lf(e,eu(e.a,Js,{token:t}))}).then(function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return lf(n,eu(n.a,Ys,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return lf(n,eu(n.a,Es,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return lf(e,t.ka(e.a))})},t.Sc=function(t){return Bi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=pf(t);if(e&&e.isAnonymous){var n=Yi({providerId:null,isNewUser:!1});return Yi({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return lf(t,t.a.zb()).then(function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return pf(this)&&pf(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&pf(this)&&kh(pf(this))},t.Pc=function(t){var e=this;K(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&pf(this)&&Eh(pf(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gf(this,this.h.then(function(){e.l||W(e.s,t)&&t(vf(e))}))},t.removeAuthTokenListener=function(t){J(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(Dc(this.b,this),Gc(this.b.b)),Promise.resolve()},t.hc=function(t){return gf(this,function(t,e){return eu(t,As,{identifier:e,continueUri:Ri()?ci():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.wb=function(t,e){var n=this;return gf(this,_e().then(function(){var t=new _r(e);if(!t.c)throw new A("argument-error",Rr+" must be true when sending sign in link to email");return Fr(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return gf(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return gf(this,this.a.Ra(t).then(function(t){return new or(t)}))},t.jb=function(t){return gf(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return gf(this,_e().then(function(){return void 0===e||dt(e)?{}:Fr(new _r(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return gf(this,zc(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return gf(this,_e().then(function(){var i=e||ci(),r=Co(t,i);if(!(i=Ro(i)))throw new A("argument-error","Invalid email link!");if(i.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(r)}))},bf.prototype.render=function(){},bf.prototype.reset=function(){},bf.prototype.getResponse=function(){},bf.prototype.execute=function(){};var wf=null;function If(t,e){return(e=Tf(e))&&t.a[e]||null}function Tf(t){return(t=void 0===t?1e12:t)?t.toString():null}function kf(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function Ef(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Af(){}function Sf(){}yf.prototype.render=function(t,e){return this.a[this.b.toString()]=new kf(t,e),this.b++},yf.prototype.reset=function(t){var e=If(this,t);t=Tf(t),e&&t&&(e.delete(),delete this.a[t])},yf.prototype.getResponse=function(t){return(t=If(this,t))?t.getResponse():null},yf.prototype.execute=function(t){(t=If(this,t))&&t.execute()},kf.prototype.getResponse=function(){return Ef(this),this.b},kf.prototype.execute=function(){Ef(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(i){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(i){}t.h&&t.execute()},6e4)},500))},kf.prototype.delete=function(){Ef(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Xi(Af,"FACTOR_ID","phone"),Sf.prototype.g=function(){return wf||(wf=new yf),_e(wf)},Sf.prototype.c=function(){};var Nf=null;function _f(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Of=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Cf=new Vi(3e4,6e4);_f.prototype.g=function(t){var e=this;return new Ie(function(n,i){var r=setTimeout(function(){i(new A("network-request-failed"))},Cf.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(r),n(a.grecaptcha)}else clearTimeout(r),i(new A("internal-error"));delete a[e.a]},_e($a(St(Of,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(r),i(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),n(a.grecaptcha))})},_f.prototype.c=function(){this.b--};var Rf=null;function Pf(t,e,n,i,r,o,s){if(Xi(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Nf||(Nf=new Sf),s=Nf):(Rf||(Rf=new _f),s=Rf),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xf])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Mf],!a.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,r||null),this.u=i||function(){return null};var u=this;this.l=[];var c=this.a[Df];this.a[Df]=function(t){if(jf(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=_i(c,a);"function"==typeof e&&e(t)}};var h=this.a[Lf];this.a[Lf]=function(){if(jf(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=_i(h,a);"function"==typeof t&&t()}}}var Df="callback",Lf="expired-callback",xf="sitekey",Mf="size";function jf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(i){}}function Ff(t,e){return t.h.push(e),e.oa(function(){X(t.h,e)}),e}function Uf(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vf(t,e,n){var i=!1;try{this.b=n||db.app()}catch(a){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=db.SDK_VERSION?Si(db.SDK_VERSION,o):null,Pf.call(this,n,t,e,function(){try{var t=r.b.auth().la()}catch(e){t=null}return t},o,R(N),i)}function $f(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].M(n[r])&&!o){if(e=e[r],0>r||r>=qf.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=qf[r],i=(i?"":n+" argument ")+(e.name?"\""+e.name+"\" ":"")+"must be "+e.K+".";break t}i=null}}if(i)throw new A("argument-error",t+" failed: "+i)}(t=Pf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ff(this,_e().then(function(){if(Ri()&&!yi())return mi();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,eu(t.s,Fs,{})}).then(function(e){t.a[xf]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Uf(this);var t=this;return Ff(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=pe("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Uf(this);var t=this;return Ff(this,this.render().then(function(e){return new Ie(function(n){var i=t.g.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){J(t.l,function(t){return t==e})}(t,r),n(e))};t.l.push(r),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Uf(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Uf(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},k(Vf,Pf);var qf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kf(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Hf(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Bf(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Wf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jf(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yf(t){return p(t)&&"string"==typeof t.uid}function zf(t,e,n,i){return{name:n||"",K:t.K+" or "+e.K,optional:!!i,M:function(n){return t.M(n)||e.M(n)}}}function Zf(t,e){for(var n in e){var i=e[n].name;t[i]=el(i,t[n],e[n].j)}}function Qf(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:I(function(t){return this[t]},n),set:I(function(t,e,n,i){$f(t,[n],[i],!0),this[e]=i},i,n,e[n].kb),enumerable:!0})}}function tl(t,e,n,i){t[e]=el(e,n,i)}function el(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return $f(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Zf(rf.prototype,{jb:{name:"applyActionCode",j:[Kf("code")]},Ra:{name:"checkActionCode",j:[Kf("code")]},nb:{name:"confirmPasswordReset",j:[Kf("code"),Kf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Kf("email"),Kf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Kf("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Kf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[zf(Gf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[zf(Gf(),Bf(),"nextOrObserver"),Bf("opt_error",!0),Bf("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Kf("email"),zf(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Kf("email"),Gf("actionCodeSettings")]},xb:{name:"setPersistence",j:[Kf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xf()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xf()]},Tc:{name:"signInWithCustomToken",j:[Kf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Kf("email"),Kf("password")]},Vc:{name:"signInWithEmailLink",j:[Kf("email"),Kf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Kf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[zf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gh)}},Wf(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Kf("url"),Gf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Kf("code")]}}),Qf(rf.prototype,{lc:{name:"languageCode",kb:zf(Kf(),Wf(),"languageCode")},ti:{name:"tenantId",kb:zf(Kf(),Wf(),"tenantId")}}),rf.Persistence=zu,rf.Persistence.LOCAL="local",rf.Persistence.SESSION="session",rf.Persistence.NONE="none",Zf(gh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Hf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xf()]},qb:{name:"linkWithCredential",j:[Xf()]},Dc:{name:"linkWithPhoneNumber",j:[Kf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xf()]},tb:{name:"reauthenticateWithCredential",j:[Xf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Kf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[zf(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kf(null,!0)]},cd:{name:"unlink",j:[Kf("provider")]},Bb:{name:"updateEmail",j:[Kf("email")]},Cb:{name:"updatePassword",j:[Kf("password")]},ed:{name:"updatePhoneNumber",j:[Xf("phone")]},Db:{name:"updateProfile",j:[Gf("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Kf("email"),zf(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]}}),Zf(yf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zf(bf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zf(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qf(Jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Hf("appVerificationDisabledForTesting")}}),Zf(Yc.prototype,{confirm:{name:"confirm",j:[Kf("verificationCode")]}}),tl(so,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,_o,Do,fo],i=0;i<n.length;i++)if(e=n[i](t))return e;return null},[zf(Kf(),Gf(),"json")]),tl(Oo,"credential",function(t,e){return new No(t,e)},[Kf("email"),Kf("password")]),Zf(No.prototype,{w:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(yo.prototype,{Ca:{name:"addScope",j:[Kf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(yo,"credential",wo,[zf(Kf(),Gf(),"token")]),tl(Oo,"credentialWithLink",Co,[Kf("email"),Kf("emailLink")]),Zf(Io.prototype,{Ca:{name:"addScope",j:[Kf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(Io,"credential",To,[zf(Kf(),Gf(),"token")]),Zf(ko.prototype,{Ca:{name:"addScope",j:[Kf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(ko,"credential",Eo,[zf(Kf(),zf(Gf(),Wf()),"idToken"),zf(Kf(),Wf(),"accessToken",!0)]),Zf(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(Ao,"credential",So,[zf(Kf(),Gf(),"token"),Kf("secret",!0)]),Zf(bo.prototype,{Ca:{name:"addScope",j:[Kf("scope")]},credential:{name:"credential",j:[zf(Kf(),zf(Gf(),Wf()),"optionsOrIdToken"),zf(Kf(),Wf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),Zf(lo.prototype,{w:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(co.prototype,{w:{name:"toJSON",j:[Kf(null,!0)]}}),tl(xo,"credential",Mo,[Kf("verificationId"),Kf("verificationCode")]),Zf(xo.prototype,{fb:{name:"verifyPhoneNumber",j:[zf(Kf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jf(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jf(t.session,ao)&&Yf(t.multiFactorHint):t.session&&t.multiFactorUid?Jf(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Zf(Po.prototype,{w:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(A.prototype,{toJSON:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(Go.prototype,{toJSON:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(Ho.prototype,{toJSON:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(nh.prototype,{toJSON:{name:"toJSON",j:[Kf(null,!0)]}}),Zf(Qc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Zf(uh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Kf("displayName",!0)]},bd:{name:"unenroll",j:[zf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yf},Kf(),"multiFactorInfoIdentifier")]}}),Zf(Vf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tl(yr,"parseLink",Nr,[Kf("link")]),tl(Af,"assertion",function(t){return new ah(t)},[Xf("phone")]),function(){if("undefined"==typeof db||!db.INTERNAL||!db.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:sr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ar,VERIFY_AND_CHANGE_EMAIL:ur,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:rf,AuthCredential:so,Error:A};tl(t,"EmailAuthProvider",Oo,[]),tl(t,"FacebookAuthProvider",yo,[]),tl(t,"GithubAuthProvider",Io,[]),tl(t,"GoogleAuthProvider",ko,[]),tl(t,"TwitterAuthProvider",Ao,[]),tl(t,"OAuthProvider",bo,[Kf("providerId")]),tl(t,"SAMLAuthProvider",go,[Kf("providerId")]),tl(t,"PhoneAuthProvider",xo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof rf)}}]),tl(t,"RecaptchaVerifier",Vf,[zf(Kf(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof db.app.App)}}]),tl(t,"ActionCodeURL",yr,[]),tl(t,"PhoneMultiFactorGenerator",Af,[]),db.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new rf(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),db.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),db.registerVersion("@firebase/auth","0.16.4"),db.INTERNAL.extendNamespace({User:gh})}()}).apply("undefined"!=typeof Fb?Fb:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});db.initializeApp({apiKey:"AIzaSyDMhnS2dJk0yTMERT0j4g6jEQ80_nikPHw",authDomain:"flickering-torch-6356.firebaseapp.com",databaseURL:"https://flickering-torch-6356.firebaseio.com",projectId:"flickering-torch-6356",storageBucket:"flickering-torch-6356.appspot.com",messagingSenderId:"60549942221"});var nw=db.auth();tk.auth=nw;var ow=db.database();tk.database=ow;function Ub(t,i,e,o){this.yawOnly=e,this.accelerometer=new xb,this.gyroscope=new xb,this.filter=new ag(t,o),this.posePredictor=new ww(i,o),this.isFirefoxAndroid=gG(),this.isIOS=mj();let n=rw();this.isDeviceMotionInRadians=!this.isIOS&&n&&n<66,this.isWithoutDeviceMotion=iG()||hG(),this.filterToWorldQ=new rb,mj()?this.filterToWorldQ.setFromAxisAngle(new xb(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new xb(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new rb,this.worldToScreenQ=new rb,this.originalPoseAdjustQ=new rb,this.originalPoseAdjustQ.setFromAxisAngle(new xb(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),tw()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new rb,this.orientationOut_=new Float32Array(4),this.start()}function ag(t,e){this.kFilter=t,this.isDebug=e,this.currentAccelMeasurement=new lj,this.currentGyroMeasurement=new lj,this.previousGyroMeasurement=new lj,mj()?this.filterQ=new rb(-1,0,0,1):this.filterQ=new rb(1,0,0,1),this.previousFilterQ=new rb,this.previousFilterQ.copy(this.filterQ),this.accelQ=new rb,this.isOrientationInitialized=!1,this.estimatedGravity=new xb,this.measuredGravity=new xb,this.gyroIntegralQ=new rb}function lj(t,e){this.set(t,e)}lj.prototype.set=function(t,e){this.sample=t,this.timestampS=e},lj.prototype.copy=function(t){this.set(t.sample,t.timestampS)};const cG=Math.PI/180;const pw=180/Math.PI;const qw=function(t,i){this.x=t||0,this.y=i||0};qw.prototype={constructor:qw,set:function(t,i){return this.x=t,this.y=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}};const xb=function(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0};xb.prototype={constructor:xb,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,s=this.y,h=this.z,r=t.x,o=t.y,n=t.z,e=t.w,x=e*i+o*h-n*s,u=e*s+n*i-r*h,c=e*h+r*s-o*i,y=-r*i-o*s-n*h;return this.x=x*e+y*-r+u*-n-c*-o,this.y=u*e+y*-o+c*-r-x*-n,this.z=c*e+y*-n+x*-o-u*-r,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var s=t.x,h=t.y,r=t.z,o=i.x,n=i.y,e=i.z;return this.x=h*e-r*n,this.y=r*o-s*e,this.z=s*n-h*o,this}};const rb=function(t,i,s,h){this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==h?h:1};rb.prototype={constructor:rb,set:function(t,i,s,h){return this.x=t,this.y=i,this.z=s,this.w=h,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,s){var h=Math.cos(t/2),r=Math.cos(i/2),o=Math.cos(s/2),n=Math.sin(t/2),e=Math.sin(i/2),x=Math.sin(s/2);return this.x=n*r*o+h*e*x,this.y=h*e*o-n*r*x,this.z=h*r*x+n*e*o,this.w=h*r*o-n*e*x,this},setFromEulerYXZ:function(t,i,s){var h=Math.cos(t/2),r=Math.cos(i/2),o=Math.cos(s/2),n=Math.sin(t/2),e=Math.sin(i/2),x=Math.sin(s/2);return this.x=n*r*o+h*e*x,this.y=h*e*o-n*r*x,this.z=h*r*x-n*e*o,this.w=h*r*o+n*e*x,this},setFromAxisAngle:function(t,i){var s=i/2,h=Math.sin(s);return this.x=t.x*h,this.y=t.y*h,this.z=t.z*h,this.w=Math.cos(s),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var s=t.x,h=t.y,r=t.z,o=t.w,n=i.x,e=i.y,x=i.z,u=i.w;return this.x=s*u+o*n+h*x-r*e,this.y=h*u+o*e+r*n-s*x,this.z=r*u+o*x+s*e-h*n,this.w=o*u-s*n-h*e-r*x,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this.x,h=this.y,r=this.z,o=this.w,n=o*t.w+s*t.x+h*t.y+r*t.z;if(n<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,n=-n):this.copy(t),n>=1)return this.w=o,this.x=s,this.y=h,this.z=r,this;var e=Math.acos(n),x=Math.sqrt(1-n*n);if(Math.abs(x)<.001)return this.w=.5*(o+this.w),this.x=.5*(s+this.x),this.y=.5*(h+this.y),this.z=.5*(r+this.z),this;var u=Math.sin((1-i)*e)/x,c=Math.sin(i*e)/x;return this.w=o*u+this.w*c,this.x=s*u+this.x*c,this.y=h*u+this.y*c,this.z=r*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(s,h){return void 0===t&&(t=new xb),(i=s.dot(h)+1)<1e-6?(i=0,Math.abs(s.x)>Math.abs(s.z)?t.set(-s.y,s.x,0):t.set(0,-s.z,s.y)):t.crossVectors(s,h),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};const dG=.001;const eG=1;const mj=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}();const d=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}();const fG=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}();const gG=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}();const rw=function(){const e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),t=e?parseInt(e[1],10):null;return function(){return t}}();const hG=function(){let e=!1;return e=mj()&&fG()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return e}}();const iG=function(){let e=!1;if(65===rw()){const t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){const[r,o,n,i]=t[1].split(".");e=3325===parseInt(n,10)&&parseInt(i,10)<148}}return function(){return e}}();const sw=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}();const tw=function(){var e=90==window.orientation||-90==window.orientation;return sw()?!e:e};const jG=function(e){return!isNaN(e)&&!(e<=.001)&&!(e>1)};const e=function(){var e=Math.PI/180,t=.25*Math.PI;var r=new Float32Array([0,0,0,1]),o=new Float32Array([0,0,0]);function n(n,i,a,s,$,x){!function(r,o,n,i){var a=Math.tan(o?o.upDegrees*e:t),s=Math.tan(o?o.downDegrees*e:t),$=Math.tan(o?o.leftDegrees*e:t),x=Math.tan(o?o.rightDegrees*e:t),c=2/($+x),h=2/(a+s);r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-($-x)*c*.5,r[9]=(a-s)*h*.5,r[10]=i/(n-i),r[11]=-1,r[12]=0,r[13]=0,r[14]=i*n/(n-i),r[15]=0}(n,s||null,x.depthNear,x.depthFar);var c,h,p,u,l,d,m,y,I,g,f,w,v,b,F,S,k,M,A,O=a.orientation||r,P=a.position||o;c=i,p=P,u=(h=O)[0],l=h[1],d=h[2],m=h[3],f=u*(y=u+u),w=u*(I=l+l),v=u*(g=d+d),b=l*I,F=l*g,S=d*g,k=m*y,M=m*I,A=m*g,c[0]=1-(b+S),c[1]=w+A,c[2]=v-M,c[3]=0,c[4]=w-A,c[5]=1-(f+S),c[6]=F+k,c[7]=0,c[8]=v+M,c[9]=F-k,c[10]=1-(f+b),c[11]=0,c[12]=p[0],c[13]=p[1],c[14]=p[2],c[15]=1,$&&function(e,t,r){var o,n,i,a,s,$,x,c,h,p,u,l,d=r[0],m=r[1],y=r[2];t===e?(e[12]=t[0]*d+t[4]*m+t[8]*y+t[12],e[13]=t[1]*d+t[5]*m+t[9]*y+t[13],e[14]=t[2]*d+t[6]*m+t[10]*y+t[14],e[15]=t[3]*d+t[7]*m+t[11]*y+t[15]):(o=t[0],n=t[1],i=t[2],a=t[3],s=t[4],$=t[5],x=t[6],c=t[7],h=t[8],p=t[9],u=t[10],l=t[11],e[0]=o,e[1]=n,e[2]=i,e[3]=a,e[4]=s,e[5]=$,e[6]=x,e[7]=c,e[8]=h,e[9]=p,e[10]=u,e[11]=l,e[12]=o*d+s*m+h*y+t[12],e[13]=n*d+$*m+p*y+t[13],e[14]=i*d+x*m+u*y+t[14],e[15]=a*d+c*m+l*y+t[15])}(i,i,$),function(e,t){var r=t[0],o=t[1],n=t[2],i=t[3],a=t[4],s=t[5],$=t[6],x=t[7],c=t[8],h=t[9],p=t[10],u=t[11],l=t[12],d=t[13],m=t[14],y=t[15],I=r*s-o*a,g=r*$-n*a,f=r*x-i*a,w=o*$-n*s,v=o*x-i*s,b=n*x-i*$,F=c*d-h*l,S=c*m-p*l,k=c*y-u*l,M=h*m-p*d,A=h*y-u*d,O=p*y-u*m,P=I*O-g*A+f*M+w*k-v*S+b*F;P&&(P=1/P,e[0]=(s*O-$*A+x*M)*P,e[1]=(n*A-o*O-i*M)*P,e[2]=(d*b-m*v+y*w)*P,e[3]=(p*v-h*b-u*w)*P,e[4]=($*k-a*O-x*S)*P,e[5]=(r*O-n*k+i*S)*P,e[6]=(m*f-l*b-y*g)*P,e[7]=(c*b-p*f+u*g)*P,e[8]=(a*A-s*k+x*F)*P,e[9]=(o*k-r*A-i*F)*P,e[10]=(l*v-d*f+y*I)*P,e[11]=(h*f-c*v-u*I)*P,e[12]=(s*S-a*M-$*F)*P,e[13]=(r*M-o*S+n*F)*P,e[14]=(d*g-l*w-m*I)*P,e[15]=(c*w-h*g+p*I)*P)}(i,i)}return function(e,t,r){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,n(e.leftProjectionMatrix,e.leftViewMatrix,t,r._getFieldOfView("left"),r._getEyeOffset("left"),r),n(e.rightProjectionMatrix,e.rightViewMatrix,t,r._getFieldOfView("right"),r._getEyeOffset("right"),r),!0)}}();const kG=function(){var e=window.self!==window.top,t=uw(document.referrer),r=uw(window.location.href);return e&&t!==r};const uw=function(e){var t,r=e.indexOf("://");t=-1!==r?r+3:0;var o=e.indexOf("/",t);return-1===o&&(o=e.length),e.substring(0,o)};const lG=function(e){return e.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(e.w)};const vw=function(){var e={};return function(t,r){void 0===e[t]&&(console.warn("webvr-polyfill: "+r),e[t]=!0)}}();ag.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},ag.prototype.addGyroMeasurement=function(t,e){this.currentGyroMeasurement.set(t,e);var i=e-this.previousGyroMeasurement.timestampS;jG(i)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ag.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var i=new rb;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r=new rb;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",pw*lG(r),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var s=new rb;s.copy(this.filterQ),s.multiply(r),this.filterQ.slerp(s,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ag.prototype.getOrientation=function(){return this.filterQ},ag.prototype.accelToQuaternion_=function(t){var e=new xb;e.copy(t),e.normalize();var i=new rb;return i.setFromUnitVectors(new xb(0,0,-1),e),i.inverse(),i},ag.prototype.gyroToQuaternionDelta_=function(t,e){var i=new rb,r=new xb;return r.copy(t),r.normalize(),i.setFromAxisAngle(r,t.length()*e),i};function ww(i,t){this.predictionTimeS=i,this.isDebug=t,this.previousQ=new rb,this.previousTimestampS=null,this.deltaQ=new rb,this.outQ=new rb}ww.prototype.getPrediction=function(i,t,e){if(!this.previousTimestampS)return this.previousQ.copy(i),this.previousTimestampS=e,i;var o=new xb;o.copy(t),o.normalize();var s=t.length();if(s<20*cG)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(pw*s).toFixed(1)),this.outQ.copy(i),this.previousQ.copy(i),this.outQ;this.previousTimestampS;var r=s*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(o,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(i),this.previousTimestampS=e,this.outQ};Ub.prototype.getPosition=function(){return null},Ub.prototype.getOrientation=function(){let t;var i;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){const t=new rb().setFromAxisAngle(new xb(0,0,-1),0),i=new rb;return-90===window.orientation?i.setFromAxisAngle(new xb(0,1,0),Math.PI/-2):i.setFromAxisAngle(new xb(0,1,0),Math.PI/2),t.multiply(i)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){const t=new rb;return t.setFromAxisAngle(new xb(1,0,0),-Math.PI/2),t}(),t=this._deviceOrientationQ,(i=new rb).copy(t),i.multiply(this.deviceOrientationFilterToWorldQ),i.multiply(this.resetQ),i.multiply(this.worldToScreenQ),i.multiplyQuaternions(this.deviceOrientationFixQ,i),this.yawOnly&&(i.x=0,i.z=0,i.normalize()),this.orientationOut_[0]=i.x,this.orientationOut_[1]=i.y,this.orientationOut_[2]=i.z,this.orientationOut_[3]=i.w,this.orientationOut_;{let i=this.filter.getOrientation();t=this.posePredictor.getPrediction(i,this.gyroscope,this.previousTimestampS)}return(i=new rb).copy(this.filterToWorldQ),i.multiply(this.resetQ),i.multiply(t),i.multiply(this.worldToScreenQ),this.yawOnly&&(i.x=0,i.z=0,i.normalize()),this.orientationOut_[0]=i.x,this.orientationOut_[1]=i.y,this.orientationOut_[2]=i.z,this.orientationOut_[3]=i.w,this.orientationOut_},Ub.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),tw()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Ub.prototype.onDeviceOrientation_=function(t){this._deviceOrientationQ=this._deviceOrientationQ||new rb;let{alpha:i,beta:e,gamma:o}=t;i=(i||0)*Math.PI/180,e=(e||0)*Math.PI/180,o=(o||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(e,i,-o)},Ub.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},Ub.prototype.updateDeviceMotion_=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,o=t.timeStamp/1e3,n=o-this.previousTimestampS;return n<0?(vw("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=o)):n<=dG||n>eG?(vw("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=o)):(this.accelerometer.set(-i.x,-i.y,-i.z),e&&(sw()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,o)),this.filter.addAccelMeasurement(this.accelerometer,o),void(this.previousTimestampS=o))},Ub.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},Ub.prototype.onMessage_=function(t){var i=t.data;i&&i.type&&"devicemotion"===i.type.toLowerCase()&&this.updateDeviceMotion_(i.deviceMotionEvent)},Ub.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new xb(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new xb(0,0,1),Math.PI/2);}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Ub.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),mj()&&kG()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Ub.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var qm={},mG=(Ud(),Zb).Buffer;function xw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=new Uint8Array(e);return e>0&&crypto.getRandomValues(r),mG.from(r.buffer)}qm.default=xw;var bg=document.querySelector("main"),uk=document.querySelector("h1"),nG=document.querySelector("button"),yw=window,oG=yw.innerWidth,pG=yw.innerHeight,qG=location,rG=qG.hash;bg.className="loading",nG.addEventListener("click",function(e){e.preventDefault(),location.reload(!0)}),nw.signInAnonymously().then(function(e){if(e&&e.user){bg.className="signed-in",uk.innerText="logged in";var r=e.user.uid,o=ow.ref("/rooms/".concat(rG.slice(1),"/connections")).push({createdAt:db.database.ServerValue.TIMESTAMP}),n=o.child("offer").ref,a=o.child("answer").ref;o.onDisconnect().set(null);var $Jlv9$$interop$default=zw(lw);var t=new $Jlv9$$interop$default.d({initiator:!0,trickle:!1}),i=new Ub(.98,.04,!1,!1),$=-1,c=function e(r){$=requestAnimationFrame(e);var o=i.getOrientation();t.send(JSON.stringify({orientation:[].slice.call(o)}))},s=function(){bg.className="error",uk.innerHTML="sorry player<br />something went wrong",cancelAnimationFrame($)},l=xw().toString("hex").slice(0,7);t.on("signal",function(e){"offer"===e.type&&(bg.className="calling",uk.innerText="connecting\u2026",n.set(sm(sm({},e),{},{uid:r})))}).on("connect",function(){bg.className="connected",uk.innerText="".concat(l);var e=new Date().toLocaleTimeString();t.send(JSON.stringify({width:oG,height:pG,connection:o.key,player:l,time:e})),$=requestAnimationFrame(c)}).on("error",s).on("close",s).on("end",s).on("data",function(e){var r=JSON.parse(e),o=(r.host,r.time),n=r.bkgd;o||(bg.style.background=n)}),a.on("value",function(e){e&&e.val()&&(console.log("answer.on 'value':\n".concat(JSON.stringify(e.val(),null,2),"\n\n")),bg.className="receiving",t.signal(e.val()))})}});tk.__esModule=true;qm.__esModule=true;return{"Jlv9":lw,"peL6":(Ud(),Zb),"d2yc":tk,"ela3":qm,"oEZM":{}};});